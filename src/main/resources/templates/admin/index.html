<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ë∂ÖÁ∫ßÁÆ°ÁêÜÂêéÂè∞ - ÊãçÂçñÁ≥ªÁªü</title>
    
    <!-- Element UI CSS -->
    <link rel="stylesheet" href="/css/element-plus.css">
    <!-- Ëá™ÂÆö‰πâÊ†∑Âºè -->
    <link href="/auction/admin/css/admin.css" rel="stylesheet">
    <style>
        .item-upload-page .form-section {
            margin-bottom: 30px;
        }
        
        .item-upload-page .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #303133;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #EBEEF5;
        }
        
        
        .image-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }
        
        .image-item {
            position: relative;
            width: 120px;
            height: 120px;
            border: 1px solid #DCDFE6;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .image-actions {
            position: absolute;
            top: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px;
        }
        
        /* ÁºñËæëÂØπËØùÊ°ÜÂõæÁâáÈ¢ÑËßàÊ†∑Âºè */
        .image-preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .image-preview-item {
            position: relative;
            width: 120px;
            height: 120px;
            border: 1px solid #DCDFE6;
            border-radius: 6px;
            overflow: hidden;
            cursor: pointer;
        }
        
        .image-preview-item:hover {
            border-color: #409EFF;
        }
        
        /* ‰øÆÂ§çÂõæÁâáÈ¢ÑËßàÂ±ÇÁ∫ßÈóÆÈ¢ò */
        .el-image-viewer__wrapper {
            z-index: 999999 !important;
            position: fixed !important;
        }
        
        .el-image__preview {
            z-index: 999999 !important;
        }
        
        .el-image-viewer__mask {
            z-index: 999998 !important;
            position: fixed !important;
        }
        
        .el-image-viewer__btn {
            z-index: 999999 !important;
        }
        
        .el-image-viewer__canvas {
            z-index: 999999 !important;
        }
        
        .el-image-viewer__actions {
            z-index: 999999 !important;
        }
        
        .el-image-viewer__close {
            z-index: 999999 !important;
        }
        
        
        /* ÈôêÂà∂ÂõæÁâáÈ¢ÑËßàÂ§ßÂ∞è */
        .el-image-viewer__canvas {
            max-width: 80vw !important;
            max-height: 80vh !important;
            width: auto !important;
            height: auto !important;
        }
        
        .el-image-viewer__wrapper {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }
        
        .el-image-viewer__img {
            max-width: 80vw !important;
            max-height: 80vh !important;
            width: auto !important;
            height: auto !important;
            object-fit: contain !important;
        }
        
        
        /* ÁºñËæëÊãçÂìÅÂõæÁâáÁÆ°ÁêÜÊ†∑Âºè */
        .image-upload-section {
            width: 100%;
        }
        
        .table-image {
            width: 80px;
            height: 80px;
            border-radius: 4px;
        }
        
        .existing-images-section {
            margin-bottom: 20px;
        }
        
        .existing-images-section .section-title {
            font-size: 14px;
            font-weight: 600;
            color: #303133;
            margin-bottom: 10px;
        }
        
        
        .sessions-page .page-header,
        .session-create-page .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .sessions-page .page-header h1,
        .session-create-page .page-header h1 {
            margin: 0;
            font-size: 24px;
            color: #303133;
        }
        
        .selected-count {
            margin-left: 10px;
            color: #409EFF;
            font-size: 14px;
        }
        
        .selected-items {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .item-tag {
            margin: 0;
        }
        
        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e4e7ed;
            border-radius: 6px;
            background: #fafafa;
        }
        
        .section-title {
            margin: 0 0 20px 0;
            font-size: 16px;
            font-weight: 600;
            color: #303133;
            border-bottom: 2px solid #409EFF;
            padding-bottom: 8px;
        }
        
        .form-tip {
            font-size: 12px;
        }
        
        .upload-tips {
            margin-top: 10px;
            padding: 10px;
            background: #f5f7fa;
            border-radius: 4px;
            border-left: 3px solid #409EFF;
        }
        
        .upload-tips p {
            margin: 5px 0;
            font-size: 13px;
            color: #606266;
            line-height: 1.4;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- È°∂ÈÉ®ÂØºËà™ -->
        <el-header class="header">
            <div class="header-content">
                <div class="left-section">
                    <div class="logo">
                        <i class="el-icon-gavel"></i>
                        <span>ÊãçÂçñÁ≥ªÁªü - Ë∂ÖÁ∫ßÁÆ°ÁêÜ</span>
                    </div>
                </div>
                
                <div class="right-section">
                    <el-dropdown @command="handleUserCommand">
                        <span class="user-name">
                            <i class="el-icon-user"></i>
                            {{ userInfo.nickname || userInfo.username }}
                            <i class="el-icon-arrow-down"></i>
                        </span>
                        <template #dropdown>
                            <el-dropdown-menu>
                                <el-dropdown-item command="profile">‰∏™‰∫∫ËµÑÊñô</el-dropdown-item>
                                <el-dropdown-item command="logout" divided>ÈÄÄÂá∫ÁôªÂΩï</el-dropdown-item>
                            </el-dropdown-menu>
                        </template>
                    </el-dropdown>
                </div>
            </div>
        </el-header>

        <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->
        <el-container class="main-container">
            <!-- ‰æßËæπÊ†è -->
            <el-aside :width="sidebarWidth" class="admin-sidebar">
                <el-menu
                    :default-active="activeMenu"
                    :collapse="isCollapse"
                    :unique-opened="true"
                    @select="handleMenuSelect">
                    
                    <el-menu-item index="dashboard" @click="goToPage('dashboard')">
                        <i class="el-icon-data-line"></i>
                        <span>‰ª™Ë°®Êùø</span>
                    </el-menu-item>
                    
                    <el-sub-menu index="item-management">
                        <template #title>
                            <i class="el-icon-box"></i>
                            <span>ÊãçÂìÅÁÆ°ÁêÜ</span>
                        </template>
                        <el-menu-item index="items" @click="goToPage('items')">ÊãçÂìÅÂàóË°®</el-menu-item>
                        <el-menu-item index="items/add" @click="goToPage('items/add')">‰∏ä‰º†ÊãçÂìÅ</el-menu-item>
                    </el-sub-menu>
                    
                    <el-sub-menu index="session-management">
                        <template #title>
                            <i class="el-icon-trophy"></i>
                            <span>ÊãçÂçñ‰ºöÁÆ°ÁêÜ</span>
                        </template>
                        <el-menu-item index="sessions" @click="goToPage('sessions')">ÊãçÂçñ‰ºöÂàóË°®</el-menu-item>
                        <el-menu-item index="sessions/add" @click="goToPage('sessions/add')">ÂàõÂª∫ÊãçÂçñ‰ºö</el-menu-item>
                    </el-sub-menu>
                    
                    <el-sub-menu index="data-management">
                        <template #title>
                            <i class="el-icon-data-analysis"></i>
                            <span>Êï∞ÊçÆÁÆ°ÁêÜ</span>
                        </template>
                        <el-menu-item index="deposits" @click="goToPage('deposits')">‰øùËØÅÈáëÂÆ°Ê†∏</el-menu-item>
                        <el-menu-item index="orders-ship" @click="goToPage('orders-ship')">ËÆ¢ÂçïÂèëË¥ß</el-menu-item>
                    </el-sub-menu>
                    
                    <el-sub-menu index="risk-management">
                        <template #title>
                            <i class="el-icon-warning"></i>
                            <span>È£éÊéßÁÆ°ÁêÜ</span>
                        </template>
                        <el-menu-item index="deposit-accounts" @click="goToPage('deposit-accounts')">‰øùËØÅÈáëË¥¶Êà∑</el-menu-item>
                    </el-sub-menu>
                    
                    <el-sub-menu index="system-management">
                        <template #title>
                            <i class="el-icon-setting"></i>
                            <span>Á≥ªÁªüÁÆ°ÁêÜ</span>
                        </template>
                        <el-menu-item index="config" @click="goToPage('config')">Á≥ªÁªüÈÖçÁΩÆ</el-menu-item>
                        <el-menu-item index="user-management" @click="goToPage('user-management')">Áî®Êà∑ÁÆ°ÁêÜ</el-menu-item>
                        <el-menu-item index="audit-logs" @click="goToPage('audit-logs')">ÂÆ°ËÆ°Êó•Âøó</el-menu-item>
                        <el-menu-item index="notices" @click="goToPage('notices')">ÂèÇÊãçÈ°ªÁü•</el-menu-item>
                    </el-sub-menu>
                </el-menu>
            </el-aside>

            <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
            <el-main class="admin-main">
                <!-- Èù¢ÂåÖÂ±ëÂØºËà™ -->
                <el-breadcrumb separator="/" class="breadcrumb">
                    <el-breadcrumb-item v-for="item in breadcrumbList" :key="item.path">
                        <a v-if="item.path" @click="goToPage(item.path)">{{ item.name }}</a>
                        <span v-else>{{ item.name }}</span>
                    </el-breadcrumb-item>
                </el-breadcrumb>

                <!-- È°µÈù¢ÂÜÖÂÆπ -->
                <div class="page-content">
                    <!-- ‰ª™Ë°®Êùø -->
                    <div v-if="activeMenu === 'dashboard'" class="dashboard">
                        <h1>‰ª™Ë°®Êùø</h1>
                        
                        <!-- ÁªüËÆ°Âç°Áâá -->
                        <el-row :gutter="20" class="stats-row">
                            <el-col :span="6">
                                <el-card class="stat-card">
                                    <div class="stat-content">
                                        <div class="stat-value">{{ stats.totalItems }}</div>
                                        <div class="stat-label">ÊãçÂìÅÊÄªÊï∞</div>
                                    </div>
                                    <i class="el-icon-box stat-icon"></i>
                                </el-card>
                            </el-col>
                            <el-col :span="6">
                                <el-card class="stat-card">
                                    <div class="stat-content">
                                        <div class="stat-value">{{ stats.totalSessions }}</div>
                                        <div class="stat-label">ÊãçÂçñ‰ºöÊÄªÊï∞</div>
                                    </div>
                                    <i class="el-icon-trophy stat-icon"></i>
                                </el-card>
                            </el-col>
                            <el-col :span="6">
                                <el-card class="stat-card">
                                    <div class="stat-content">
                                        <div class="stat-value">{{ stats.totalUsers }}</div>
                                        <div class="stat-label">Áî®Êà∑ÊÄªÊï∞</div>
                                    </div>
                                    <i class="el-icon-user stat-icon"></i>
                                </el-card>
                            </el-col>
                            <el-col :span="6">
                                <el-card class="stat-card">
                                    <div class="stat-content">
                                        <div class="stat-value">{{ stats.totalBids }}</div>
                                        <div class="stat-label">Âá∫‰ª∑ÊÄªÊï∞</div>
                                    </div>
                                    <i class="el-icon-money stat-icon"></i>
                                </el-card>
                            </el-col>
                        </el-row>
                        
                        
                    </div>
                    
                    <!-- ÊãçÂìÅÂàóË°® -->
                    <div v-else-if="activeMenu === 'items'" class="items-page">
                        <div class="page-header">
                            <h1>ÊãçÂìÅÂàóË°®</h1>
                            <el-button type="primary" @click="goToPage('items/add')">
                                <i class="el-icon-plus"></i>
                                ‰∏ä‰º†ÊãçÂìÅ
                            </el-button>
                        </div>
                        
                        <!-- ÊêúÁ¥¢Á≠õÈÄâ -->
                        <el-card class="search-card">
                            <el-form :model="itemSearchForm" inline>
                                <el-form-item label="ÊãçÂìÅÂêçÁß∞">
                                    <el-input v-model="itemSearchForm.itemName" placeholder="ËØ∑ËæìÂÖ•ÊãçÂìÅÂêçÁß∞" clearable></el-input>
                                </el-form-item>
                                <el-form-item label="Áä∂ÊÄÅ">
                                    <el-select v-model="itemSearchForm.status" placeholder="ËØ∑ÈÄâÊã©Áä∂ÊÄÅ" clearable>
                                        <el-option label="ÂÖ®ÈÉ®" value=""></el-option>
                                        <el-option label="ËçâÁ®ø" :value="0"></el-option>
                                        <el-option label="ÂæÖÂÆ°Ê†∏" :value="1"></el-option>
                                        <el-option label="ÂÆ°Ê†∏ÈÄöËøá" :value="2"></el-option>
                                        <el-option label="ÂÆ°Ê†∏ÊãíÁªù" :value="3"></el-option>
                                        <el-option label="ÊãçÂçñ‰∏≠" :value="4"></el-option>
                                        <el-option label="Â∑≤Êàê‰∫§" :value="5"></el-option>
                                        <el-option label="ÊµÅÊãç" :value="6"></el-option>
                                    </el-select>
                                </el-form-item>
                                <el-form-item>
                                    <el-button type="primary" @click="searchItems">ÊêúÁ¥¢</el-button>
                                    <el-button @click="resetItemSearch">ÈáçÁΩÆ</el-button>
                                </el-form-item>
                            </el-form>
                        </el-card>
                        
                        <!-- ÊãçÂìÅË°®Ê†º -->
                        <el-card class="table-card">
                            <el-table :data="items" v-loading="itemsLoading" stripe>
                                <el-table-column prop="id" label="ID" width="80"></el-table-column>
                                <el-table-column label="ÂõæÁâá" width="120">
                                    <template #default="scope">
                                        <el-image
                                            :src="extractFirstImage(scope.row.images) || '/images/default-item.jpg'"
                                            :preview-src-list="(scope.row.imageList || []).map(url => url)"
                                            :initial-index="0"
                                            :preview-teleported="true"
                                            class="table-image"
                                            fit="cover">
                                        </el-image>
                                    </template>
                                </el-table-column>
                                <el-table-column prop="itemName" label="ÊãçÂìÅÂêçÁß∞" min-width="200"></el-table-column>
                                <el-table-column prop="startingPrice" label="Ëµ∑Êãç‰ª∑" width="120">
                                    <template #default="scope">
                                        ¬•{{ scope.row.startingPrice }}
                                    </template>
                                </el-table-column>
                                <el-table-column prop="currentPrice" label="ÂΩìÂâç‰ª∑Ê†º" width="120">
                                    <template #default="scope">
                                        ¬•{{ scope.row.currentPrice || scope.row.startingPrice }}
                                    </template>
                                </el-table-column>
                                <el-table-column prop="status" label="Áä∂ÊÄÅ" width="100">
                                    <template #default="scope">
                                        <el-tag :type="getItemStatusType(scope.row.status)">
                                            {{ getItemStatusText(scope.row.status) }}
                                        </el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column prop="createTime" label="ÂàõÂª∫Êó∂Èó¥" width="160">
                                    <template #default="scope">
                                        {{ formatTime(scope.row.createTime) }}
                                    </template>
                                </el-table-column>
                                <el-table-column label="Êìç‰Ωú" width="280" fixed="right">
                                    <template #default="scope">
                                        <el-button-group>
                                            <el-button type="primary" size="small" @click="editItem(scope.row)">ÁºñËæë</el-button>
                                            <el-button 
                                                :type="scope.row.status === 1 ? 'warning' : 'success'" 
                                                size="small" 
                                                @click="toggleItemStatus(scope.row)">
                                                {{ scope.row.status === 1 ? '‰∏ãÊû∂' : '‰∏äÊû∂' }}
                                            </el-button>
                                            <el-button type="danger" size="small" @click="deleteItem(scope.row)">Âà†Èô§</el-button>
                                        </el-button-group>
                                    </template>
                                </el-table-column>
                            </el-table>
                            
                            <!-- ÂàÜÈ°µ -->
                            <div class="pagination-container" v-if="itemsTotal > 0">
                                <el-pagination
                                    v-model:current-page="itemsPage"
                                    v-model:page-size="itemsPageSize"
                                    :page-sizes="[10, 20, 50, 100]"
                                    :total="itemsTotal"
                                    layout="total, sizes, prev, pager, next, jumper"
                                    @size-change="handleItemsSizeChange"
                                    @current-change="handleItemsCurrentChange">
                                </el-pagination>
                            </div>
                        </el-card>
                    </div>
                    
                    <!-- ‰øùËØÅÈáëÂÆ°Ê†∏ÁÆ°ÁêÜ -->
                    <div v-else-if="activeMenu === 'deposits'" class="deposits-page">
                        <div class="page-header">
                            <h1>‰øùËØÅÈáëÂÆ°Ê†∏ÁÆ°ÁêÜ</h1>
                            <el-button @click="refreshDepositAudit" icon="el-icon-refresh">Âà∑Êñ∞</el-button>
                        </div>

                        <el-card>
                            <!-- Ê†áÁ≠æÈ°µÂàáÊç¢ -->
                            <el-tabs v-model="depositAuditTab" @tab-change="onDepositAuditTabChange">
                                <!-- ÂæÖÂÆ°Ê†∏Ê†áÁ≠æÈ°µ -->
                                <el-tab-pane label="ÂæÖÂÆ°Ê†∏" name="pending">
                                    <!-- Á≠õÈÄâ -->
                                    <div style="margin-bottom: 20px;">
                                        <el-radio-group v-model="depositTypeFilter" @change="loadPendingDeposits">
                                            <el-radio-button :label="null">ÂÖ®ÈÉ®</el-radio-button>
                                            <el-radio-button :label="1">ÂÖÖÂÄºÁî≥ËØ∑</el-radio-button>
                                            <el-radio-button :label="6">ÊèêÁé∞Áî≥ËØ∑</el-radio-button>
                                        </el-radio-group>
                                        
                                        <el-tag v-if="pendingDeposits.length > 0" type="warning" style="margin-left: 15px;">
                                            ÂæÖÂÆ°Ê†∏: {{ pendingDeposits.length }} Êù°
                                        </el-tag>
                                    </div>

                                    <!-- ÂæÖÂÆ°Ê†∏ÂàóË°® -->
                            <el-table 
                                :data="pendingDeposits" 
                                v-loading="depositsLoading"
                                stripe
                                border>
                                <el-table-column prop="transactionNo" label="ÊµÅÊ∞¥Âè∑" width="220"></el-table-column>
                                <el-table-column label="Á±ªÂûã" width="100">
                                    <template #default="scope">
                                        <el-tag :type="scope.row.transactionType === 1 ? 'success' : 'warning'">
                                            {{ scope.row.transactionType === 1 ? 'ÂÖÖÂÄº' : 'ÊèêÁé∞' }}
                                        </el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column label="Áî®Êà∑ID" prop="userId" width="100"></el-table-column>
                                <el-table-column label="ÈáëÈ¢ù" width="120">
                                    <template #default="scope">
                                        <span style="color: #F56C6C; font-weight: bold;">
                                            ¬•{{ scope.row.amount }}
                                        </span>
                                    </template>
                                </el-table-column>
                                <el-table-column prop="description" label="ËØ¥Êòé" min-width="200"></el-table-column>
                                <el-table-column label="Áî≥ËØ∑Êó∂Èó¥" width="180">
                                    <template #default="scope">
                                        {{ formatDateTime(scope.row.createTime) }}
                                    </template>
                                </el-table-column>
                                <el-table-column label="Áä∂ÊÄÅ" width="100">
                                    <template #default="scope">
                                        <el-tag type="warning">ÂæÖÂÆ°Ê†∏</el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column label="Êìç‰Ωú" width="200" fixed="right">
                                    <template #default="scope">
                                        <el-button 
                                            type="success" 
                                            size="small" 
                                            @click="approveDeposit(scope.row)">
                                            ÈÄöËøá
                                        </el-button>
                                        <el-button 
                                            type="danger" 
                                            size="small" 
                                            @click="openRejectDialog(scope.row)">
                                            ÊãíÁªù
                                        </el-button>
                                    </template>
                                </el-table-column>
                            </el-table>

                                    <!-- Á©∫Áä∂ÊÄÅ -->
                                    <div v-if="!depositsLoading && pendingDeposits.length === 0" style="text-align: center; padding: 40px; color: #909399;">
                                        <i class="el-icon-finished" style="font-size: 48px; display: block; margin-bottom: 10px;"></i>
                                        <p>ÊöÇÊó†ÂæÖÂÆ°Ê†∏ÁöÑÁî≥ËØ∑</p>
                                    </div>
                                </el-tab-pane>

                                <!-- Â∑≤ÂÆ°Ê†∏Ê†áÁ≠æÈ°µ -->
                                <el-tab-pane label="Â∑≤ÂÆ°Ê†∏" name="audited">
                                    <!-- Á≠õÈÄâ -->
                                    <div style="margin-bottom: 20px;">
                                        <el-radio-group v-model="auditedTypeFilter" @change="loadAuditedDeposits">
                                            <el-radio-button :label="null">ÂÖ®ÈÉ®</el-radio-button>
                                            <el-radio-button :label="1">ÂÖÖÂÄº</el-radio-button>
                                            <el-radio-button :label="6">ÊèêÁé∞</el-radio-button>
                                        </el-radio-group>
                                        
                                        <el-radio-group v-model="auditedStatusFilter" @change="loadAuditedDeposits" style="margin-left: 15px;">
                                            <el-radio-button :label="null">ÂÖ®ÈÉ®Áä∂ÊÄÅ</el-radio-button>
                                            <el-radio-button :label="1">ÂÆ°Ê†∏ÈÄöËøá</el-radio-button>
                                            <el-radio-button :label="2">Â∑≤ÊãíÁªù</el-radio-button>
                                        </el-radio-group>
                                        
                                        <el-tag v-if="auditedDeposits.length > 0" type="info" style="margin-left: 15px;">
                                            ËÆ∞ÂΩï: {{ auditedDeposits.length }} Êù°
                                        </el-tag>
                                    </div>

                                    <!-- Â∑≤ÂÆ°Ê†∏ÂàóË°® -->
                                    <el-table 
                                        :data="auditedDeposits" 
                                        v-loading="auditedDepositsLoading"
                                        stripe
                                        border>
                                        <el-table-column prop="transactionNo" label="ÊµÅÊ∞¥Âè∑" width="200"></el-table-column>
                                        <el-table-column label="Á±ªÂûã" width="100">
                                            <template #default="scope">
                                                <el-tag :type="scope.row.transactionType === 1 ? 'success' : 'warning'">
                                                    {{ scope.row.transactionType === 1 ? 'ÂÖÖÂÄº' : 'ÊèêÁé∞' }}
                                                </el-tag>
                                            </template>
                                        </el-table-column>
                                        <el-table-column label="Áî®Êà∑ID" prop="userId" width="100"></el-table-column>
                                        <el-table-column label="ÈáëÈ¢ù" width="120">
                                            <template #default="scope">
                                                <span style="color: #F56C6C; font-weight: bold;">
                                                    ¬•{{ Number(scope.row.amount || 0).toFixed(2) }}
                                                </span>
                                            </template>
                                        </el-table-column>
                                        <el-table-column prop="description" label="ËØ¥Êòé" min-width="150" show-overflow-tooltip></el-table-column>
                                        <el-table-column label="Áî≥ËØ∑Êó∂Èó¥" width="160">
                                            <template #default="scope">
                                                {{ formatDateTime(scope.row.createTime) }}
                                            </template>
                                        </el-table-column>
                                        <el-table-column label="ÂÆ°Ê†∏Áä∂ÊÄÅ" width="100">
                                            <template #default="scope">
                                                <el-tag :type="scope.row.status === 1 ? 'success' : 'danger'">
                                                    {{ scope.row.status === 1 ? 'Â∑≤ÈÄöËøá' : 'Â∑≤ÊãíÁªù' }}
                                                </el-tag>
                                            </template>
                                        </el-table-column>
                                        <el-table-column label="ÂÆ°Ê†∏‰∫∫ID" prop="reviewerId" width="100"></el-table-column>
                                        <el-table-column label="ÂÆ°Ê†∏Êó∂Èó¥" width="160">
                                            <template #default="scope">
                                                {{ formatDateTime(scope.row.reviewTime) }}
                                            </template>
                                        </el-table-column>
                                        <el-table-column label="ÂÆ°Ê†∏Â§áÊ≥®" min-width="150" show-overflow-tooltip>
                                            <template #default="scope">
                                                {{ scope.row.reviewRemark || '-' }}
                                            </template>
                                        </el-table-column>
                                    </el-table>

                                    <!-- Á©∫Áä∂ÊÄÅ -->
                                    <div v-if="!auditedDepositsLoading && auditedDeposits.length === 0" style="text-align: center; padding: 40px; color: #909399;">
                                        <i class="el-icon-document" style="font-size: 48px; display: block; margin-bottom: 10px;"></i>
                                        <p>ÊöÇÊó†ÂÆ°Ê†∏ËÆ∞ÂΩï</p>
                                    </div>
                                </el-tab-pane>
                            </el-tabs>
                        </el-card>

                        <!-- ÊãíÁªùÂéüÂõ†ÂØπËØùÊ°Ü -->
                        <el-dialog v-model="showRejectDialog" title="ÊãíÁªùÁî≥ËØ∑" width="500px">
                            <el-form label-width="80px">
                                <el-form-item label="ÊãíÁªùÂéüÂõ†" required>
                                    <el-input 
                                        v-model="rejectRemark" 
                                        type="textarea" 
                                        :rows="4"
                                        placeholder="ËØ∑ËæìÂÖ•ÊãíÁªùÂéüÂõ†">
                                    </el-input>
                                </el-form-item>
                            </el-form>
                            <template #footer>
                                <el-button @click="showRejectDialog = false">ÂèñÊ∂à</el-button>
                                <el-button type="danger" @click="confirmReject" :loading="rejecting">Á°ÆÂÆöÊãíÁªù</el-button>
                            </template>
                        </el-dialog>
                    </div>

                    <!-- ‰øùËØÅÈáëË¥¶Êà∑ÂàóË°® -->
                    <div v-else-if="activeMenu === 'deposit-accounts'" class="deposit-accounts-page">
                        <div class="page-header">
                            <h1>‰øùËØÅÈáëË¥¶Êà∑ÁÆ°ÁêÜÔºàÈ£éÊéßÔºâ</h1>
                            <div>
                                <el-button @click="loadDepositAccounts" icon="el-icon-refresh">Âà∑Êñ∞</el-button>
                            </div>
                        </div>

                        <el-card>
                            <!-- Á≠õÈÄâÂô® -->
                            <div style="margin-bottom: 20px;">
                                <el-radio-group v-model="accountStatusFilter" @change="loadDepositAccounts">
                                    <el-radio-button :label="null">ÂÖ®ÈÉ®Ë¥¶Êà∑</el-radio-button>
                                    <el-radio-button :label="1">Ê≠£Â∏∏Ë¥¶Êà∑</el-radio-button>
                                    <el-radio-button :label="2" style="--el-button-text-color: #F56C6C; --el-button-active-text-color: #FFF;">
                                        üö´ ÈªëÂêçÂçï
                                    </el-radio-button>
                                </el-radio-group>
                            </div>
                            
                            <!-- ÁªüËÆ°‰ø°ÊÅØ -->
                            <el-row :gutter="20" style="margin-bottom: 20px;">
                                <el-col :span="6">
                                    <el-statistic title="Ë¥¶Êà∑ÊÄªÊï∞" :value="depositStats.totalAccounts"></el-statistic>
                                </el-col>
                                <el-col :span="6">
                                    <el-statistic title="ÊÄª‰øùËØÅÈáëÔºàÂÖÉÔºâ" :value="depositStats.totalAmount" :precision="2"></el-statistic>
                                </el-col>
                                <el-col :span="6">
                                    <el-statistic title="ÂèØÁî®‰øùËØÅÈáëÔºàÂÖÉÔºâ" :value="depositStats.availableAmount" :precision="2"></el-statistic>
                                </el-col>
                                <el-col :span="6">
                                    <el-statistic title="ÂÜªÁªì‰øùËØÅÈáëÔºàÂÖÉÔºâ" :value="depositStats.frozenAmount" :precision="2"></el-statistic>
                                </el-col>
                            </el-row>

                            <!-- ‰øùËØÅÈáëË¥¶Êà∑ÂàóË°® -->
                            <el-table 
                                :data="depositAccounts" 
                                v-loading="depositAccountsLoading"
                                stripe
                                border>
                                <el-table-column prop="id" label="Ë¥¶Êà∑ID" width="100"></el-table-column>
                                <el-table-column prop="userId" label="Áî®Êà∑ID" width="100"></el-table-column>
                                <el-table-column label="ÊÄª‰øùËØÅÈáë" width="150">
                                    <template #default="scope">
                                        <span style="font-weight: bold;">
                                            ¬•{{ Number(scope.row.totalAmount || 0).toFixed(2) }}
                                        </span>
                                    </template>
                                </el-table-column>
                                <el-table-column label="ÂèØÁî®‰øùËØÅÈáë" width="150">
                                    <template #default="scope">
                                        <span style="color: #67C23A; font-weight: bold;">
                                            ¬•{{ Number(scope.row.availableAmount || 0).toFixed(2) }}
                                        </span>
                                    </template>
                                </el-table-column>
                                <el-table-column label="ÂÜªÁªì‰øùËØÅÈáë" width="150">
                                    <template #default="scope">
                                        <span style="color: #E6A23C; font-weight: bold;">
                                            ¬•{{ Number(scope.row.frozenAmount || 0).toFixed(2) }}
                                        </span>
                                    </template>
                                </el-table-column>
                                <el-table-column label="Â∑≤ÈÄÄ‰øùËØÅÈáë" width="150">
                                    <template #default="scope">
                                        <span style="color: #909399;">
                                            ¬•{{ Number(scope.row.refundedAmount || 0).toFixed(2) }}
                                        </span>
                                    </template>
                                </el-table-column>
                                <el-table-column label="Áä∂ÊÄÅ" width="100">
                                    <template #default="scope">
                                        <el-tag :type="scope.row.status === 1 ? 'success' : 'danger'">
                                            {{ scope.row.status === 1 ? 'Ê≠£Â∏∏' : 'ÂÜªÁªì' }}
                                        </el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column label="ÂàõÂª∫Êó∂Èó¥" width="180">
                                    <template #default="scope">
                                        {{ formatDateTime(scope.row.createTime) }}
                                    </template>
                                </el-table-column>
                                <el-table-column label="Êìç‰Ωú" width="280" fixed="right">
                                    <template #default="scope">
                                        <el-button size="small" type="primary" @click="viewUserTransactions(scope.row)">
                                            Êü•ÁúãËÆ∞ÂΩï
                                        </el-button>
                                        <el-button 
                                            v-if="scope.row.status === 1"
                                            size="small" 
                                            type="warning" 
                                            @click="freezeAccount(scope.row)">
                                            ÂÜªÁªìË¥¶Êà∑
                                        </el-button>
                                        <el-button 
                                            v-if="scope.row.status === 2"
                                            size="small" 
                                            type="success" 
                                            @click="unfreezeAccount(scope.row)">
                                            Ëß£ÂÜªË¥¶Êà∑
                                        </el-button>
                                    </template>
                                </el-table-column>
                            </el-table>
                        </el-card>

                        <!-- Áî®Êà∑‰∫§ÊòìËÆ∞ÂΩïÂØπËØùÊ°Ü -->
                        <el-dialog 
                            v-model="showUserTransactionsDialog" 
                            :title="`Áî®Êà∑${currentAccountUserId}ÁöÑ‰∫§ÊòìËÆ∞ÂΩï`"
                            width="80%">
                            <el-table 
                                :data="userTransactions" 
                                v-loading="userTransactionsLoading"
                                max-height="500">
                                <el-table-column prop="transactionNo" label="ÊµÅÊ∞¥Âè∑" width="220"></el-table-column>
                                <el-table-column label="‰∫§ÊòìÁ±ªÂûã" width="100">
                                    <template #default="scope">
                                        <el-tag :type="getTransactionTypeTag(scope.row.transactionType)">
                                            {{ getTransactionTypeName(scope.row.transactionType) }}
                                        </el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column label="‰∫§ÊòìÈáëÈ¢ù" width="150">
                                    <template #default="scope">
                                        <span :style="{color: scope.row.transactionType === 1 || scope.row.transactionType === 3 || scope.row.transactionType === 5 ? '#67C23A' : '#F56C6C', fontWeight: 'bold'}">
                                            {{ scope.row.transactionType === 1 || scope.row.transactionType === 3 || scope.row.transactionType === 5 ? '+' : '-' }}¬•{{ Number(scope.row.amount || 0).toFixed(2) }}
                                        </span>
                                    </template>
                                </el-table-column>
                                <el-table-column label="‰∫§ÊòìÂâç‰ΩôÈ¢ù" width="130">
                                    <template #default="scope">
                                        ¬•{{ Number(scope.row.balanceBefore || 0).toFixed(2) }}
                                    </template>
                                </el-table-column>
                                <el-table-column label="‰∫§ÊòìÂêé‰ΩôÈ¢ù" width="130">
                                    <template #default="scope">
                                        ¬•{{ Number(scope.row.balanceAfter || 0).toFixed(2) }}
                                    </template>
                                </el-table-column>
                                <el-table-column prop="description" label="ËØ¥Êòé" min-width="200" show-overflow-tooltip></el-table-column>
                                <el-table-column label="Áä∂ÊÄÅ" width="100">
                                    <template #default="scope">
                                        <el-tag :type="scope.row.status === 1 ? 'success' : scope.row.status === 0 ? 'warning' : 'danger'">
                                            {{ scope.row.status === 1 ? 'ÊàêÂäü' : scope.row.status === 0 ? 'ÂæÖÂÆ°Ê†∏' : 'Â§±Ë¥•' }}
                                        </el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column label="‰∫§ÊòìÊó∂Èó¥" width="180">
                                    <template #default="scope">
                                        {{ formatDateTime(scope.row.createTime) }}
                                    </template>
                                </el-table-column>
                            </el-table>
                        </el-dialog>
                    </div>

                    <!-- ËÆ¢ÂçïÂèëË¥ßÁÆ°ÁêÜ -->
                    <div v-else-if="activeMenu === 'orders-ship'" class="orders-ship-page">
                        <div class="page-header">
                            <h1>ËÆ¢ÂçïÂèëË¥ßÁÆ°ÁêÜ</h1>
                            <el-button @click="loadPendingShipOrders" icon="el-icon-refresh">Âà∑Êñ∞</el-button>
                        </div>

                        <el-card>
                            <el-tag v-if="pendingShipOrders.length > 0" type="warning" style="margin-bottom: 20px;">
                                ÂæÖÂèëË¥ßËÆ¢Âçï: {{ pendingShipOrders.length }} ‰∏™
                            </el-tag>

                            <!-- ÂæÖÂèëË¥ßËÆ¢ÂçïÂàóË°® -->
                            <el-table 
                                :data="pendingShipOrders" 
                                v-loading="ordersShipLoading"
                                stripe
                                border>
                                <el-table-column prop="orderNo" label="ËÆ¢ÂçïÂè∑" width="220"></el-table-column>
                                <el-table-column label="ÊãçÂìÅID" prop="itemId" width="100"></el-table-column>
                                <el-table-column label="‰π∞ÂÆ∂ID" prop="buyerId" width="100"></el-table-column>
                                <el-table-column label="ËÆ¢ÂçïÈáëÈ¢ù" width="120">
                                    <template #default="scope">
                                        <span style="color: #F56C6C; font-weight: bold;">
                                            ¬•{{ scope.row.totalAmount }}
                                        </span>
                                    </template>
                                </el-table-column>
                                <el-table-column label="‰øùËØÅÈáë" width="100">
                                    <template #default="scope">
                                        ¬•{{ scope.row.depositAmount }}
                                    </template>
                                </el-table-column>
                                <el-table-column label="Â∞æÊ¨æ" width="100">
                                    <template #default="scope">
                                        ¬•{{ scope.row.balanceAmount }}
                                    </template>
                                </el-table-column>
                                <el-table-column label="ÊîØ‰ªòÊó∂Èó¥" width="180">
                                    <template #default="scope">
                                        {{ formatDateTime(scope.row.paymentTime) }}
                                    </template>
                                </el-table-column>
                                <el-table-column label="Áä∂ÊÄÅ" width="100">
                                    <template #default="scope">
                                        <el-tag type="warning">ÂæÖÂèëË¥ß</el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column label="Êìç‰Ωú" width="220" fixed="right">
                                    <template #default="scope">
                                        <el-button 
                                            type="success" 
                                            size="small" 
                                            @click="openShipDialog(scope.row)">
                                            ÂèëË¥ß
                                        </el-button>
                                        <el-button 
                                            type="danger" 
                                            size="small" 
                                            @click="openRejectShipDialog(scope.row)">
                                            ÊãíÁªùÂèëË¥ß
                                        </el-button>
                                    </template>
                                </el-table-column>
                            </el-table>

                            <!-- Á©∫Áä∂ÊÄÅ -->
                            <div v-if="!ordersShipLoading && pendingShipOrders.length === 0" style="text-align: center; padding: 40px; color: #909399;">
                                <i class="el-icon-finished" style="font-size: 48px; display: block; margin-bottom: 10px;"></i>
                                <p>ÊöÇÊó†ÂæÖÂèëË¥ßËÆ¢Âçï</p>
                            </div>
                        </el-card>

                        <!-- ÂèëË¥ßÂØπËØùÊ°Ü -->
                        <el-dialog v-model="showShipDialog" title="ËÆ¢ÂçïÂèëË¥ß" width="600px">
                            <el-form :model="shipForm" label-width="100px">
                                <el-form-item label="ËÆ¢ÂçïÂè∑">
                                    <el-input v-model="currentShipOrder.orderNo" disabled></el-input>
                                </el-form-item>
                                <el-form-item label="Áâ©ÊµÅÂÖ¨Âè∏" required>
                                    <el-select v-model="shipForm.logisticsCompany" placeholder="ËØ∑ÈÄâÊã©Áâ©ÊµÅÂÖ¨Âè∏" style="width: 100%;">
                                        <el-option label="È°∫‰∏∞ÈÄüËøê" value="SF"></el-option>
                                        <el-option label="‰∏≠ÈÄöÂø´ÈÄí" value="ZTO"></el-option>
                                        <el-option label="ÂúÜÈÄöÈÄüÈÄí" value="YTO"></el-option>
                                        <el-option label="Áî≥ÈÄöÂø´ÈÄí" value="STO"></el-option>
                                        <el-option label="ÈüµËææÂø´ÈÄí" value="YD"></el-option>
                                        <el-option label="EMS" value="EMS"></el-option>
                                        <el-option label="Âæ∑ÈÇ¶Áâ©ÊµÅ" value="DBL"></el-option>
                                    </el-select>
                                </el-form-item>
                                <el-form-item label="ËøêÂçïÂè∑" required>
                                    <el-input v-model="shipForm.trackingNumber" placeholder="ËØ∑ËæìÂÖ•ËøêÂçïÂè∑"></el-input>
                                </el-form-item>
                                <el-form-item label="Â§áÊ≥®">
                                    <el-input v-model="shipForm.remark" type="textarea" :rows="3" placeholder="Áâ©ÊµÅÂ§áÊ≥®‰ø°ÊÅØ"></el-input>
                                </el-form-item>
                            </el-form>
                            <template #footer>
                                <el-button @click="showShipDialog = false">ÂèñÊ∂à</el-button>
                                <el-button type="primary" @click="confirmShip" :loading="shipping">Á°ÆËÆ§ÂèëË¥ß</el-button>
                            </template>
                        </el-dialog>

                        <!-- ÊãíÁªùÂèëË¥ßÂØπËØùÊ°Ü -->
                        <el-dialog v-model="showRejectShipDialog" title="ÊãíÁªùÂèëË¥ß" width="500px">
                            <el-alert 
                                title="ÊãíÁªùÂèëË¥ßÂ∞ÜÂÖ®È¢ùÈÄÄÊ¨æÁªô‰π∞ÂÆ∂" 
                                type="warning" 
                                :closable="false"
                                style="margin-bottom: 20px;">
                            </el-alert>
                            <el-form label-width="100px">
                                <el-form-item label="ËÆ¢ÂçïÂè∑">
                                    <el-input v-model="currentRejectShipOrder.orderNo" disabled></el-input>
                                </el-form-item>
                                <el-form-item label="ÈÄÄÊ¨æÈáëÈ¢ù">
                                    <el-input v-model="currentRejectShipOrder.totalAmount" disabled>
                                        <template #prepend>¬•</template>
                                    </el-input>
                                </el-form-item>
                                <el-form-item label="ÊãíÁªùÂéüÂõ†" required>
                                    <el-select v-model="rejectShipReason" placeholder="ËØ∑ÈÄâÊã©ÊãíÁªùÂéüÂõ†" style="width: 100%;">
                                        <el-option label="ÊãçÂìÅ‰∏¢Â§±" value="ÊãçÂìÅ‰∏¢Â§±"></el-option>
                                        <el-option label="ÊãçÂìÅÊçüÂùè" value="ÊãçÂìÅÊçüÂùè"></el-option>
                                        <el-option label="ÂçñÂÆ∂‰∏çÊÑøÊÑèÂá∫ÂîÆ" value="ÂçñÂÆ∂‰∏çÊÑøÊÑèÂá∫ÂîÆ"></el-option>
                                        <el-option label="ËÅîÁ≥ª‰∏ç‰∏äÂçñÂÆ∂" value="ËÅîÁ≥ª‰∏ç‰∏äÂçñÂÆ∂"></el-option>
                                        <el-option label="ÂÖ∂‰ªñÂéüÂõ†" value="ÂÖ∂‰ªñÂéüÂõ†"></el-option>
                                    </el-select>
                                </el-form-item>
                                <el-form-item label="ËØ¶ÁªÜËØ¥Êòé">
                                    <el-input 
                                        v-model="rejectShipDetail" 
                                        type="textarea" 
                                        :rows="4"
                                        placeholder="ËØ∑ËæìÂÖ•ËØ¶ÁªÜËØ¥Êòé">
                                    </el-input>
                                </el-form-item>
                            </el-form>
                            <template #footer>
                                <el-button @click="showRejectShipDialog = false">ÂèñÊ∂à</el-button>
                                <el-button type="danger" @click="confirmRejectShip" :loading="rejectingShip">Á°ÆËÆ§ÊãíÁªùÂπ∂ÈÄÄÊ¨æ</el-button>
                            </template>
                        </el-dialog>
                    </div>

                    <!-- ÂÆ°ËÆ°Êó•ÂøóÁÆ°ÁêÜ -->
                    <div v-else-if="activeMenu === 'audit-logs'" class="audit-logs-page">
                        <div class="page-header">
                            <h1>ÂÆ°ËÆ°Êó•Âøó</h1>
                            <el-button @click="loadAuditLogs" icon="el-icon-refresh">Âà∑Êñ∞</el-button>
                        </div>

                        <el-card>
                            <!-- Á≠õÈÄâÊù°‰ª∂ -->
                            <el-form :inline="true" style="margin-bottom: 20px;">
                                <el-form-item label="Áî®Êà∑ID">
                                    <el-input v-model="auditLogFilter.userId" placeholder="Áî®Êà∑ID" clearable style="width: 150px;"></el-input>
                                </el-form-item>
                                <el-form-item label="Êìç‰ΩúÁ±ªÂûã">
                                    <el-select v-model="auditLogFilter.operationType" placeholder="ÂÖ®ÈÉ®" clearable style="width: 150px;">
                                        <el-option label="ÂÆ°Ê†∏ÈÄöËøá" value="APPROVE"></el-option>
                                        <el-option label="ÂÆ°Ê†∏ÊãíÁªù" value="REJECT"></el-option>
                                        <el-option label="Âà†Èô§" value="DELETE"></el-option>
                                        <el-option label="ÁôªÂΩï" value="LOGIN"></el-option>
                                        <el-option label="ÁôªÂá∫" value="LOGOUT"></el-option>
                                    </el-select>
                                </el-form-item>
                                <el-form-item label="Ê®°Âùó">
                                    <el-select v-model="auditLogFilter.module" placeholder="ÂÖ®ÈÉ®" clearable style="width: 150px;">
                                        <el-option label="‰øùËØÅÈáë" value="DEPOSIT"></el-option>
                                        <el-option label="ËÆ¢Âçï" value="ORDER"></el-option>
                                        <el-option label="ÊãçÂìÅ" value="ITEM"></el-option>
                                        <el-option label="ÊãçÂçñ‰ºö" value="SESSION"></el-option>
                                    </el-select>
                                </el-form-item>
                                <el-form-item label="Áä∂ÊÄÅ">
                                    <el-select v-model="auditLogFilter.success" placeholder="ÂÖ®ÈÉ®" clearable style="width: 120px;">
                                        <el-option label="ÊàêÂäü" :value="1"></el-option>
                                        <el-option label="Â§±Ë¥•" :value="0"></el-option>
                                    </el-select>
                                </el-form-item>
                                <el-form-item>
                                    <el-button type="primary" @click="loadAuditLogs" icon="el-icon-search">Êü•ËØ¢</el-button>
                                    <el-button @click="resetAuditLogFilter">ÈáçÁΩÆ</el-button>
                                </el-form-item>
                            </el-form>

                            <!-- Êó•ÂøóÂàóË°® -->
                            <el-table 
                                :data="auditLogs" 
                                v-loading="auditLogsLoading"
                                stripe
                                border
                                style="width: 100%;">
                                <el-table-column prop="id" label="ID" width="80"></el-table-column>
                                <el-table-column label="Êìç‰ΩúÁî®Êà∑" width="120">
                                    <template #default="scope">
                                        {{ scope.row.username }}
                                        <br>
                                        <span style="font-size: 12px; color: #909399;">ID:{{ scope.row.userId }}</span>
                                    </template>
                                </el-table-column>
                                <el-table-column label="Êìç‰ΩúÁ±ªÂûã" width="100">
                                    <template #default="scope">
                                        <el-tag :type="getOperationTypeTag(scope.row.operationType)" size="small">
                                            {{ getOperationTypeText(scope.row.operationType) }}
                                        </el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column label="Ê®°Âùó" width="100">
                                    <template #default="scope">
                                        <el-tag size="small">{{ getModuleText(scope.row.module) }}</el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column prop="operationDesc" label="Êìç‰ΩúÊèèËø∞" min-width="200"></el-table-column>
                                <el-table-column label="IPÂú∞ÂùÄ" width="140">
                                    <template #default="scope">
                                        {{ scope.row.ipAddress || '-' }}
                                    </template>
                                </el-table-column>
                                <el-table-column label="Áä∂ÊÄÅ" width="80">
                                    <template #default="scope">
                                        <el-tag :type="scope.row.success === 1 ? 'success' : 'danger'" size="small">
                                            {{ scope.row.success === 1 ? 'ÊàêÂäü' : 'Â§±Ë¥•' }}
                                        </el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column label="ËÄóÊó∂" width="80">
                                    <template #default="scope">
                                        {{ scope.row.duration }}ms
                                    </template>
                                </el-table-column>
                                <el-table-column label="Êìç‰ΩúÊó∂Èó¥" width="180">
                                    <template #default="scope">
                                        {{ formatDateTime(scope.row.createTime) }}
                                    </template>
                                </el-table-column>
                                <el-table-column label="Êìç‰Ωú" width="100" fixed="right">
                                    <template #default="scope">
                                        <el-button type="text" size="small" @click="showLogDetail(scope.row)">ËØ¶ÊÉÖ</el-button>
                                    </template>
                                </el-table-column>
                            </el-table>

                            <!-- ÂàÜÈ°µ -->
                            <div class="pagination-container" v-if="auditLogTotal > 0" style="margin-top: 20px; text-align: right;">
                                <el-pagination
                                    v-model:current-page="auditLogPageNum"
                                    v-model:page-size="auditLogPageSize"
                                    :page-sizes="[20, 50, 100, 200]"
                                    :total="auditLogTotal"
                                    layout="total, sizes, prev, pager, next, jumper"
                                    @size-change="loadAuditLogs"
                                    @current-change="loadAuditLogs">
                                </el-pagination>
                            </div>

                            <!-- Á©∫Áä∂ÊÄÅ -->
                            <div v-if="!auditLogsLoading && auditLogs.length === 0" style="text-align: center; padding: 40px; color: #909399;">
                                <i class="el-icon-document" style="font-size: 48px; display: block; margin-bottom: 10px;"></i>
                                <p>ÊöÇÊó†ÂÆ°ËÆ°Êó•Âøó</p>
                            </div>
                        </el-card>

                        <!-- Êó•ÂøóËØ¶ÊÉÖÂØπËØùÊ°Ü -->
                        <el-dialog v-model="showLogDetailDialog" title="Êó•ÂøóËØ¶ÊÉÖ" width="700px">
                            <el-descriptions :column="2" border v-if="currentLog">
                                <el-descriptions-item label="Êó•ÂøóID">{{ currentLog.id }}</el-descriptions-item>
                                <el-descriptions-item label="Êìç‰ΩúÁî®Êà∑">{{ currentLog.username }} (ID: {{ currentLog.userId }})</el-descriptions-item>
                                <el-descriptions-item label="Êìç‰ΩúÁ±ªÂûã">{{ getOperationTypeText(currentLog.operationType) }}</el-descriptions-item>
                                <el-descriptions-item label="Ê®°Âùó">{{ getModuleText(currentLog.module) }}</el-descriptions-item>
                                <el-descriptions-item label="Êìç‰ΩúÊèèËø∞" :span="2">{{ currentLog.operationDesc }}</el-descriptions-item>
                                <el-descriptions-item label="ÁõÆÊ†áID">{{ currentLog.targetId || '-' }}</el-descriptions-item>
                                <el-descriptions-item label="ÁõÆÊ†áÁ±ªÂûã">{{ currentLog.targetType || '-' }}</el-descriptions-item>
                                <el-descriptions-item label="ËØ∑Ê±ÇÊñπÊ≥ï">{{ currentLog.requestMethod || '-' }}</el-descriptions-item>
                                <el-descriptions-item label="ËØ∑Ê±ÇURL">{{ currentLog.requestUrl || '-' }}</el-descriptions-item>
                                <el-descriptions-item label="IPÂú∞ÂùÄ">{{ currentLog.ipAddress || '-' }}</el-descriptions-item>
                                <el-descriptions-item label="Áä∂ÊÄÅ">
                                    <el-tag :type="currentLog.success === 1 ? 'success' : 'danger'">
                                        {{ currentLog.success === 1 ? 'ÊàêÂäü' : 'Â§±Ë¥•' }}
                                    </el-tag>
                                </el-descriptions-item>
                                <el-descriptions-item label="ÊâßË°åÊó∂Èïø">{{ currentLog.duration }}ms</el-descriptions-item>
                                <el-descriptions-item label="Êìç‰ΩúÊó∂Èó¥">{{ formatDateTime(currentLog.createTime) }}</el-descriptions-item>
                                <el-descriptions-item label="ËØ∑Ê±ÇÂèÇÊï∞" :span="2">
                                    <pre style="max-height: 200px; overflow: auto; background: #f5f5f5; padding: 10px; border-radius: 4px;">{{ currentLog.requestParams || '-' }}</pre>
                                </el-descriptions-item>
                                <el-descriptions-item label="ÈîôËØØ‰ø°ÊÅØ" :span="2" v-if="currentLog.errorMsg">
                                    <div style="color: #f56c6c;">{{ currentLog.errorMsg }}</div>
                                </el-descriptions-item>
                                <el-descriptions-item label="User-Agent" :span="2">
                                    <div style="font-size: 12px; color: #909399;">{{ currentLog.userAgent || '-' }}</div>
                                </el-descriptions-item>
                            </el-descriptions>
                        </el-dialog>
                    </div>

                    <!-- ÂèÇÊãçÈ°ªÁü•ÁÆ°ÁêÜ -->
                    <div v-else-if="activeMenu === 'notices'" class="notices-page">
                        <div class="page-header">
                            <h1>ÂèÇÊãçÈ°ªÁü•</h1>
                            <el-button type="primary" @click="openCreateCategory">Êñ∞Â¢ûÂàÜÁ±ª</el-button>
                            <el-button @click="loadNoticeCategories" style="margin-left:8px;">Âà∑Êñ∞</el-button>
                        </div>
                        <el-row :gutter="20">
                            <el-col :span="8">
                                <el-card>
                                    <h3 style="margin:0 0 10px 0;">ÂàÜÁ±ª</h3>
                                    <el-table :data="noticeCategories" height="400" @row-click="onCategorySelect">
                                        <el-table-column prop="name" label="ÂêçÁß∞"></el-table-column>
                                        <el-table-column prop="enabled" label="ÂêØÁî®" width="80">
                                            <template #default="scope">
                                                <el-tag :type="scope.row.enabled ? 'success' : 'info'">{{ scope.row.enabled? 'ÊòØ' : 'Âê¶' }}</el-tag>
                                            </template>
                                        </el-table-column>
                                        <el-table-column label="Êìç‰Ωú" width="160">
                                            <template #default="scope">
                                                <el-button type="text" @click.stop="openEditCategory(scope.row)">ÁºñËæë</el-button>
                                                <el-button type="text" @click.stop="deleteCategory(scope.row)" style="color:#F56C6C;">Âà†Èô§</el-button>
                                            </template>
                                        </el-table-column>
                                    </el-table>
                                </el-card>
                            </el-col>
                            <el-col :span="16">
                                <el-card>
                                    <div style="display:flex; justify-content:space-between; align-items:center; gap:10px;">
                                        <h3 style="margin:0;">{{ currentCategory?.name || 'ËØ∑ÈÄâÊã©Â∑¶‰æßÂàÜÁ±ª' }}</h3>
                                        <div>
                                            <el-button :disabled="!currentCategory" @click="triggerInsertImage('current')">ÊèíÂÖ•ÂõæÁâá(Base64)</el-button>
                                            <el-button type="primary" :disabled="!currentCategory" @click="saveCategoryContent">‰øùÂ≠òÂÜÖÂÆπ</el-button>
                                        </div>
                                    </div>
                                    <el-empty v-if="!currentCategory" description="ËØ∑ÈÄâÊã©‰∏Ä‰∏™ÂàÜÁ±ªËøõË°åÁºñËæë"></el-empty>
                                    <div v-else>
                                        <el-row :gutter="12">
                                            <el-col :span="12">
                                                <el-input v-model="currentCategory.contentHtml" type="textarea" :rows="16" placeholder="Âú®Ê≠§Á≤òË¥¥ÊñáÂ≠ó/ÂõæÁâáHTMLÔºåÊàñËæìÂÖ•ËØ¥Êòé..."></el-input>
                                            </el-col>
                                            <el-col :span="12">
                                                <div style="border:1px solid #ebeef5; border-radius:6px; padding:10px; height:100%; overflow:auto; background:#fafafa;">
                                                    <div style="font-weight:600; color:#606266; margin-bottom:6px;">È¢ÑËßà</div>
                                                    <div v-html="currentCategory.contentHtml"></div>
                                                </div>
                                            </el-col>
                                        </el-row>
                                    </div>
                                </el-card>
                            </el-col>
                        </el-row>

                        <!-- ÂàÜÁ±ªÂØπËØùÊ°ÜÔºàÊîæÂú®appÂÜÖÈÉ®ÔºåÁ°Æ‰øùÁîüÊïàÔºâ -->
                        <el-dialog v-model="categoryDialogVisible" title="ÂàÜÁ±ª" width="520px">
                            <el-form :model="categoryForm" label-width="90px">
                                <el-form-item label="ÂêçÁß∞"><el-input v-model="categoryForm.name"></el-input></el-form-item>
                                <el-form-item label="ÊéíÂ∫è"><el-input-number v-model="categoryForm.sortOrder" :min="0"></el-input-number></el-form-item>
                                <el-form-item label="ÂêØÁî®"><el-switch v-model="categoryForm.enabled"></el-switch></el-form-item>
                                <el-form-item label="ÂÜÖÂÆπ">
                                    <div style="display:flex; gap:10px; margin-bottom:8px;">
                                        <el-button @click="triggerInsertImage('dialog')">ÊèíÂÖ•ÂõæÁâá(Base64)</el-button>
                                    </div>
                                    <el-input v-model="categoryForm.contentHtml" type="textarea" :rows="8" placeholder="ÂàÜÁ±ªÂØåÊñáÊú¨ÔºàÂèØÂåÖÂê´<img>Ôºâ"></el-input>
                                </el-form-item>
                            </el-form>
                            <template #footer>
                                <el-button @click="categoryDialogVisible=false">ÂèñÊ∂à</el-button>
                                <el-button type="primary" @click="saveCategory">‰øùÂ≠ò</el-button>
                            </template>
                        </el-dialog>
                        <input type="file" accept="image/*" ref="noticeImageInput" style="display:none" @change="handleInsertImageChange" />

                        <!-- Êù°ÁõÆÂØπËØùÊ°Ü -->
                        <el-dialog v-model="itemDialogVisible" title="Êù°ÁõÆ" width="720px">
                            <el-form :model="itemForm" label-width="90px">
                                <el-form-item label="Ê†áÈ¢ò"><el-input v-model="itemForm.title"></el-input></el-form-item>
                                <el-form-item label="ÊéíÂ∫è"><el-input-number v-model="itemForm.sortOrder" :min="0"></el-input-number></el-form-item>
                                <el-form-item label="ÂêØÁî®"><el-switch v-model="itemForm.enabled"></el-switch></el-form-item>
                                <el-form-item label="ÂÜÖÂÆπ"><el-input v-model="itemForm.contentHtml" type="textarea" :rows="10"></el-input></el-form-item>
                            </el-form>
                            <template #footer>
                                <el-button @click="itemDialogVisible=false">ÂèñÊ∂à</el-button>
                                <el-button type="primary" @click="saveItem">‰øùÂ≠ò</el-button>
                            </template>
                        </el-dialog>
                    </div>

                    <!-- ÊãçÂçñ‰ºöÂàóË°®È°µÈù¢ -->
                    <div v-if="activeMenu === 'sessions'" class="sessions-page">
                        <div class="page-header">
                            <h1>ÊãçÂçñ‰ºöÂàóË°®</h1>
                            <el-button type="primary" @click="goToPage('sessions/add')">
                                <i class="el-icon-plus"></i>
                                ÂàõÂª∫ÊãçÂçñ‰ºö
                            </el-button>
                        </div>
                        
                        <!-- ÊêúÁ¥¢Á≠õÈÄâ -->
                        <el-card class="search-card">
                            <el-form :model="sessionSearchForm" inline>
                                <el-form-item label="ÊãçÂçñ‰ºöÂêçÁß∞">
                                    <el-input v-model="sessionSearchForm.sessionName" placeholder="ËØ∑ËæìÂÖ•ÊãçÂçñ‰ºöÂêçÁß∞" clearable></el-input>
                                </el-form-item>
                                <el-form-item label="Áä∂ÊÄÅ">
                                    <el-select v-model="sessionSearchForm.status" placeholder="ËØ∑ÈÄâÊã©Áä∂ÊÄÅ" clearable>
                                        <el-option label="ÂÖ®ÈÉ®" value=""></el-option>
                                        <el-option label="ÂæÖÂºÄÂßã" :value="1"></el-option>
                                        <el-option label="ËøõË°å‰∏≠" :value="2"></el-option>
                                        <el-option label="Â∑≤ÁªìÊùü" :value="3"></el-option>
                                        <el-option label="Â∑≤ÂèñÊ∂à" :value="4"></el-option>
                                    </el-select>
                                </el-form-item>
                                <el-form-item>
                                    <el-button type="primary" @click="searchSessions">ÊêúÁ¥¢</el-button>
                                    <el-button @click="resetSessionSearch">ÈáçÁΩÆ</el-button>
                                </el-form-item>
                            </el-form>
                        </el-card>
                        
                        <!-- ÊãçÂçñ‰ºöË°®Ê†º -->
                        <el-card class="table-card">
                            <el-table :data="sessions" v-loading="sessionsLoading" stripe>
                                <el-table-column prop="id" label="ID" width="80"></el-table-column>
                                <el-table-column label="Â∞ÅÈù¢" width="120">
                                    <template #default="scope">
                                        <el-image 
                                            :src="scope.row.coverImage || '/images/default-session.jpg'" 
                                            :preview-src-list="[scope.row.coverImage || '/images/default-session.jpg']"
                                            preview-teleported="true"
                                            style="width: 80px; height: 60px; object-fit: cover;">
                                        </el-image>
                                    </template>
                                </el-table-column>
                                <el-table-column prop="sessionName" label="ÊãçÂçñ‰ºöÂêçÁß∞" min-width="200"></el-table-column>
                                <el-table-column prop="description" label="ÊèèËø∞" min-width="150" show-overflow-tooltip></el-table-column>
                                <el-table-column prop="startTime" label="ÂºÄÂßãÊó∂Èó¥" width="160">
                                    <template #default="scope">
                                        {{ formatTime(scope.row.startTime) }}
                                    </template>
                                </el-table-column>
                                <el-table-column prop="endTime" label="ÁªìÊùüÊó∂Èó¥" width="160">
                                    <template #default="scope">
                                        {{ formatTime(scope.row.endTime) }}
                                    </template>
                                </el-table-column>
                                <el-table-column prop="status" label="Áä∂ÊÄÅ" width="100">
                                    <template #default="scope">
                                        <el-tag :type="getSessionStatusType(scope.row.status)">
                                            {{ getSessionStatusText(scope.row.status) }}
                                        </el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column prop="totalItems" label="ÊãçÂìÅÊï∞Èáè" width="100"></el-table-column>
                                <el-table-column prop="viewCount" label="ËßÇÁúã‰∫∫Êï∞" width="100"></el-table-column>
                                <el-table-column label="ÂèØËßÅÊÄß" width="120">
                                    <template #default="scope">
                                        <el-tag :type="scope.row.isVisible ? 'success' : 'info'">{{ scope.row.isVisible ? 'Â±ïÁ§∫' : 'ÈöêËóè' }}</el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column label="Êìç‰Ωú" width="280" fixed="right">
                                    <template #default="scope">
                                        <el-button-group>
                                            <el-button type="primary" size="small" @click="editSession(scope.row)">ÁºñËæë</el-button>
                                            <el-button type="danger" size="small" @click="deleteSession(scope.row)">Âà†Èô§</el-button>
                                            <el-button size="small" @click="toggleSessionVisible(scope.row)">{{ scope.row.isVisible ? 'ÈöêËóè' : 'Â±ïÁ§∫' }}</el-button>
                                        </el-button-group>
                                    </template>
                                </el-table-column>
                            </el-table>
                            
                            <!-- ÂàÜÈ°µ -->
                            <div class="pagination-container" v-if="sessionsTotal > 0">
                                <el-pagination
                                    v-model:current-page="sessionsPage"
                                    v-model:page-size="sessionsPageSize"
                                    :page-sizes="[10, 20, 50, 100]"
                                    :total="sessionsTotal"
                                    layout="total, sizes, prev, pager, next, jumper"
                                    @size-change="handleSessionsSizeChange"
                                    @current-change="handleSessionsCurrentChange">
                                </el-pagination>
                            </div>
                        </el-card>
                    </div>
                    
                    <!-- ÂàõÂª∫ÊãçÂçñ‰ºöÈ°µÈù¢ -->
                    <div v-if="activeMenu === 'sessions/add'" class="session-create-page">
                        <div class="page-header">
                            <h1>ÂàõÂª∫ÊãçÂçñ‰ºö</h1>
                            <el-button @click="goToPage('sessions')">
                                <i class="el-icon-arrow-left"></i>
                                ËøîÂõûÊãçÂçñ‰ºöÂàóË°®
                            </el-button>
                        </div>
                        
                        <el-card>
                            <el-form 
                                ref="sessionForm" 
                                :model="sessionForm" 
                                :rules="sessionRules" 
                                label-width="120px"
                                size="large">
                                
                                <!-- Âü∫Êú¨‰ø°ÊÅØ -->
                                <div class="form-section">
                                    <h3 class="section-title">Âü∫Êú¨‰ø°ÊÅØ</h3>
                                    
                                    <el-row :gutter="20">
                                        <el-col :span="12">
                                            <el-form-item label="ÊãçÂçñ‰ºöÂêçÁß∞" prop="sessionName" required>
                                                <el-input 
                                                    v-model="sessionForm.sessionName" 
                                                    placeholder="ËØ∑ËæìÂÖ•ÊãçÂçñ‰ºöÂêçÁß∞"
                                                    clearable>
                                                </el-input>
                                            </el-form-item>
                                        </el-col>
                                        <el-col :span="12">
                                            <el-form-item label="ÊãçÂçñ‰ºöÁ±ªÂûã" prop="sessionType" required>
                                                <el-select 
                                                    v-model="sessionForm.sessionType" 
                                                    placeholder="ËØ∑ÈÄâÊã©ÊãçÂçñ‰ºöÁ±ªÂûã"
                                                    style="width: 100%">
                                                    <el-option label="Ëâ∫ÊúØÂìÅ‰∏ìÂú∫" :value="1"></el-option>
                                                    <el-option label="Áè†ÂÆù‰∏ìÂú∫" :value="2"></el-option>
                                                    <el-option label="Âè§Ëë£‰∏ìÂú∫" :value="3"></el-option>
                                                    <el-option label="ÁªºÂêà‰∏ìÂú∫" :value="4"></el-option>
                                                </el-select>
                                            </el-form-item>
                                        </el-col>
                                    </el-row>
                                    
                                    <el-form-item label="ÊãçÂçñ‰ºöÊèèËø∞" prop="description" required>
                                        <el-input 
                                            v-model="sessionForm.description" 
                                            type="textarea" 
                                            :rows="4"
                                            placeholder="ËØ∑ËæìÂÖ•ÊãçÂçñ‰ºöËØ¶ÁªÜÊèèËø∞">
                                        </el-input>
                                    </el-form-item>

                                    <el-form-item label="‰ºöÂú∫ÂõæÁâá" required>
                                        <div style="display:flex; align-items:center; gap:12px; flex-wrap:wrap;">
                                            <div v-for="(img, idx) in sessionCreateImages" :key="idx" style="position:relative;">
                                                <el-image
                                                    :src="img"
                                                    :preview-src-list="sessionCreateImages"
                                                    :initial-index="idx"
                                                    preview-teleported="true"
                                                    style="width: 160px; height: 120px; object-fit: cover; border:1px solid #ebeef5; border-radius:6px;">
                                                </el-image>
                                                <el-button size="small" type="danger" @click="removeCreateSessionImage(idx)" style="position:absolute; top:6px; right:6px;" circle>
                                                    <i class="el-icon-close"></i>
                                                </el-button>
                                            </div>
                                            <input type="file" ref="createSessionImageInput" accept="image/*" multiple style="display:none" @change="handleCreateSessionImageSelect">
                                            <el-button size="small" type="primary" @click="$refs.createSessionImageInput.click()">Ê∑ªÂä†ÂõæÁâá</el-button>
                                            <div style="color:#909399; font-size:12px;">ÊúÄÂ§ö {{ maxSessionImages }} Âº†</div>
                                        </div>
                                    </el-form-item>
                                </div>

                                <!-- Êó∂Èó¥ËÆæÁΩÆ -->
                                <div class="form-section">
                                    <h3 class="section-title">Êó∂Èó¥ËÆæÁΩÆ</h3>
                                    
                                    <el-row :gutter="20">
                                        <el-col :span="12">
                                            <el-form-item label="ÂºÄÂßãÊó∂Èó¥" prop="startTime" required>
                                                <el-date-picker
                                                    v-model="sessionForm.startTime"
                                                    type="datetime"
                                                    placeholder="ÈÄâÊã©ÂºÄÂßãÊó∂Èó¥"
                                                    style="width: 100%">
                                                </el-date-picker>
                                            </el-form-item>
                                        </el-col>
                                        <el-col :span="12">
                                            <el-form-item label="ÁªìÊùüÊó∂Èó¥" prop="endTime" required>
                                                <el-date-picker
                                                    v-model="sessionForm.endTime"
                                                    type="datetime"
                                                    placeholder="ÈÄâÊã©ÁªìÊùüÊó∂Èó¥"
                                                    style="width: 100%">
                                                </el-date-picker>
                                            </el-form-item>
                                        </el-col>
                                    </el-row>
                                </div>

                                <!-- Ë¥πÁî®ËÆæÁΩÆ -->
                                <div class="form-section">
                                    <h3 class="section-title">Ë¥πÁî®ËÆæÁΩÆ</h3>
                                    
                                    <el-row :gutter="20">
                                        <el-col :span="12">
                                            <el-form-item label="‰øùËØÅÈáëÊØî‰æã" prop="depositRatio" required>
                                                <el-input-number
                                                    v-model="sessionForm.depositRatio"
                                                    :min="0"
                                                    :max="1"
                                                    :precision="3"
                                                    :step="0.001"
                                                    placeholder="ËØ∑ËæìÂÖ•‰øùËØÅÈáëÊØî‰æã"
                                                    style="width: 100%">
                                                </el-input-number>
                                                <div class="form-tip">‰æãÂ¶ÇÔºö0.1 Ë°®Á§∫ 10%</div>
                                            </el-form-item>
                                        </el-col>
                                        <el-col :span="12">
                                            <el-form-item label="‰Ω£ÈáëÊØî‰æã" prop="commissionRatio" required>
                                                <el-input-number
                                                    v-model="sessionForm.commissionRatio"
                                                    :min="0"
                                                    :max="1"
                                                    :precision="3"
                                                    :step="0.001"
                                                    placeholder="ËØ∑ËæìÂÖ•‰Ω£ÈáëÊØî‰æã"
                                                    style="width: 100%">
                                                </el-input-number>
                                                <div class="form-tip">‰æãÂ¶ÇÔºö0.05 Ë°®Á§∫ 5%</div>
                                            </el-form-item>
                                        </el-col>
                                    </el-row>
                                </div>

                                <!-- ÊúçÂä°ËÆæÁΩÆ -->
                                <div class="form-section">
                                    <h3 class="section-title">ÊúçÂä°ËÆæÁΩÆ</h3>
                                    
                                    <el-row :gutter="20">
                                        <el-col :span="8">
                                            <el-form-item label="ÊòØÂê¶‰øùÁúü">
                                                <el-switch
                                                    v-model="sessionForm.isAuthentic"
                                                    active-text="ÊòØ"
                                                    inactive-text="Âê¶">
                                                </el-switch>
                                            </el-form-item>
                                        </el-col>
                                        <el-col :span="8">
                                            <el-form-item label="ÊòØÂê¶ÂåÖÈÇÆ">
                                                <el-switch
                                                    v-model="sessionForm.isFreeShipping"
                                                    active-text="ÊòØ"
                                                    inactive-text="Âê¶">
                                                </el-switch>
                                            </el-form-item>
                                        </el-col>
                                        <el-col :span="8">
                                            <el-form-item label="ÊòØÂê¶ÊîØÊåÅÈÄÄË¥ß">
                                                <el-switch
                                                    v-model="sessionForm.isReturnable"
                                                    active-text="ÊòØ"
                                                    inactive-text="Âê¶">
                                                </el-switch>
                                            </el-form-item>
                                        </el-col>
                                    </el-row>
                                    
                                    <el-form-item label="ÊãçÂçñ‰ºöËßÑÂàô" prop="rules">
                                        <el-input 
                                            v-model="sessionForm.rules" 
                                            type="textarea" 
                                            :rows="3"
                                            placeholder="ËØ∑ËæìÂÖ•ÊãçÂçñ‰ºöËßÑÂàôËØ¥Êòé">
                                        </el-input>
                                    </el-form-item>
                                </div>

                                <!-- ÊãçÂìÅÈÄâÊã© -->
                                <div class="form-section">
                                    <h3 class="section-title">ÊãçÂìÅÈÄâÊã©</h3>
                                    
                                    <el-form-item label="ÈÄâÊã©ÊãçÂìÅ" prop="selectedItems" required>
                                        <el-button type="primary" @click="openItemSelector">
                                            <i class="el-icon-plus"></i>
                                            ÈÄâÊã©ÊãçÂìÅ
                                        </el-button>
                                        <span v-if="selectedItems.length > 0" class="selected-count">
                                            Â∑≤ÈÄâÊã© {{ selectedItems.length }} ‰∏™ÊãçÂìÅ
                                        </span>
                                    </el-form-item>
                                    
                                    <!-- Â∑≤ÈÄâÊã©ÁöÑÊãçÂìÅÂàóË°® -->
                                    <div v-if="selectedItems.length > 0" class="selected-items">
                                        <el-tag 
                                            v-for="item in selectedItems" 
                                            :key="item.id" 
                                            closable 
                                            @close="removeSelectedItem(item.id)"
                                            class="item-tag">
                                            {{ item.itemName }}
                                        </el-tag>
                                    </div>
                                </div>

                                <!-- Êèê‰∫§ÊåâÈíÆ -->
                                <el-form-item>
                                    <el-button type="primary" @click="submitSession" :loading="creating">
                                        ÂàõÂª∫ÊãçÂçñ‰ºö
                                    </el-button>
                                    <el-button @click="resetSessionForm">ÈáçÁΩÆ</el-button>
                                </el-form-item>
                            </el-form>
                        </el-card>
                    </div>
                    
                    <!-- ÊãçÂìÅÈÄâÊã©ÂØπËØùÊ°Ü -->
                    <el-dialog 
                        v-model="showItemSelector" 
                        title="ÈÄâÊã©ÊãçÂìÅ" 
                        width="85%"
                        :before-close="handleItemSelectorClose">
                        <div v-loading="itemsLoading">
                            <el-table 
                                :data="availableItems" 
                                @selection-change="handleItemSelectionChange"
                                ref="itemTable"
                                :row-key="row => row.id">
                                <el-table-column type="selection" width="55" :reserve-selection="true"></el-table-column>
                                
                                <!-- ÊãçÂìÅÂõæÁâá -->
                                <el-table-column label="ÂõæÁâá" width="120">
                                    <template #default="scope">
                                        <el-image 
                                            v-if="scope.row.coverImage || (scope.row.imageList && scope.row.imageList.length > 0)"
                                            :src="scope.row.coverImage || scope.row.imageList[0]"
                                            :preview-src-list="scope.row.imageList || [scope.row.coverImage]"
                                            fit="cover"
                                            style="width: 80px; height: 80px; border-radius: 4px; cursor: pointer;">
                                            <template #error>
                                                <div style="width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; background: #f5f5f5; border-radius: 4px;">
                                                    <i class="el-icon-picture-outline" style="font-size: 32px; color: #ccc;"></i>
                                                </div>
                                            </template>
                                        </el-image>
                                        <div v-else style="width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; background: #f5f5f5; border-radius: 4px;">
                                            <i class="el-icon-picture-outline" style="font-size: 32px; color: #ccc;"></i>
                                        </div>
                                    </template>
                                </el-table-column>
                                
                                <!-- ÊãçÂìÅ‰ø°ÊÅØ -->
                                <el-table-column label="ÊãçÂìÅ‰ø°ÊÅØ" min-width="300">
                                    <template #default="scope">
                                        <div>
                                            <div style="font-weight: bold; font-size: 14px; margin-bottom: 4px;">
                                                {{ scope.row.itemName }}
                                            </div>
                                            <div style="font-size: 12px; color: #909399;">
                                                ÁºñÂè∑: {{ scope.row.itemCode || 'Êó†' }}
                                            </div>
                                        </div>
                                    </template>
                                </el-table-column>
                                
                                <el-table-column label="Ëµ∑Êãç‰ª∑" width="120">
                                    <template #default="scope">
                                        <span style="color: #F56C6C; font-weight: bold;">
                                            ¬•{{ scope.row.startingPrice }}
                                        </span>
                                    </template>
                                </el-table-column>
                                
                                <el-table-column label="‰º∞‰ª∑" width="120">
                                    <template #default="scope">
                                        <span v-if="scope.row.estimatedPrice" style="color: #67C23A;">
                                            ¬•{{ scope.row.estimatedPrice }}
                                        </span>
                                        <span v-else style="color: #909399;">-</span>
                                    </template>
                                </el-table-column>
                                
                                <el-table-column prop="description" label="ÊèèËø∞" min-width="200" show-overflow-tooltip></el-table-column>
                                
                                <el-table-column label="Áä∂ÊÄÅ" width="80">
                                    <template #default="scope">
                                        <el-tag :type="scope.row.status === 1 ? 'success' : 'info'" size="small">
                                            {{ scope.row.status === 1 ? '‰∏äÊû∂' : '‰∏ãÊû∂' }}
                                        </el-tag>
                                    </template>
                                </el-table-column>
                            </el-table>
                            
                            <!-- Â∑≤ÈÄâÊã©ÊèêÁ§∫ -->
                            <div v-if="tempSelectedItems.length > 0" style="margin-top: 15px; padding: 10px; background: #f0f9ff; border-radius: 4px;">
                                <i class="el-icon-info" style="color: #409EFF;"></i>
                                Â∑≤ÈÄâÊã© <strong style="color: #409EFF;">{{ tempSelectedItems.length }}</strong> ‰∏™ÊãçÂìÅ
                            </div>
                        </div>
                        <template #footer>
                            <el-button @click="showItemSelector = false">ÂèñÊ∂à</el-button>
                            <el-button type="primary" @click="confirmItemSelection" :disabled="tempSelectedItems.length === 0">
                                Á°ÆÂÆöÔºà{{ tempSelectedItems.length }}Ôºâ
                            </el-button>
                        </template>
                    </el-dialog>
                    
                    <!-- ÊãçÂìÅÁºñËæëÂØπËØùÊ°Ü -->
                    <el-dialog 
                        v-model="showItemEditDialog" 
                        title="ÁºñËæëÊãçÂìÅ" 
                        width="60%"
                        :before-close="handleItemEditClose">
                        <el-form 
                            ref="editItemForm" 
                            :model="editItemForm" 
                            :rules="editItemRules" 
                            label-width="120px"
                            size="large">
                            
                            <el-row :gutter="20">
                                <el-col :span="12">
                                    <el-form-item label="ÊãçÂìÅÂêçÁß∞" prop="itemName" required>
                                        <el-input 
                                            v-model="editItemForm.itemName" 
                                            placeholder="ËØ∑ËæìÂÖ•ÊãçÂìÅÂêçÁß∞"
                                            clearable>
                                        </el-input>
                                    </el-form-item>
                                </el-col>
                                <el-col :span="12">
                                    <el-form-item label="ÊãçÂìÅÂàÜÁ±ª" prop="categoryId" required>
                                        <el-select 
                                            v-model="editItemForm.categoryId" 
                                            placeholder="ËØ∑ÈÄâÊã©ÊãçÂìÅÂàÜÁ±ª"
                                            style="width: 100%">
                                            <el-option 
                                                v-for="category in categories" 
                                                :key="category.id" 
                                                :label="category.name" 
                                                :value="category.id">
                                            </el-option>
                                        </el-select>
                                    </el-form-item>
                                </el-col>
                            </el-row>
                            
                            <el-row :gutter="20">
                                <el-col :span="12">
                                    <el-form-item label="Ëµ∑Êãç‰ª∑" prop="startingPrice" required>
                                        <el-input-number 
                                            v-model="editItemForm.startingPrice" 
                                            :min="0" 
                                            :precision="2"
                                            placeholder="ËØ∑ËæìÂÖ•Ëµ∑Êãç‰ª∑"
                                            style="width: 100%">
                                        </el-input-number>
                                    </el-form-item>
                                </el-col>
                                <el-col :span="12">
                                    <el-form-item label="ÊãçÂìÅÁºñÂè∑" prop="itemCode" required>
                                        <el-input 
                                            v-model="editItemForm.itemCode" 
                                            placeholder="ËØ∑ËæìÂÖ•ÊãçÂìÅÁºñÂè∑"
                                            clearable>
                                        </el-input>
                                    </el-form-item>
                                </el-col>
                            </el-row>

                            <el-row :gutter="20">
                                <el-col :span="12">
                                    <el-form-item label="‰º∞‰ª∑">
                                        <el-input-number 
                                            v-model="editItemForm.estimatedPrice" 
                                            :min="0" 
                                            :precision="2"
                                            placeholder="ËØ∑ËæìÂÖ•‰º∞‰ª∑"
                                            style="width: 100%">
                                        </el-input-number>
                                    </el-form-item>
                                </el-col>
                                <el-col :span="12">
                                    <el-form-item label="Â∞∫ÂØ∏">
                                        <el-input 
                                            v-model="editItemForm.dimensions" 
                                            placeholder="‰æãÂ¶ÇÔºöÈïøxÂÆΩxÈ´òÔºàcmÔºâ"
                                            clearable>
                                        </el-input>
                                    </el-form-item>
                                </el-col>
                            </el-row>

                            <el-form-item label="ÊùêË¥®">
                                <el-input 
                                    v-model="editItemForm.material" 
                                    placeholder="ËØ∑ËæìÂÖ•ÊùêË¥®"
                                    clearable>
                                </el-input>
                            </el-form-item>
                            
                            <el-form-item label="ÊãçÂìÅÊèèËø∞" prop="description" required>
                                <el-input 
                                    v-model="editItemForm.description" 
                                    type="textarea" 
                                    :rows="4"
                                    placeholder="ËØ∑ËæìÂÖ•ÊãçÂìÅËØ¶ÁªÜÊèèËø∞">
                                </el-input>
                            </el-form-item>
                            
                            <el-form-item label="‰∏äÊû∂Áä∂ÊÄÅ" prop="status" required>
                                <el-radio-group v-model="editItemForm.status">
                                    <el-radio :label="0">‰∏ãÊû∂</el-radio>
                                    <el-radio :label="1">‰∏äÊû∂</el-radio>
                                </el-radio-group>
                            </el-form-item>
                            
                            <!-- ÊãçÂìÅÂõæÁâáÁÆ°ÁêÜ -->
                            <el-form-item label="ÊãçÂìÅÂõæÁâá">
                                <div class="image-upload-section">
                                    
                                    <!-- Áé∞ÊúâÂõæÁâáÊòæÁ§∫ -->
                                    <div v-if="editImageFiles.length > 0" class="existing-images-section">
                                        <div class="section-title">ÂΩìÂâçÂõæÁâá ({{ editImageFiles.length }}/5)</div>
                                        <div class="image-preview">
                                            <div 
                                                v-for="(file, index) in editImageFiles" 
                                                :key="index" 
                                                class="image-item">
                                                <el-image
                                                    :src="file.preview" 
                                                    :alt="file.name"
                                                    :preview-src-list="editImageFiles.map(f => f.preview)"
                                                    :initial-index="index"
                                                    style="width: 100%; height: 100%; object-fit: cover;">
                                                </el-image>
                                                <div class="image-actions">
                                                    <el-button type="danger" size="small" @click="removeEditImage(index)">Âà†Èô§</el-button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- ÂõæÁâá‰∏ä‰º†Âå∫Âüü -->
                                    <div v-if="editImageFiles.length < 5">
                                        <input 
                                            type="file" 
                                            ref="editImageInput" 
                                            multiple 
                                            accept="image/*" 
                                            @change="handleEditFileSelect" 
                                            style="display: none">
                                        <el-button type="primary" size="small" @click="$refs.editImageInput.click()">
                                            <el-icon class="el-icon-plus"></el-icon>
                                            Ê∑ªÂä†ÂõæÁâá
                                        </el-button>
                                    </div>
                                </div>
                            </el-form-item>
                        </el-form>
                        <template #footer>
                            <el-button @click="showItemEditDialog = false">ÂèñÊ∂à</el-button>
                            <el-button type="primary" @click="submitItemEdit" :loading="editingItem">‰øùÂ≠ò</el-button>
                        </template>
                    </el-dialog>
                    
                    <!-- ÊãçÂçñ‰ºöÁºñËæëÂØπËØùÊ°Ü -->
                    <el-dialog 
                        v-model="showSessionEditDialog" 
                        title="ÁºñËæëÊãçÂçñ‰ºö" 
                        width="70%"
                        :before-close="handleSessionEditClose">
                        <el-form 
                            ref="editSessionForm" 
                            :model="editSessionForm" 
                            :rules="editSessionRules" 
                            label-width="120px"
                            size="large">
                            
                            <!-- Âü∫Êú¨‰ø°ÊÅØ -->
                            <div class="form-section">
                                <h3 class="section-title">Âü∫Êú¨‰ø°ÊÅØ</h3>
                                
                                <el-row :gutter="20">
                                    <el-col :span="12">
                                        <el-form-item label="ÊãçÂçñ‰ºöÂêçÁß∞" prop="sessionName" required>
                                            <el-input 
                                                v-model="editSessionForm.sessionName" 
                                                placeholder="ËØ∑ËæìÂÖ•ÊãçÂçñ‰ºöÂêçÁß∞"
                                                clearable>
                                            </el-input>
                                        </el-form-item>
                                    </el-col>
                                    <el-col :span="12">
                                        <el-form-item label="ÊãçÂçñ‰ºöÁ±ªÂûã" prop="sessionType" required>
                                            <el-select 
                                                v-model="editSessionForm.sessionType" 
                                                placeholder="ËØ∑ÈÄâÊã©ÊãçÂçñ‰ºöÁ±ªÂûã"
                                                style="width: 100%">
                                                <el-option label="Ëâ∫ÊúØÂìÅ‰∏ìÂú∫" :value="1"></el-option>
                                                <el-option label="Áè†ÂÆù‰∏ìÂú∫" :value="2"></el-option>
                                                <el-option label="Âè§Ëë£‰∏ìÂú∫" :value="3"></el-option>
                                                <el-option label="ÁªºÂêà‰∏ìÂú∫" :value="4"></el-option>
                                            </el-select>
                                        </el-form-item>
                                    </el-col>
                                </el-row>
                                
                                <el-form-item label="ÊãçÂçñ‰ºöÊèèËø∞" prop="description" required>
                                    <el-input 
                                        v-model="editSessionForm.description" 
                                        type="textarea" 
                                        :rows="4"
                                        placeholder="ËØ∑ËæìÂÖ•ÊãçÂçñ‰ºöËØ¶ÁªÜÊèèËø∞">
                                    </el-input>
                                </el-form-item>

                                <el-form-item label="Â∞ÅÈù¢ÂõæÁâá">
                                    <div style="display:flex; align-items:center; gap:12px; flex-wrap:wrap;">
                                        <div style="display:flex; gap:10px; flex-wrap:wrap;">
                                            <div v-for="(img, idx) in editSessionForm.imageList" :key="idx" style="position:relative;">
                                                <el-image
                                                    :src="img"
                                                    :preview-src-list="editSessionForm.imageList"
                                                    :initial-index="idx"
                                                    preview-teleported="true"
                                                    style="width: 160px; height: 120px; object-fit: cover; border:1px solid #ebeef5; border-radius:6px;">
                                                </el-image>
                                                <el-button size="small" type="danger" @click="removeSessionImage(idx)" style="position:absolute; top:6px; right:6px;" circle>
                                                    <i class="el-icon-close"></i>
                                                </el-button>
                                            </div>
                                        </div>
                                        <input type="file" ref="editSessionCoverInput" accept="image/*" multiple style="display:none" @change="handleEditSessionCoverSelect">
                                        <el-button size="small" type="primary" @click="$refs.editSessionCoverInput.click()">Ê∑ªÂä†ÂõæÁâá</el-button>
                                    </div>
                                </el-form-item>
                            </div>

                            <!-- Êó∂Èó¥ËÆæÁΩÆ -->
                            <div class="form-section">
                                <h3 class="section-title">Êó∂Èó¥ËÆæÁΩÆ</h3>
                                
                                <el-row :gutter="20">
                                    <el-col :span="12">
                                        <el-form-item label="ÂºÄÂßãÊó∂Èó¥" prop="startTime" required>
                                            <el-date-picker
                                                v-model="editSessionForm.startTime"
                                                type="datetime"
                                                placeholder="ÈÄâÊã©ÂºÄÂßãÊó∂Èó¥"
                                                style="width: 100%">
                                            </el-date-picker>
                                        </el-form-item>
                                    </el-col>
                                    <el-col :span="12">
                                        <el-form-item label="ÁªìÊùüÊó∂Èó¥" prop="endTime" required>
                                            <el-date-picker
                                                v-model="editSessionForm.endTime"
                                                type="datetime"
                                                placeholder="ÈÄâÊã©ÁªìÊùüÊó∂Èó¥"
                                                style="width: 100%">
                                            </el-date-picker>
                                        </el-form-item>
                                    </el-col>
                                </el-row>
                            </div>

                            <!-- Ë¥πÁî®ËÆæÁΩÆ -->
                            <div class="form-section">
                                <h3 class="section-title">Ë¥πÁî®ËÆæÁΩÆ</h3>
                                
                                <el-row :gutter="20">
                                    <el-col :span="12">
                                        <el-form-item label="‰øùËØÅÈáëÊØî‰æã" prop="depositRatio" required>
                                            <el-input-number
                                                v-model="editSessionForm.depositRatio"
                                                :min="0"
                                                :max="1"
                                                :precision="3"
                                                :step="0.001"
                                                placeholder="ËØ∑ËæìÂÖ•‰øùËØÅÈáëÊØî‰æã"
                                                style="width: 100%">
                                            </el-input-number>
                                            <div class="form-tip">‰æãÂ¶ÇÔºö0.1 Ë°®Á§∫ 10%</div>
                                        </el-form-item>
                                    </el-col>
                                    <el-col :span="12">
                                        <el-form-item label="‰Ω£ÈáëÊØî‰æã" prop="commissionRatio" required>
                                            <el-input-number
                                                v-model="editSessionForm.commissionRatio"
                                                :min="0"
                                                :max="1"
                                                :precision="3"
                                                :step="0.001"
                                                placeholder="ËØ∑ËæìÂÖ•‰Ω£ÈáëÊØî‰æã"
                                                style="width: 100%">
                                            </el-input-number>
                                            <div class="form-tip">‰æãÂ¶ÇÔºö0.05 Ë°®Á§∫ 5%</div>
                                        </el-form-item>
                                    </el-col>
                                </el-row>
                            </div>

                            <!-- ÂÖ∂‰ªñËÆæÁΩÆ -->
                            <div class="form-section">
                                <h3 class="section-title">ÂÖ∂‰ªñËÆæÁΩÆ</h3>
                                
                                <el-row :gutter="20">
                                    <el-col :span="8">
                                        <el-form-item label="ÊòØÂê¶‰øùÁúü">
                                            <el-switch v-model="editSessionForm.isAuthentic"></el-switch>
                                        </el-form-item>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-form-item label="ÊòØÂê¶ÂåÖÈÇÆ">
                                            <el-switch v-model="editSessionForm.isFreeShipping"></el-switch>
                                        </el-form-item>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-form-item label="ÊòØÂê¶ÂèØÈÄÄ">
                                            <el-switch v-model="editSessionForm.isReturnable"></el-switch>
                                        </el-form-item>
                                    </el-col>
                                </el-row>

                                <el-divider></el-divider>
                                <h4 style="margin:0 0 10px 0;">Âª∂Êó∂ÊãçÂçñ</h4>
                                <el-row :gutter="20">
                                    <el-col :span="6">
                                        <el-form-item label="ÂêØÁî®Âª∂Êó∂">
                                            <el-switch v-model="editSessionForm.antiSnipingEnabled"></el-switch>
                                        </el-form-item>
                                    </el-col>
                                    <el-col :span="6">
                                        <el-form-item label="ÈòàÂÄº(Áßí)">
                                            <el-input-number v-model="editSessionForm.extendThresholdSec" :min="10" :max="600"></el-input-number>
                                        </el-form-item>
                                    </el-col>
                                    <el-col :span="6">
                                        <el-form-item label="È°∫Âª∂(Áßí)">
                                            <el-input-number v-model="editSessionForm.extendSeconds" :min="10" :max="600"></el-input-number>
                                        </el-form-item>
                                    </el-col>
                                    <el-col :span="6">
                                        <el-form-item label="ÊúÄÂ§ßÊ¨°Êï∞">
                                            <el-input-number v-model="editSessionForm.extendMaxTimes" :min="0" :max="100"></el-input-number>
                                        </el-form-item>
                                    </el-col>
                                </el-row>
                                
                                <el-form-item label="ÊãçÂçñ‰ºöËßÑÂàô" prop="rules">
                                    <el-input 
                                        v-model="editSessionForm.rules" 
                                        type="textarea" 
                                        :rows="4"
                                        placeholder="ËØ∑ËæìÂÖ•ÊãçÂçñ‰ºöËßÑÂàô">
                                    </el-input>
                                </el-form-item>
                            </div>

                            <!-- ÊãçÂìÅÁÆ°ÁêÜ -->
                            <div class="form-section">
                                <h3 class="section-title">ÊãçÂìÅÁÆ°ÁêÜ</h3>
                                
                                <el-form-item label="ÈÄâÊã©ÊãçÂìÅ">
                                    <el-button type="primary" @click="openEditSessionItemSelector">
                                        <i class="el-icon-plus"></i>
                                        Ê∑ªÂä†ÊãçÂìÅ
                                    </el-button>
                                    <span v-if="editSessionForm.selectedItems && editSessionForm.selectedItems.length > 0" style="margin-left: 10px; color: #67c23a;">
                                        Â∑≤ÈÄâÊã© {{ editSessionForm.selectedItems.length }} ‰∏™ÊãçÂìÅ
                                    </span>
                                </el-form-item>
                                
                                <!-- Â∑≤ÈÄâÊã©ÁöÑÊãçÂìÅÂàóË°® -->
                                <div v-if="editSessionForm.selectedItems && editSessionForm.selectedItems.length > 0" style="margin-top: 10px;">
                                    <el-tag 
                                        v-for="item in editSessionForm.selectedItems" 
                                        :key="item.id" 
                                        closable 
                                        @close="removeEditSessionItem(item.id)"
                                        style="margin-right: 10px; margin-bottom: 10px;">
                                        {{ item.itemName }}
                                    </el-tag>
                                </div>
                            </div>
                        </el-form>
                        <template #footer>
                            <el-button @click="showSessionEditDialog = false">ÂèñÊ∂à</el-button>
                            <el-button type="primary" @click="submitSessionEdit" :loading="editingSession">‰øùÂ≠ò</el-button>
                        </template>
                    </el-dialog>
                    
                    <!-- ‰∏ä‰º†ÊãçÂìÅÈ°µÈù¢ -->
                    <div v-if="activeMenu === 'items/add'" class="item-upload-page">
                        <div class="page-header">
                            <h1>‰∏ä‰º†ÊãçÂìÅ</h1>
                            <el-button @click="goToPage('items')">
                                <i class="el-icon-arrow-left"></i>
                                ËøîÂõûÊãçÂìÅÂàóË°®
                            </el-button>
                        </div>
                        
                        <el-card>
                            <el-form 
                                ref="uploadForm" 
                                :model="uploadForm" 
                                :rules="uploadRules" 
                                label-width="120px"
                                size="large">
                                
                                <!-- Âü∫Êú¨‰ø°ÊÅØ -->
                                <div class="form-section">
                                    <h3 class="section-title">Âü∫Êú¨‰ø°ÊÅØ</h3>
                                    
                                    <el-row :gutter="20">
                                        <el-col :span="12">
                                            <el-form-item label="ÊãçÂìÅÂêçÁß∞" prop="itemName" required>
                                                <el-input 
                                                    v-model="uploadForm.itemName" 
                                                    placeholder="ËØ∑ËæìÂÖ•ÊãçÂìÅÂêçÁß∞"
                                                    clearable>
                                                </el-input>
                                            </el-form-item>
                                        </el-col>
                                        <el-col :span="12">
                                            <el-form-item label="ÊãçÂìÅÂàÜÁ±ª" prop="categoryId" required>
                                                <el-select 
                                                    v-model="uploadForm.categoryId" 
                                                    placeholder="ËØ∑ÈÄâÊã©ÊãçÂìÅÂàÜÁ±ª"
                                                    style="width: 100%">
                                                    <el-option 
                                                        v-for="category in categories" 
                                                        :key="category.id" 
                                                        :label="category.name" 
                                                        :value="category.id">
                                                    </el-option>
                                                </el-select>
                                            </el-form-item>
                                        </el-col>
                                    </el-row>
                                    
                                    <el-row :gutter="20">
                                        <el-col :span="12">
                                            <el-form-item label="Ëµ∑Êãç‰ª∑" prop="startingPrice" required>
                                                <el-input-number 
                                                    v-model="uploadForm.startingPrice" 
                                                    :min="0" 
                                                    :precision="2"
                                                    placeholder="ËØ∑ËæìÂÖ•Ëµ∑Êãç‰ª∑"
                                                    style="width: 100%">
                                                </el-input-number>
                                            </el-form-item>
                                        </el-col>
                                        <el-col :span="12">
                                            <el-form-item label="‰º∞‰ª∑" prop="estimatedPrice">
                                                <el-input-number 
                                                    v-model="uploadForm.estimatedPrice" 
                                                    :min="0" 
                                                    :precision="2"
                                                    placeholder="ËØ∑ËæìÂÖ•ÊãçÂìÅ‰º∞‰ª∑"
                                                    style="width: 100%">
                                                </el-input-number>
                                            </el-form-item>
                                        </el-col>
                                    </el-row>
                                    
                                    <el-form-item label="ÊãçÂìÅÁºñÂè∑" prop="itemCode">
                                        <el-input 
                                            v-model="uploadForm.itemCode" 
                                            placeholder="ËØ∑ËæìÂÖ•ÊãçÂìÅÁºñÂè∑ÔºàÁî®‰∫éÂø´ÈÄüÊ£ÄÁ¥¢Ôºâ"
                                            clearable>
                                        </el-input>
                                    </el-form-item>

                                    <el-form-item label="ÊãçÂìÅÊèèËø∞" prop="description" required>
                                        <el-input 
                                            v-model="uploadForm.description" 
                                            type="textarea" 
                                            :rows="4"
                                            placeholder="ËØ∑ËæìÂÖ•ÊãçÂìÅËØ¶ÁªÜÊèèËø∞">
                                        </el-input>
                                    </el-form-item>

                                    <el-row :gutter="20">
                                        <el-col :span="12">
                                            <el-form-item label="Â∞∫ÂØ∏" prop="dimensions">
                                                <el-input 
                                                    v-model="uploadForm.dimensions" 
                                                    placeholder="‰æãÂ¶ÇÔºöÈïøxÂÆΩxÈ´òÔºàcmÔºâ"
                                                    clearable>
                                                </el-input>
                                            </el-form-item>
                                        </el-col>
                                        <el-col :span="12">
                                            <el-form-item label="ÊùêË¥®" prop="material">
                                                <el-input 
                                                    v-model="uploadForm.material" 
                                                    placeholder="ËØ∑ËæìÂÖ•ÊùêË¥®"
                                                    clearable>
                                                </el-input>
                                            </el-form-item>
                                        </el-col>
                                    </el-row>
                                    
                                    <el-form-item label="‰∏äÊû∂Áä∂ÊÄÅ" prop="status" required>
                                        <el-radio-group v-model="uploadForm.status">
                                            <el-radio :label="0">‰∏ãÊû∂</el-radio>
                                            <el-radio :label="1">‰∏äÊû∂</el-radio>
                                        </el-radio-group>
                                        <div class="form-tip">‰∏äÊû∂ÁöÑÊãçÂìÅÂèØ‰ª•Ë¢´Ê∑ªÂä†Âà∞ÊãçÂçñ‰ºö‰∏≠</div>
                                    </el-form-item>
                                </div>

                                <!-- ÂõæÁâá‰∏ä‰º† -->
                                <div class="form-section">
                                    <h3 class="section-title">ÂõæÁâá‰∏ä‰º†</h3>
                                    
                                    <div class="image-upload-section">
                                        <!-- Â∑≤‰∏ä‰º†ÂõæÁâáÊòæÁ§∫ -->
                                        <div v-if="imageFiles.length > 0" class="existing-images-section">
                                            <div class="section-title">Â∑≤‰∏ä‰º†ÂõæÁâá ({{ imageFiles.length }}/5)</div>
                                            <div class="image-preview">
                                                <div 
                                                    v-for="(file, index) in imageFiles" 
                                                    :key="index" 
                                                    class="image-item">
                                                    <el-image
                                                        :src="file.preview" 
                                                        :alt="file.name"
                                                        :preview-src-list="imageFiles.map(f => f.preview)"
                                                        :initial-index="index"
                                                        :preview-teleported="true"
                                                        style="width: 100%; height: 100%; object-fit: cover;">
                                                    </el-image>
                                                    <div class="image-actions">
                                                        <el-button type="danger" size="small" @click="removeImage(index)">Âà†Èô§</el-button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- ÂõæÁâá‰∏ä‰º†Âå∫Âüü -->
                                        <div v-if="imageFiles.length < 5">
                                            <el-upload
                                                ref="imageUpload"
                                                :auto-upload="false"
                                                :multiple="true"
                                                :limit="5"
                                                :on-change="handleFileSelect"
                                                :file-list="imageFileList"
                                                accept="image/*"
                                                :on-exceed="handleExceed"
                                                :before-upload="beforeUpload">
                                                <el-button type="primary">
                                                    <el-icon class="el-icon-plus"></el-icon>
                                                    ÈÄâÊã©ÂõæÁâá
                                                </el-button>
                                            </el-upload>
                                        </div>
                                        
                                        <div class="upload-tips">
                                            <p>‚Ä¢ ÊîØÊåÅjpg„ÄÅpngÊ†ºÂºèÔºåÂçïÂº†‰∏çË∂ÖËøá2MB</p>
                                            <p>‚Ä¢ ÊúÄÂ§ö‰∏ä‰º†5Âº†ÂõæÁâá</p>
                                            <p>‚Ä¢ ÂèØ‰ª•ÊãñÊãΩÊñá‰ª∂Âà∞ÊåâÈíÆ‰∏ä‰∏ä‰º†</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Êèê‰∫§ÊåâÈíÆ -->
                                <el-form-item>
                                    <el-button type="primary" @click="submitUpload" :loading="uploading">
                                        ‰∏ä‰º†ÊãçÂìÅ
                                    </el-button>
                                    <el-button @click="resetForm">ÈáçÁΩÆ</el-button>
                                </el-form-item>
                            </el-form>
                        </el-card>
                    </div>
                    
                    <!-- Á≥ªÁªüÈÖçÁΩÆÁÆ°ÁêÜ -->
                    <div v-else-if="activeMenu === 'config'" class="config-page">
                        <div class="page-header">
                            <h1>Á≥ªÁªüÈÖçÁΩÆ</h1>
                            <div>
                                <el-button type="primary" @click="openConfigDialog">Êñ∞Â¢ûÈÖçÁΩÆ</el-button>
                                <el-button @click="loadConfigs" style="margin-left:8px;">Âà∑Êñ∞</el-button>
                            </div>
                        </div>
                        
                        <!-- ÈÖçÁΩÆÂàÜÁ±ªÁ≠õÈÄâ -->
                        <el-card style="margin-bottom: 20px;">
                            <el-row :gutter="20">
                                <el-col :span="6">
                                    <el-select v-model="configFilter.category" placeholder="ÈÄâÊã©Á±ªÂûã" clearable @change="loadConfigs">
                                        <el-option label="ÂÖ®ÈÉ®" value=""></el-option>
                                        <el-option v-for="cat in configCategories" :key="cat" :label="cat" :value="cat"></el-option>
                                    </el-select>
                                </el-col>
                                <el-col :span="6">
                                    <el-input v-model="configFilter.keyword" placeholder="ÊêúÁ¥¢ÈÖçÁΩÆÈîÆ" clearable @input="loadConfigs">
                                        <template #prefix>
                                            <i class="el-icon-search"></i>
                                        </template>
                                    </el-input>
                                </el-col>
                            </el-row>
                        </el-card>

                        <!-- ÈÖçÁΩÆÂàóË°® -->
                        <el-card>
                            <el-table :data="configList" v-loading="configLoading" stripe>
                                <el-table-column prop="configKey" label="ÈÖçÁΩÆÈîÆ" width="200"></el-table-column>
                                <el-table-column prop="configValue" label="ÈÖçÁΩÆÂÄº" min-width="200">
                                    <template #default="{ row }">
                                        <span v-if="row.configType === 'BOOLEAN'">{{ row.configValue === 'true' ? 'ÊòØ' : 'Âê¶' }}</span>
                                        <span v-else>{{ row.configValue }}</span>
                                    </template>
                                </el-table-column>
                                <el-table-column prop="configType" label="Á±ªÂûã" width="120">
                                    <template #default="{ row }">
                                        <el-tag :type="getConfigTypeTag(row.configType)">{{ row.configType }}</el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column prop="description" label="ÊèèËø∞" min-width="150"></el-table-column>
                                <el-table-column prop="isSystem" label="Á≥ªÁªüÈÖçÁΩÆ" width="100">
                                    <template #default="{ row }">
                                        <el-tag :type="row.isSystem ? 'danger' : 'success'">
                                            {{ row.isSystem ? 'ÊòØ' : 'Âê¶' }}
                                        </el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column prop="isEditable" label="ÂèØÁºñËæë" width="100">
                                    <template #default="{ row }">
                                        <el-tag :type="row.isEditable ? 'success' : 'warning'">
                                            {{ row.isEditable ? 'ÊòØ' : 'Âê¶' }}
                                        </el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column label="Êìç‰Ωú" width="150" fixed="right">
                                    <template #default="{ row }">
                                        <el-button size="small" @click="editConfig(row)" v-if="row.isEditable">ÁºñËæë</el-button>
                                        <el-button size="small" type="danger" @click="deleteConfig(row)" v-if="!row.isSystem">Âà†Èô§</el-button>
                                    </template>
                                </el-table-column>
                            </el-table>
                        </el-card>
                    </div>

                    <!-- Áî®Êà∑ÁÆ°ÁêÜ -->
                    <div v-else-if="activeMenu === 'user-management'" class="user-management-page">
                        <div class="page-header">
                            <h1>Áî®Êà∑ÁÆ°ÁêÜ</h1>
                            <div>
                                <el-button @click="loadUsers" style="margin-left:8px;">Âà∑Êñ∞</el-button>
                                <el-button type="warning" @click="forceAllOffline">Âº∫Âà∂ÊâÄÊúâÁî®Êà∑Á¶ªÁ∫ø</el-button>
                                <el-button type="info" @click="cleanExpiredRecords">Ê∏ÖÁêÜËøáÊúüËÆ∞ÂΩï</el-button>
                            </div>
                        </div>

                        <!-- Áî®Êà∑ÁªüËÆ° -->
                        <el-row :gutter="20" style="margin-bottom: 20px;">
                            <el-col :span="6">
                                <el-card class="stat-card">
                                    <div class="stat-content">
                                        <div class="stat-value">{{ userStats.totalCount || 0 }}</div>
                                        <div class="stat-label">ÊÄªÁî®Êà∑Êï∞</div>
                                    </div>
                                    <i class="el-icon-user stat-icon"></i>
                                </el-card>
                            </el-col>
                            <el-col :span="6">
                                <el-card class="stat-card">
                                    <div class="stat-content">
                                        <div class="stat-value">{{ userStats.onlineCount || 0 }}</div>
                                        <div class="stat-label">Âú®Á∫øÁî®Êà∑</div>
                                    </div>
                                    <i class="el-icon-user-solid stat-icon"></i>
                                </el-card>
                            </el-col>
                            <el-col :span="6">
                                <el-card class="stat-card">
                                    <div class="stat-content">
                                        <div class="stat-value">{{ userStats.offlineCount || 0 }}</div>
                                        <div class="stat-label">Á¶ªÁ∫øÁî®Êà∑</div>
                                    </div>
                                    <i class="el-icon-user-filling stat-icon"></i>
                                </el-card>
                            </el-col>
                            <el-col :span="6">
                                <el-card class="stat-card">
                                    <div class="stat-content">
                                        <div class="stat-value">{{ onlineRate }}%</div>
                                        <div class="stat-label">Âú®Á∫øÁéá</div>
                                    </div>
                                    <i class="el-icon-data-line stat-icon"></i>
                                </el-card>
                            </el-col>
                        </el-row>

                        <!-- Áî®Êà∑ÂàóË°® -->
                        <el-card>
                            <el-table :data="userList" v-loading="userLoading" stripe>
                                <el-table-column prop="userId" label="Áî®Êà∑ID" width="100"></el-table-column>
                                <el-table-column prop="username" label="Áî®Êà∑Âêç" width="150"></el-table-column>
                                <el-table-column prop="isOnline" label="Âú®Á∫øÁä∂ÊÄÅ" width="100">
                                    <template #default="{ row }">
                                        <el-tag :type="row.isOnline ? 'success' : 'info'">
                                            {{ row.isOnline ? 'Âú®Á∫ø' : 'Á¶ªÁ∫ø' }}
                                        </el-tag>
                                    </template>
                                </el-table-column>
                                <el-table-column prop="loginTime" label="ÁôªÂΩïÊó∂Èó¥" width="180">
                                    <template #default="{ row }">
                                        {{ formatTime(row.loginTime) }}
                                    </template>
                                </el-table-column>
                                <el-table-column prop="lastActivity" label="ÊúÄÂêéÊ¥ªÂä®" width="180">
                                    <template #default="{ row }">
                                        {{ formatTime(row.lastActivity) }}
                                    </template>
                                </el-table-column>
                                <el-table-column prop="ipAddress" label="IPÂú∞ÂùÄ" width="150"></el-table-column>
                                <el-table-column prop="userAgent" label="Áî®Êà∑‰ª£ÁêÜ" min-width="200" show-overflow-tooltip></el-table-column>
                                <el-table-column label="Êìç‰Ωú" width="120" fixed="right">
                                    <template #default="{ row }">
                                        <el-button size="small" type="warning" @click="forceUserOffline(row)" v-if="row.isOnline">
                                            Âº∫Âà∂Á¶ªÁ∫ø
                                        </el-button>
                                    </template>
                                </el-table-column>
                            </el-table>

                            <!-- ÂàÜÈ°µ -->
                            <div style="margin-top: 20px; text-align: center;">
                                <el-pagination
                                    v-model:current-page="userPagination.pageNum"
                                    v-model:page-size="userPagination.pageSize"
                                    :page-sizes="[10, 20, 50, 100]"
                                    :total="userPagination.total"
                                    layout="total, sizes, prev, pager, next, jumper"
                                    @size-change="loadUsers"
                                    @current-change="loadUsers">
                                </el-pagination>
                            </div>
                        </el-card>
                    </div>

                </div>
            </el-main>
        </el-container>
        
        <!-- Á≥ªÁªüÈÖçÁΩÆÂØπËØùÊ°Ü -->
        <el-dialog v-model="configDialogVisible" title="Á≥ªÁªüÈÖçÁΩÆ" width="600px">
            <el-form :model="configForm" label-width="120px">
                <el-form-item label="ÈÖçÁΩÆÈîÆ" required>
                    <el-input v-model="configForm.configKey" placeholder="ËØ∑ËæìÂÖ•ÈÖçÁΩÆÈîÆ" :disabled="!!configForm.id"></el-input>
                </el-form-item>
                <el-form-item label="ÈÖçÁΩÆÂÄº" required>
                    <el-input v-model="configForm.configValue" placeholder="ËØ∑ËæìÂÖ•ÈÖçÁΩÆÂÄº"></el-input>
                </el-form-item>
                <el-form-item label="ÈÖçÁΩÆÁ±ªÂûã" required>
                    <el-select v-model="configForm.configType" placeholder="ËØ∑ÈÄâÊã©ÈÖçÁΩÆÁ±ªÂûã">
                        <el-option label="Â≠óÁ¨¶‰∏≤" value="STRING"></el-option>
                        <el-option label="Êï∞Â≠ó" value="NUMBER"></el-option>
                        <el-option label="Â∏ÉÂ∞îÂÄº" value="BOOLEAN"></el-option>
                        <el-option label="JSON" value="JSON"></el-option>
                    </el-select>
                </el-form-item>
                <el-form-item label="ÈÖçÁΩÆÊèèËø∞">
                    <el-input v-model="configForm.description" type="textarea" placeholder="ËØ∑ËæìÂÖ•ÈÖçÁΩÆÊèèËø∞"></el-input>
                </el-form-item>
                <el-form-item label="Á≥ªÁªüÈÖçÁΩÆ">
                    <el-switch v-model="configForm.isSystem" :active-value="1" :inactive-value="0"></el-switch>
                </el-form-item>
                <el-form-item label="ÂèØÁºñËæë">
                    <el-switch v-model="configForm.isEditable" :active-value="1" :inactive-value="0"></el-switch>
                </el-form-item>
            </el-form>
            <template #footer>
                <el-button @click="configDialogVisible=false">ÂèñÊ∂à</el-button>
                <el-button type="primary" @click="saveConfig">‰øùÂ≠ò</el-button>
            </template>
        </el-dialog>
    </div>

    <!-- Element UI JS -->
    <script src="/js/vue.js"></script>
    <script src="/js/element-plus.js"></script>
    <script src="/js/axios.js"></script>
    <script src="/js/api-init.js"></script>
    
    <script>
        const { createApp } = Vue;
        const { ElMessage, ElMessageBox } = ElementPlus;

        createApp({
            data() {
                return {
                    userInfo: {
                        username: 'admin',
                        nickname: 'Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëò'
                    },
                    sidebarWidth: '200px',
                    isCollapse: false,
                    activeMenu: 'dashboard',
                    breadcrumbList: [
                        { name: 'È¶ñÈ°µ', path: 'dashboard' }
                    ],
                    stats: {
                        totalItems: 0,
                        totalSessions: 0,
                        totalUsers: 0,
                        totalBids: 0
                    },
                    
                    items: [],
                    itemsLoading: false,
                    itemsPage: 1,
                    itemsPageSize: 10,
                    itemsTotal: 0,
                    itemSearchForm: {
                        itemName: '',
                        status: ''
                    },
                    // ‰∏ä‰º†ÊãçÂìÅÁõ∏ÂÖ≥Êï∞ÊçÆ
                    uploading: false,
                    imageFiles: [],
                    imageFileList: [], // el-uploadÁªÑ‰ª∂ÈúÄË¶ÅÁöÑÊñá‰ª∂ÂàóË°®
                    categories: [
                        { id: 1, name: 'Ëâ∫ÊúØÂìÅ' },
                        { id: 2, name: 'Áè†ÂÆùÈ¶ñÈ•∞' },
                        { id: 3, name: 'Âè§Ëë£Êî∂Ëóè' },
                        { id: 4, name: 'Â•¢‰æàÂìÅ' },
                        { id: 5, name: 'ÂÖ∂‰ªñ' }
                    ],
                    uploadForm: {
                        itemName: '',
                        categoryId: null,
                        startingPrice: null,
                        estimatedPrice: null,
                        itemCode: '',
                        description: '',
                        dimensions: '',
                        material: '',
                        status: 1, // ÈªòËÆ§‰∏äÊû∂
                        minIncrement: null,
                        auctionDuration: 60,
                        startTime: null,
                        endTime: null
                    },
                    // ‰øùËØÅÈáëÂÆ°Ê†∏ÁÆ°ÁêÜ
                    depositAuditTab: 'pending',
                    pendingDeposits: [],
                    depositsLoading: false,
                    depositTypeFilter: null,
                    auditedDeposits: [],
                    auditedDepositsLoading: false,
                    auditedTypeFilter: null,
                    auditedStatusFilter: null,
                    showRejectDialog: false,
                    currentRejectTransaction: null,
                    rejectRemark: '',
                    rejecting: false,
                    
                    // ‰øùËØÅÈáëË¥¶Êà∑ÂàóË°®
                    depositAccounts: [],
                    depositAccountsLoading: false,
                    accountStatusFilter: null,
                    depositStats: {
                        totalAccounts: 0,
                        totalAmount: 0,
                        availableAmount: 0,
                        frozenAmount: 0
                    },
                    showUserTransactionsDialog: false,
                    userTransactions: [],
                    userTransactionsLoading: false,
                    currentAccountUserId: null,
                    
                    // ËÆ¢ÂçïÂèëË¥ßÁÆ°ÁêÜ
                    pendingShipOrders: [],
                    ordersShipLoading: false,
                    showShipDialog: false,
                    showRejectShipDialog: false,
                    currentShipOrder: {},
                    currentRejectShipOrder: {},
                    shipForm: {
                        logisticsCompany: '',
                        trackingNumber: '',
                        remark: ''
                    },
                    shipping: false,
                    rejectShipReason: '',
                    rejectShipDetail: '',
                    rejectingShip: false,
                    
                    // ÂÆ°ËÆ°Êó•ÂøóÁÆ°ÁêÜ
                    auditLogs: [],
                    auditLogsLoading: false,
                    auditLogFilter: {
                        userId: null,
                        operationType: '',
                        module: '',
                        success: null
                    },
                    auditLogPageNum: 1,
                    auditLogPageSize: 20,
                    auditLogTotal: 0,
                    showLogDetailDialog: false,
                    currentLog: null,
                    
                    // ÂèÇÊãçÈ°ªÁü•ÁÆ°ÁêÜ
                    noticeCategories: [],
                    // Â∑≤ÁßªÈô§Êù°ÁõÆÊ®°Âºè
                    currentCategory: null,
                    categoryDialogVisible: false,
                    categoryForm: { id: null, name: '', sortOrder: 0, enabled: 1 },
                    itemDialogVisible: false,
                    itemForm: { id: null, categoryId: null, title: '', contentHtml: '', sortOrder: 0, enabled: 1 },
                    
                    // Á≥ªÁªüÈÖçÁΩÆÁÆ°ÁêÜ
                    configList: [],
                    configLoading: false,
                    configCategories: [],
                    configFilter: {
                        category: '',
                        keyword: ''
                    },
                    configDialogVisible: false,
                    configForm: {
                        id: null,
                        configKey: '',
                        configValue: '',
                        configType: 'STRING',
                        description: '',
                        isSystem: 0,
                        isEditable: 1
                    },
                    
                    // Áî®Êà∑ÁÆ°ÁêÜ
                    userList: [],
                    userLoading: false,
                    userStats: {
                        totalCount: 0,
                        onlineCount: 0,
                        offlineCount: 0
                    },
                    userPagination: {
                        pageNum: 1,
                        pageSize: 10,
                        total: 0
                    },
                    uploadRules: {
                        itemName: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•ÊãçÂìÅÂêçÁß∞', trigger: 'blur' },
                            { min: 2, max: 100, message: 'ÊãçÂìÅÂêçÁß∞ÈïøÂ∫¶Âú® 2 Âà∞ 100 ‰∏™Â≠óÁ¨¶', trigger: 'blur' }
                        ],
                        categoryId: [
                            { required: true, message: 'ËØ∑ÈÄâÊã©ÊãçÂìÅÂàÜÁ±ª', trigger: 'change' }
                        ],
                        startingPrice: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•Ëµ∑Êãç‰ª∑', trigger: 'blur' },
                            { type: 'number', min: 0, message: 'Ëµ∑Êãç‰ª∑ÂøÖÈ°ªÂ§ß‰∫éÁ≠â‰∫é0', trigger: 'blur' }
                        ],
                        estimatedPrice: [
                            { type: 'number', min: 0, message: '‰º∞‰ª∑ÂøÖÈ°ªÂ§ß‰∫éÁ≠â‰∫é0', trigger: 'blur' }
                        ],
                        itemCode: [
                            { min: 0, max: 50, message: 'ÁºñÂè∑ÈïøÂ∫¶‰∏çË∂ÖËøá50‰∏™Â≠óÁ¨¶', trigger: 'blur' }
                        ],
                        description: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•ÊãçÂìÅÊèèËø∞', trigger: 'blur' },
                            { min: 10, max: 1000, message: 'ÊãçÂìÅÊèèËø∞ÈïøÂ∫¶Âú® 10 Âà∞ 1000 ‰∏™Â≠óÁ¨¶', trigger: 'blur' }
                        ]
                    },
                    // ÊãçÂçñ‰ºöÁõ∏ÂÖ≥Êï∞ÊçÆ
                    sessions: [],
                    sessionsLoading: false,
                    sessionsPage: 1,
                    sessionsPageSize: 10,
                    sessionsTotal: 0,
                    sessionSearchForm: {
                        sessionName: '',
                        status: ''
                    },
                    creating: false,
                    showItemSelector: false,
                    selectedItems: [],
                    availableItems: [],
                    tempSelectedItems: [], // ‰∏¥Êó∂ÈÄâÊã©ÁöÑÊãçÂìÅ
                    showItemEditDialog: false,
                    editingItem: false,
                    editItemForm: {
                        id: null,
                        itemName: '',
                        categoryId: null,
                        startingPrice: null,
                        itemCode: '',
                        estimatedPrice: null,
                        dimensions: '',
                        material: '',
                        description: '',
                        status: 1,  // Êï∞Â≠óÁ±ªÂûãÔºö0-‰∏ãÊû∂Ôºå1-‰∏äÊû∂
                        images: '',
                        imageList: []
                    },
                    editImageFiles: [],
                    editImageFileList: [],
                    editItemRules: {
                        itemName: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•ÊãçÂìÅÂêçÁß∞', trigger: 'blur' },
                            { min: 2, max: 100, message: 'ÊãçÂìÅÂêçÁß∞ÈïøÂ∫¶Âú® 2 Âà∞ 100 ‰∏™Â≠óÁ¨¶', trigger: 'blur' }
                        ],
                        itemCode: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•ÊãçÂìÅÁºñÂè∑', trigger: 'blur' },
                            { min: 1, max: 50, message: 'ÁºñÂè∑ÈïøÂ∫¶‰∏çË∂ÖËøá50‰∏™Â≠óÁ¨¶', trigger: 'blur' }
                        ],
                        categoryId: [
                            { required: true, message: 'ËØ∑ÈÄâÊã©ÊãçÂìÅÂàÜÁ±ª', trigger: 'change' }
                        ],
                        startingPrice: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•Ëµ∑Êãç‰ª∑', trigger: 'blur' },
                            { type: 'number', min: 0, message: 'Ëµ∑Êãç‰ª∑ÂøÖÈ°ªÂ§ß‰∫éÁ≠â‰∫é0', trigger: 'blur' }
                        ],
                        description: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•ÊãçÂìÅÊèèËø∞', trigger: 'blur' },
                            { min: 10, max: 1000, message: 'ÊãçÂìÅÊèèËø∞ÈïøÂ∫¶Âú® 10 Âà∞ 1000 ‰∏™Â≠óÁ¨¶', trigger: 'blur' }
                        ],
                        status: [
                            { required: true, message: 'ËØ∑ÈÄâÊã©‰∏äÊû∂Áä∂ÊÄÅ', trigger: 'change' }
                        ]
                    },
                    showSessionEditDialog: false,
                    editingSession: false,
                    editSessionForm: {
                        id: null,
                        sessionName: '',
                        sessionType: null,
                        description: '',
                        startTime: null,
                        endTime: null,
                        depositRatio: 0.1,
                        commissionRatio: 0.05,
                        isAuthentic: false,
                        isFreeShipping: false,
                        isReturnable: false,
                        rules: '',
                        imageList: [],
                        _newCoverFiles: [],
                        selectedItems: []  // Â∑≤ÈÄâÊã©ÁöÑÊãçÂìÅÂàóË°®
                    },
                    editSessionRules: {
                        sessionName: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•ÊãçÂçñ‰ºöÂêçÁß∞', trigger: 'blur' },
                            { min: 2, max: 100, message: 'ÊãçÂçñ‰ºöÂêçÁß∞ÈïøÂ∫¶Âú® 2 Âà∞ 100 ‰∏™Â≠óÁ¨¶', trigger: 'blur' }
                        ],
                        sessionType: [
                            { required: true, message: 'ËØ∑ÈÄâÊã©ÊãçÂçñ‰ºöÁ±ªÂûã', trigger: 'change' }
                        ],
                        description: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•ÊãçÂçñ‰ºöÊèèËø∞', trigger: 'blur' },
                            { min: 10, max: 1000, message: 'ÊãçÂçñ‰ºöÊèèËø∞ÈïøÂ∫¶Âú® 10 Âà∞ 1000 ‰∏™Â≠óÁ¨¶', trigger: 'blur' }
                        ],
                        startTime: [
                            { required: true, message: 'ËØ∑ÈÄâÊã©ÂºÄÂßãÊó∂Èó¥', trigger: 'change' }
                        ],
                        endTime: [
                            { required: true, message: 'ËØ∑ÈÄâÊã©ÁªìÊùüÊó∂Èó¥', trigger: 'change' }
                        ],
                        depositRatio: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•‰øùËØÅÈáëÊØî‰æã', trigger: 'blur' },
                            { type: 'number', min: 0, max: 1, message: '‰øùËØÅÈáëÊØî‰æãÂøÖÈ°ªÂú® 0 Âà∞ 1 ‰πãÈó¥', trigger: 'blur' }
                        ],
                        commissionRatio: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•‰Ω£ÈáëÊØî‰æã', trigger: 'blur' },
                            { type: 'number', min: 0, max: 1, message: '‰Ω£ÈáëÊØî‰æãÂøÖÈ°ªÂú® 0 Âà∞ 1 ‰πãÈó¥', trigger: 'blur' }
                        ],
                    },
                    sessionForm: {
                        sessionName: '',
                        sessionType: null,
                        description: '',
                        startTime: null,
                        endTime: null,
                        depositRatio: 0.1,  // ÈªòËÆ§10%
                        commissionRatio: 0.05,  // ÈªòËÆ§5%
                        isAuthentic: false,  // ÈªòËÆ§‰∏ç‰øùÁúü
                        isFreeShipping: false,  // ÈªòËÆ§‰∏çÂåÖÈÇÆ
                        isReturnable: false,  // ÈªòËÆ§‰∏çÊîØÊåÅÈÄÄË¥ß
                        rules: ''
                    },
                    sessionRules: {
                        sessionName: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•ÊãçÂçñ‰ºöÂêçÁß∞', trigger: 'blur' },
                            { min: 2, max: 100, message: 'ÊãçÂçñ‰ºöÂêçÁß∞ÈïøÂ∫¶Âú® 2 Âà∞ 100 ‰∏™Â≠óÁ¨¶', trigger: 'blur' }
                        ],
                        sessionType: [
                            { required: true, message: 'ËØ∑ÈÄâÊã©ÊãçÂçñ‰ºöÁ±ªÂûã', trigger: 'change' }
                        ],
                        description: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•ÊãçÂçñ‰ºöÊèèËø∞', trigger: 'blur' },
                            { min: 10, max: 1000, message: 'ÊãçÂçñ‰ºöÊèèËø∞ÈïøÂ∫¶Âú® 10 Âà∞ 1000 ‰∏™Â≠óÁ¨¶', trigger: 'blur' }
                        ],
                        startTime: [
                            { required: true, message: 'ËØ∑ÈÄâÊã©ÂºÄÂßãÊó∂Èó¥', trigger: 'change' }
                        ],
                        endTime: [
                            { required: true, message: 'ËØ∑ÈÄâÊã©ÁªìÊùüÊó∂Èó¥', trigger: 'change' }
                        ],
                        depositRatio: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•‰øùËØÅÈáëÊØî‰æã', trigger: 'blur' },
                            { type: 'number', min: 0, max: 1, message: '‰øùËØÅÈáëÊØî‰æãÂøÖÈ°ªÂú® 0 Âà∞ 1 ‰πãÈó¥', trigger: 'blur' }
                        ],
                        commissionRatio: [
                            { required: true, message: 'ËØ∑ËæìÂÖ•‰Ω£ÈáëÊØî‰æã', trigger: 'blur' },
                            { type: 'number', min: 0, max: 1, message: '‰Ω£ÈáëÊØî‰æãÂøÖÈ°ªÂú® 0 Âà∞ 1 ‰πãÈó¥', trigger: 'blur' }
                        ],
                    }
                }
            },
            computed: {
                // Âú®Á∫øÁéáËÆ°ÁÆó
                onlineRate() {
                    if (this.userStats.totalCount === 0) return 0;
                    return Math.round((this.userStats.onlineCount / this.userStats.totalCount) * 100);
                }
            },
            mounted() {
                this.setupAxiosInterceptors();
                this.checkLoginStatus();
                // ÂàùÂßãÂåñÊøÄÊ¥ªËèúÂçïÔºö‰ºòÂÖà‰ΩøÁî® URL HashÔºàÂ¶Ç #/itemsÔºâÔºåÂê¶ÂàôÈªòËÆ§‰ª™Ë°®Áõò
                const hash = window.location.hash?.replace('#/', '') || 'dashboard';
                this.activeMenu = hash;
                this.updateBreadcrumb(this.activeMenu);
                
                this.loadStats();
                if (this.activeMenu === 'items') this.loadItems();
                if (this.activeMenu === 'sessions') this.loadSessions();
                if (this.activeMenu === 'notices') this.loadNoticeCategories();
                if (this.activeMenu === 'config') this.loadConfigs();
                // ËØªÂèñ‰∏ä‰º†Êï∞Èáè‰∏äÈôêÈÖçÁΩÆ
                this.fetchUploadLimits && this.fetchUploadLimits();
            },
            methods: {
                // ===== ÈÄöÁî®ÂõæÁâáÂ§ÑÁêÜÊñπÊ≥ïÔºàÊãçÂìÅ/‰ºöÂú∫Â§çÁî®Ôºâ =====
                fetchUploadLimits() {
                    axios.get('/api/admin/configs?keyword=upload.max').then(res => {
                        const list = res.data?.data || [];
                        const findVal = key => {
                            const it = list.find(x => x.configKey === key);
                            return it ? parseInt(it.configValue, 10) : NaN;
                        };
                        const itemMax = findVal('upload.max.item.images');
                        const sessionMax = findVal('upload.max.session.images');
                        if (!isNaN(itemMax) && itemMax > 0) this.maxItemImages = itemMax;
                        if (!isNaN(sessionMax) && sessionMax > 0) this.maxSessionImages = sessionMax;
                    }).catch(()=>{});
                },
                commonAddFiles(files, targetList, collector, max) {
                    const arr = Array.from(files || []);
                    for (const f of arr) {
                        if (targetList.length >= max) {
                            ElMessage.warning(`ÊúÄÂ§öÂè™ËÉΩ‰∏ä‰º† ${max} Âº†ÂõæÁâá`);
                            break;
                        }
                        if (!f || f.size === 0) continue;
                        if (collector) collector.push(f);
                        const reader = new FileReader();
                        reader.onload = () => {
                            targetList.push(reader.result);
                            this.$forceUpdate();
                        };
                        reader.readAsDataURL(f);
                    }
                },
                commonRemoveImage(targetList, idx) {
                    if (!targetList) return;
                    if (idx < 0 || idx >= targetList.length) return;
                    targetList.splice(idx, 1);
                    this.$forceUpdate();
                },
                // Ê†ºÂºèÂåñÊó•Êúü‰∏∫ÂêéÁ´ØÂèØËß£ÊûêÁöÑÂ≠óÁ¨¶‰∏≤
                formatDateTime(date) {
                    if (!date) return null;
                    const d = new Date(date);
                    const pad = (n) => (n < 10 ? '0' + n : '' + n);
                    const yyyy = d.getFullYear();
                    const MM = pad(d.getMonth() + 1);
                    const dd = pad(d.getDate());
                    const HH = pad(d.getHours());
                    const mm = pad(d.getMinutes());
                    const ss = pad(d.getSeconds());
                    return `${yyyy}-${MM}-${dd} ${HH}:${mm}:${ss}`;
                },
                    extractFirstImage(images) {
                        if (!images) return null;
                        try {
                            const arr = JSON.parse(images);
                            return Array.isArray(arr) && arr.length > 0 ? arr[0] : null;
                        } catch (e) {
                            return null;
                        }
                    },
                // Ë∑≥ËΩ¨Âà∞ÊãçÂìÅÁÆ°ÁêÜÈ°µÈù¢
                goToItems() {
                    window.location.href = '/auction/admin/items';
                },
                
                // Ë∑≥ËΩ¨Âà∞ÊãçÂçñ‰ºöÁÆ°ÁêÜÈ°µÈù¢
                goToSessions() {
                    window.location.href = '/auction/admin/sessions';
                },
                
                // ËÆæÁΩÆ axios Êã¶Êà™Âô®
                setupAxiosInterceptors() {
                    // ËØ∑Ê±ÇÊã¶Êà™Âô® - Âú®ÊØèÊ¨°ËØ∑Ê±ÇÂâçÊ∑ªÂä† token
                    axios.interceptors.request.use(
                        config => {
                            const token = localStorage.getItem('accessToken');
                            if (token) {
                                config.headers.Authorization = `Bearer ${token}`;
                            }
                            return config;
                        },
                        error => {
                            return Promise.reject(error);
                        }
                    );
                    
                    // ÂìçÂ∫îÊã¶Êà™Âô® - Â§ÑÁêÜ 401 ÈîôËØØÂíå token Âà∑Êñ∞
                    axios.interceptors.response.use(
                        response => response,
                        async error => {
                            const originalRequest = error.config;
                            
                            // Â¶ÇÊûúÊòØ 401 ÈîôËØØ‰∏îËøòÊ≤°ÊúâÈáçËØïËøá
                            if (error.response && error.response.status === 401 && !originalRequest._retry) {
                                originalRequest._retry = true;
                                
                                const refreshToken = localStorage.getItem('refreshToken');
                                if (refreshToken) {
                                    try {
                                        // Â∞ùËØïÂà∑Êñ∞ token
                                        const response = await axios.post('/api/auth/refresh', { refreshToken });
                                        if (response.data.code === 200) {
                                            const newAccessToken = response.data.data.accessToken;
                                            localStorage.setItem('accessToken', newAccessToken);
                                            
                                            // ÈáçÊñ∞ËÆæÁΩÆËØ∑Ê±ÇÂ§¥Âπ∂ÈáçËØïÂéüËØ∑Ê±Ç
                                            originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;
                                            return axios.request(originalRequest);
                                        }
                                    } catch (e) {
                                        console.error('Token Âà∑Êñ∞Â§±Ë¥•:', e);
                                    }
                                }
                                
                                // Âà∑Êñ∞Â§±Ë¥•ÔºåÊ∏ÖÈô§ token Âπ∂Ë∑≥ËΩ¨ÁôªÂΩïÈ°µ
                                localStorage.removeItem('accessToken');
                                localStorage.removeItem('refreshToken');
                                ElMessage.error('ÁôªÂΩïÂ∑≤ËøáÊúüÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï');
                                window.location.href = '/auction/login';
                            }
                            
                            return Promise.reject(error);
                        }
                    );
                },
                
                // Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅÔºàÊ∑∑ÂêàÊ®°ÂºèÔºâ
                checkLoginStatus() {
                    const accessToken = localStorage.getItem('accessToken');
                    const refreshToken = localStorage.getItem('refreshToken');
                    
                    if (!accessToken || !refreshToken) {
                        ElMessage.warning('ËØ∑ÂÖàÁôªÂΩï');
                        window.location.href = '/auction/login';
                        return;
                    }
                },
                
                // Âä†ËΩΩÁªüËÆ°Êï∞ÊçÆÔºà‰ª™Ë°®ÁõòÊÄªËßàÔºâ
                async loadStats() {
                    try {
                        const res = await axios.get('/api/admin/dashboard/overview');
                        const data = res.data?.data || {};
                        this.stats.totalItems = data.totalItems ?? this.stats.totalItems;
                        this.stats.totalSessions = data.totalSessions ?? this.stats.totalSessions;
                        this.stats.totalUsers = data.totalUsers ?? this.stats.totalUsers;
                        this.stats.totalBids = data.totalBids ?? this.stats.totalBids;
                    } catch (error) {
                        console.error('Âä†ËΩΩÁªüËÆ°Êï∞ÊçÆÂ§±Ë¥•:', error);
                    }
                },
                
                
                
                // Âä†ËΩΩÊãçÂìÅÂàóË°®
                async loadItems() {
                    this.itemsLoading = true;
                    try {
                        const params = {
                            page: this.itemsPage,
                            pageSize: this.itemsPageSize,
                            ...this.itemSearchForm
                        };
                        
                        const response = await axios.get('/api/admin/items', { params });
                        if (response.data.success) {
                            // Â§ÑÁêÜÂõæÁâáÊï∞ÊçÆ
                            this.items = response.data.data.map(item => {
                                // Ëß£ÊûêÂõæÁâáÊï∞ÊçÆ
                                let imageList = [];
                                let detailImageList = [];
                                
                                if (item.images) {
                                    try {
                                        imageList = JSON.parse(item.images);
                                    } catch (e) {
                                        console.warn('Ëß£ÊûêÊãçÂìÅÂõæÁâáÂ§±Ë¥•:', e);
                                    }
                                }
                                
                                if (item.detailImages) {
                                    try {
                                        detailImageList = JSON.parse(item.detailImages);
                                    } catch (e) {
                                        console.warn('Ëß£ÊûêÊãçÂìÅËØ¶ÊÉÖÂõæÁâáÂ§±Ë¥•:', e);
                                    }
                                }
                                
                                return {
                                    ...item,
                                    imageList,
                                    detailImageList
                                };
                            });
                            this.itemsTotal = response.data.total || 0;
                        }
                    } catch (error) {
                        console.error('Âä†ËΩΩÊãçÂìÅÂàóË°®Â§±Ë¥•:', error);
                        ElMessage.error('Âä†ËΩΩÊãçÂìÅÂàóË°®Â§±Ë¥•');
                    } finally {
                        this.itemsLoading = false;
                    }
                },
                
                // ÊêúÁ¥¢ÊãçÂìÅ
                searchItems() {
                    this.itemsPage = 1;
                    this.loadItems();
                },
                
                // ÈáçÁΩÆÊêúÁ¥¢
                resetItemSearch() {
                    this.itemSearchForm = {
                        itemName: '',
                        status: ''
                    };
                    this.itemsPage = 1;
                    this.loadItems();
                },
                
                // ÂàÜÈ°µÂ§ßÂ∞èÊîπÂèò
                handleItemsSizeChange(val) {
                    this.itemsPageSize = val;
                    this.itemsPage = 1;
                    this.loadItems();
                },
                
                // ÂΩìÂâçÈ°µÊîπÂèò
                handleItemsCurrentChange(val) {
                    this.itemsPage = val;
                    this.loadItems();
                },

                // ========== ‰øùËØÅÈáëÂÆ°Ê†∏ÁÆ°ÁêÜ ==========
                async loadPendingDeposits() {
                    this.depositsLoading = true;
                    try {
                        const response = await axios.get('/api/admin/deposits/pending', {
                            params: { type: this.depositTypeFilter }
                        });
                        if (response.data.code === 200) {
                            this.pendingDeposits = response.data.data || [];
                            // ÁßªÈô§ÂºπÁ™óÊèêÁ§∫ÔºåÂè™Âú®ÊéßÂà∂Âè∞ËÆ∞ÂΩï
                            // Âä†ËΩΩÊàêÂäü
                        } else {
                            ElMessage.error(response.data.message || 'Âä†ËΩΩÂ§±Ë¥•');
                        }
                    } catch (error) {
                        console.error('Âä†ËΩΩÂæÖÂÆ°Ê†∏ÂàóË°®Â§±Ë¥•:', error);
                        ElMessage.error('Âä†ËΩΩÂ§±Ë¥•');
                    } finally {
                        this.depositsLoading = false;
                    }
                },
                
                async approveDeposit(transaction) {
                    try {
                        await ElMessageBox.confirm(
                            `Á°ÆÂÆöÈÄöËøáËØ•${transaction.transactionType === 1 ? 'ÂÖÖÂÄº' : 'ÊèêÁé∞'}Áî≥ËØ∑ÂêóÔºüÈáëÈ¢ùÔºö¬•${transaction.amount}`,
                            'ÂÆ°Ê†∏Á°ÆËÆ§',
                            {
                                confirmButtonText: 'Á°ÆÂÆöÈÄöËøá',
                                cancelButtonText: 'ÂèñÊ∂à',
                                type: 'success'
                            }
                        );
                        
                        const apiUrl = transaction.transactionType === 1 
                            ? `/api/admin/deposits/${transaction.id}/approve-recharge`
                            : `/api/admin/deposits/${transaction.id}/approve-withdraw`;
                        
                        const response = await axios.post(apiUrl, {
                            remark: 'ÂÆ°Ê†∏ÈÄöËøá'
                        });
                        
                        if (response.data.code === 200) {
                            ElMessage.success('ÂÆ°Ê†∏ÈÄöËøá');
                            this.loadPendingDeposits();
                            // Â¶ÇÊûúÂΩìÂâçÂú®Â∑≤ÂÆ°Ê†∏Ê†áÁ≠æÈ°µÔºå‰πüÂà∑Êñ∞Â∑≤ÂÆ°Ê†∏ÂàóË°®
                            if (this.depositAuditTab === 'audited') {
                                this.loadAuditedDeposits();
                            }
                        } else {
                            ElMessage.error(response.data.message || 'ÂÆ°Ê†∏Â§±Ë¥•');
                        }
                    } catch (error) {
                        if (error !== 'cancel') {
                            console.error('ÂÆ°Ê†∏Â§±Ë¥•:', error);
                            ElMessage.error('ÂÆ°Ê†∏Â§±Ë¥•');
                        }
                    }
                },
                
                openRejectDialog(transaction) {
                    this.currentRejectTransaction = transaction;
                    this.rejectRemark = '';
                    this.showRejectDialog = true;
                },
                
                async confirmReject() {
                    if (!this.rejectRemark || this.rejectRemark.trim() === '') {
                        ElMessage.error('ËØ∑Â°´ÂÜôÊãíÁªùÂéüÂõ†');
                        return;
                    }
                    
                    this.rejecting = true;
                    try {
                        const response = await axios.post(
                            `/api/admin/deposits/${this.currentRejectTransaction.id}/reject`,
                            { remark: this.rejectRemark }
                        );
                        
                        if (response.data.code === 200) {
                            ElMessage.success('Â∑≤ÊãíÁªùËØ•Áî≥ËØ∑');
                            this.showRejectDialog = false;
                            this.loadPendingDeposits();
                            // Â¶ÇÊûúÂΩìÂâçÂú®Â∑≤ÂÆ°Ê†∏Ê†áÁ≠æÈ°µÔºå‰πüÂà∑Êñ∞Â∑≤ÂÆ°Ê†∏ÂàóË°®
                            if (this.depositAuditTab === 'audited') {
                                this.loadAuditedDeposits();
                            }
                        } else {
                            ElMessage.error(response.data.message || 'Êìç‰ΩúÂ§±Ë¥•');
                        }
                    } catch (error) {
                        console.error('ÊãíÁªùÂ§±Ë¥•:', error);
                        ElMessage.error('Êìç‰ΩúÂ§±Ë¥•');
                    } finally {
                        this.rejecting = false;
                    }
                },
                
                // Âà∑Êñ∞‰øùËØÅÈáëÂÆ°Ê†∏ÔºàÊ†πÊçÆÂΩìÂâçÊ†áÁ≠æÈ°µÂä†ËΩΩÂØπÂ∫îÊï∞ÊçÆÔºâ
                refreshDepositAudit() {
                    if (this.depositAuditTab === 'pending') {
                        this.loadPendingDeposits();
                    } else {
                        this.loadAuditedDeposits();
                    }
                },
                
                // Ê†áÁ≠æÈ°µÂàáÊç¢
                onDepositAuditTabChange(tab) {
                    if (tab === 'pending') {
                        this.loadPendingDeposits();
                    } else if (tab === 'audited') {
                        this.loadAuditedDeposits();
                    }
                },
                
                // Âä†ËΩΩÂ∑≤ÂÆ°Ê†∏ÁöÑËÆ∞ÂΩï
                async loadAuditedDeposits() {
                    this.auditedDepositsLoading = true;
                    try {
                        const params = {};
                        if (this.auditedTypeFilter !== null) {
                            params.transactionType = this.auditedTypeFilter;
                        }
                        if (this.auditedStatusFilter !== null) {
                            params.status = this.auditedStatusFilter;
                        } else {
                            // Âè™Êü•ËØ¢Â∑≤ÂÆ°Ê†∏ÁöÑÔºàÁä∂ÊÄÅ1ÊàêÂäüÊàñ2Â§±Ë¥•Ôºâ
                            // Â¶ÇÊûúË¶ÅÂêåÊó∂Êü•ËØ¢‰∏§‰∏™Áä∂ÊÄÅÔºåÈúÄË¶ÅÂú®ÂêéÁ´ØÊîØÊåÅ
                            // ËøôÈáåÊàë‰ª¨ÂàÜÂà´Êü•ËØ¢ÁÑ∂ÂêéÂêàÂπ∂
                        }
                        
                        const response = await axios.get('/api/admin/deposit/transactions', { params });
                        if (response.data.code === 200) {
                            let allTransactions = response.data.data || [];
                            // ËøáÊª§Âá∫Â∑≤ÂÆ°Ê†∏ÁöÑÔºàÁä∂ÊÄÅ1Êàñ2ÔºâÔºåÊéíÈô§ÂæÖÂÆ°Ê†∏Ôºà0ÔºâÂíåÂ§ÑÁêÜ‰∏≠Ôºà3Ôºâ
                            this.auditedDeposits = allTransactions.filter(t => {
                                // Âè™ÊòæÁ§∫ÂÖÖÂÄº(1)ÂíåÊèêÁé∞(6)
                                const isDepositOrWithdraw = t.transactionType === 1 || t.transactionType === 6;
                                // Âè™ÊòæÁ§∫Â∑≤ÂÆ°Ê†∏ÁöÑÁä∂ÊÄÅÔºà1ÊàêÂäüÊàñ2Â§±Ë¥•Ôºâ
                                const isAudited = t.status === 1 || t.status === 2;
                                
                                let matchType = true;
                                if (this.auditedTypeFilter !== null) {
                                    matchType = t.transactionType === this.auditedTypeFilter;
                                }
                                
                                let matchStatus = true;
                                if (this.auditedStatusFilter !== null) {
                                    matchStatus = t.status === this.auditedStatusFilter;
                                }
                                
                                return isDepositOrWithdraw && isAudited && matchType && matchStatus;
                            });
                        } else {
                            ElMessage.error(response.data.message || 'Âä†ËΩΩÂ§±Ë¥•');
                        }
                    } catch (error) {
                        console.error('Âä†ËΩΩÂ∑≤ÂÆ°Ê†∏ËÆ∞ÂΩïÂ§±Ë¥•:', error);
                        ElMessage.error('Âä†ËΩΩÂ§±Ë¥•');
                    } finally {
                        this.auditedDepositsLoading = false;
                    }
                },
                
                // ========== ‰øùËØÅÈáëË¥¶Êà∑ÂàóË°® ==========
                async loadDepositAccounts() {
                    this.depositAccountsLoading = true;
                    try {
                        const params = {};
                        if (this.accountStatusFilter !== null) {
                            params.status = this.accountStatusFilter;
                        }
                        
                        const response = await axios.get('/api/admin/deposit/accounts', { params });
                        if (response.data.code === 200) {
                            this.depositAccounts = response.data.data || [];
                            
                            // ËÆ°ÁÆóÁªüËÆ°Êï∞ÊçÆ
                            this.depositStats.totalAccounts = this.depositAccounts.length;
                            this.depositStats.totalAmount = this.depositAccounts.reduce((sum, acc) => 
                                sum + Number(acc.totalAmount || 0), 0);
                            this.depositStats.availableAmount = this.depositAccounts.reduce((sum, acc) => 
                                sum + Number(acc.availableAmount || 0), 0);
                            this.depositStats.frozenAmount = this.depositAccounts.reduce((sum, acc) => 
                                sum + Number(acc.frozenAmount || 0), 0);
                        } else {
                            ElMessage.error(response.data.message || 'Âä†ËΩΩÂ§±Ë¥•');
                        }
                    } catch (error) {
                        console.error('Âä†ËΩΩ‰øùËØÅÈáëË¥¶Êà∑ÂàóË°®Â§±Ë¥•:', error);
                        ElMessage.error('Âä†ËΩΩÂ§±Ë¥•');
                    } finally {
                        this.depositAccountsLoading = false;
                    }
                },
                
                async viewUserTransactions(account) {
                    this.currentAccountUserId = account.userId;
                    this.showUserTransactionsDialog = true;
                    this.userTransactionsLoading = true;
                    
                    try {
                        const response = await axios.get('/api/admin/deposit/transactions', {
                            params: { userId: account.userId }
                        });
                        if (response.data.code === 200) {
                            this.userTransactions = response.data.data || [];
                        } else {
                            ElMessage.error(response.data.message || 'Âä†ËΩΩÂ§±Ë¥•');
                        }
                    } catch (error) {
                        console.error('Âä†ËΩΩÁî®Êà∑‰∫§ÊòìËÆ∞ÂΩïÂ§±Ë¥•:', error);
                        ElMessage.error('Âä†ËΩΩÂ§±Ë¥•');
                    } finally {
                        this.userTransactionsLoading = false;
                    }
                },
                
                getTransactionTypeTag(type) {
                    const tagMap = {
                        1: 'success',  // ÂÖÖÂÄº
                        2: 'warning',  // ÂÜªÁªì
                        3: 'info',     // Ëß£ÂÜª
                        4: 'danger',   // Êâ£Èô§
                        5: 'success',  // ÈÄÄËøò
                        6: 'warning'   // ÊèêÁé∞
                    };
                    return tagMap[type] || 'info';
                },
                
                getTransactionTypeName(type) {
                    const nameMap = {
                        1: 'ÂÖÖÂÄº',
                        2: 'ÂÜªÁªì',
                        3: 'Ëß£ÂÜª',
                        4: 'Êâ£Èô§',
                        5: 'ÈÄÄËøò',
                        6: 'ÊèêÁé∞'
                    };
                    return nameMap[type] || 'Êú™Áü•';
                },
                
                // ÂÜªÁªì‰øùËØÅÈáëË¥¶Êà∑
                async freezeAccount(account) {
                    try {
                        await ElMessageBox.confirm(
                            `Á°ÆÂÆöË¶ÅÂÜªÁªìÁî®Êà∑${account.userId}ÁöÑ‰øùËØÅÈáëË¥¶Êà∑ÂêóÔºü<br><br>` +
                            `ÂÜªÁªìÂêéËØ•Áî®Êà∑Â∞ÜÊó†Ê≥ïÔºö<br>` +
                            `‚Ä¢ ÂÖÖÂÄº‰øùËØÅÈáë<br>` +
                            `‚Ä¢ ÊèêÁé∞‰øùËØÅÈáë<br>` +
                            `‚Ä¢ ÂèÇ‰∏éÁ´ûÊãç<br>` +
                            `‚Ä¢ ËøõË°å‰ªª‰Ωï‰øùËØÅÈáëÊìç‰Ωú<br><br>` +
                            `<span style="color: #E6A23C; font-weight: bold;">Ê≠§Êìç‰ΩúÁõ∏ÂΩì‰∫éÂ∞ÜÁî®Êà∑ÊãâÂÖ•ÈªëÂêçÂçïÔºÅ</span>`,
                            'ÂÜªÁªìË¥¶Êà∑Á°ÆËÆ§',
                            {
                                confirmButtonText: 'Á°ÆÂÆöÂÜªÁªì',
                                cancelButtonText: 'ÂèñÊ∂à',
                                type: 'warning',
                                dangerouslyUseHTMLString: true,
                                confirmButtonClass: 'el-button--danger'
                            }
                        );
                        
                        const response = await axios.post(`/api/admin/risk/deposit-accounts/${account.id}/freeze`, {
                            reason: 'ÁÆ°ÁêÜÂëòÊâãÂä®ÂÜªÁªìË¥¶Êà∑'
                        });
                        
                        if (response.data.code === 200) {
                            ElMessage.success('Ë¥¶Êà∑Â∑≤ÂÜªÁªì');
                            this.loadDepositAccounts();
                        } else {
                            ElMessage.error(response.data.message || 'ÂÜªÁªìÂ§±Ë¥•');
                        }
                    } catch (e) {
                        if (e !== 'cancel') {
                            console.error('ÂÜªÁªìË¥¶Êà∑Â§±Ë¥•:', e);
                            ElMessage.error('ÂÜªÁªìÂ§±Ë¥•Ôºö' + (e.message || 'Êú™Áü•ÈîôËØØ'));
                        }
                    }
                },
                
                // Ëß£ÂÜª‰øùËØÅÈáëË¥¶Êà∑
                async unfreezeAccount(account) {
                    try {
                        await ElMessageBox.confirm(
                            `Á°ÆÂÆöË¶ÅËß£ÂÜªÁî®Êà∑${account.userId}ÁöÑ‰øùËØÅÈáëË¥¶Êà∑ÂêóÔºü<br><br>` +
                            `Ëß£ÂÜªÂêéËØ•Áî®Êà∑Â∞ÜÊÅ¢Â§çÊâÄÊúâ‰øùËØÅÈáëÊìç‰ΩúÊùÉÈôê„ÄÇ`,
                            'Ëß£ÂÜªË¥¶Êà∑Á°ÆËÆ§',
                            {
                                confirmButtonText: 'Á°ÆÂÆöËß£ÂÜª',
                                cancelButtonText: 'ÂèñÊ∂à',
                                type: 'info',
                                dangerouslyUseHTMLString: true
                            }
                        );
                        
                        const response = await axios.post(`/api/admin/risk/deposit-accounts/${account.id}/unfreeze`, {
                            reason: 'ÁÆ°ÁêÜÂëòÊâãÂä®Ëß£ÂÜªË¥¶Êà∑'
                        });
                        
                        if (response.data.code === 200) {
                            ElMessage.success('Ë¥¶Êà∑Â∑≤Ëß£ÂÜª');
                            this.loadDepositAccounts();
                        } else {
                            ElMessage.error(response.data.message || 'Ëß£ÂÜªÂ§±Ë¥•');
                        }
                    } catch (e) {
                        if (e !== 'cancel') {
                            console.error('Ëß£ÂÜªË¥¶Êà∑Â§±Ë¥•:', e);
                            ElMessage.error('Ëß£ÂÜªÂ§±Ë¥•Ôºö' + (e.message || 'Êú™Áü•ÈîôËØØ'));
                        }
                    }
                },
                
                // ========== ËÆ¢ÂçïÂèëË¥ßÁÆ°ÁêÜ ==========
                async loadPendingShipOrders() {
                    this.ordersShipLoading = true;
                    try {
                        const response = await axios.get('/api/admin/orders/pending-ship');
                        if (response.data.code === 200) {
                            this.pendingShipOrders = response.data.data || [];
                            // Âä†ËΩΩÊàêÂäü
                        } else {
                            ElMessage.error(response.data.message || 'Âä†ËΩΩÂ§±Ë¥•');
                        }
                    } catch (error) {
                        console.error('Âä†ËΩΩÂæÖÂèëË¥ßËÆ¢ÂçïÂ§±Ë¥•:', error);
                        ElMessage.error('Âä†ËΩΩÂ§±Ë¥•');
                    } finally {
                        this.ordersShipLoading = false;
                    }
                },
                
                openShipDialog(order) {
                    this.currentShipOrder = order;
                    this.shipForm = {
                        logisticsCompany: '',
                        trackingNumber: '',
                        remark: ''
                    };
                    this.showShipDialog = true;
                },
                
                async confirmShip() {
                    if (!this.shipForm.logisticsCompany) {
                        ElMessage.error('ËØ∑ÈÄâÊã©Áâ©ÊµÅÂÖ¨Âè∏');
                        return;
                    }
                    if (!this.shipForm.trackingNumber || this.shipForm.trackingNumber.trim() === '') {
                        ElMessage.error('ËØ∑ËæìÂÖ•ËøêÂçïÂè∑');
                        return;
                    }
                    
                    this.shipping = true;
                    try {
                        const response = await axios.post(`/api/admin/orders/${this.currentShipOrder.id}/ship`, this.shipForm);
                        
                        if (response.data.code === 200) {
                            ElMessage.success('ÂèëË¥ßÊàêÂäü');
                            this.showShipDialog = false;
                            this.loadPendingShipOrders();
                        } else {
                            ElMessage.error(response.data.message || 'ÂèëË¥ßÂ§±Ë¥•');
                        }
                    } catch (error) {
                        console.error('ÂèëË¥ßÂ§±Ë¥•:', error);
                        ElMessage.error('ÂèëË¥ßÂ§±Ë¥•');
                    } finally {
                        this.shipping = false;
                    }
                },
                
                openRejectShipDialog(order) {
                    this.currentRejectShipOrder = order;
                    this.rejectShipReason = '';
                    this.rejectShipDetail = '';
                    this.showRejectShipDialog = true;
                },
                
                async confirmRejectShip() {
                    if (!this.rejectShipReason) {
                        ElMessage.error('ËØ∑ÈÄâÊã©ÊãíÁªùÂéüÂõ†');
                        return;
                    }
                    
                    try {
                        await ElMessageBox.confirm(
                            `Á°ÆÂÆöÊãíÁªùÂèëË¥ßÂêóÔºüÂ∞ÜÈÄÄÊ¨æ ¬•${this.currentRejectShipOrder.totalAmount} Áªô‰π∞ÂÆ∂`,
                            'ÊãíÁªùÂèëË¥ßÁ°ÆËÆ§',
                            {
                                confirmButtonText: 'Á°ÆÂÆöÊãíÁªù',
                                cancelButtonText: 'ÂèñÊ∂à',
                                type: 'warning'
                            }
                        );
                        
                        this.rejectingShip = true;
                        const fullReason = this.rejectShipDetail 
                            ? `${this.rejectShipReason}Ôºö${this.rejectShipDetail}`
                            : this.rejectShipReason;
                        
                        const response = await axios.post(
                            `/api/admin/orders/${this.currentRejectShipOrder.id}/reject-shipment`,
                            { reason: fullReason }
                        );
                        
                        if (response.data.code === 200) {
                            ElMessage.success('Â∑≤ÊãíÁªùÂèëË¥ßÂπ∂ÈÄÄÊ¨æ');
                            this.showRejectShipDialog = false;
                            this.loadPendingShipOrders();
                        } else {
                            ElMessage.error(response.data.message || 'Êìç‰ΩúÂ§±Ë¥•');
                        }
                    } catch (error) {
                        if (error !== 'cancel') {
                            console.error('ÊãíÁªùÂèëË¥ßÂ§±Ë¥•:', error);
                            ElMessage.error('Êìç‰ΩúÂ§±Ë¥•');
                        }
                    } finally {
                        this.rejectingShip = false;
                    }
                },
                
                // ========== ÂÆ°ËÆ°Êó•ÂøóÁÆ°ÁêÜ ==========
                async loadAuditLogs() {
                    this.auditLogsLoading = true;
                    try {
                        const response = await axios.get('/api/admin/audit-logs', {
                            params: {
                                userId: this.auditLogFilter.userId || null,
                                operationType: this.auditLogFilter.operationType || null,
                                module: this.auditLogFilter.module || null,
                                success: this.auditLogFilter.success,
                                pageNum: this.auditLogPageNum,
                                pageSize: this.auditLogPageSize
                            }
                        });
                        
                        if (response.data.code === 200) {
                            const result = response.data.data;
                            this.auditLogs = result.list || [];
                            this.auditLogTotal = result.total || 0;
                            // Âä†ËΩΩÊàêÂäü
                        } else {
                            ElMessage.error(response.data.message || 'Âä†ËΩΩÂ§±Ë¥•');
                        }
                    } catch (error) {
                        console.error('Âä†ËΩΩÂÆ°ËÆ°Êó•ÂøóÂ§±Ë¥•:', error);
                        ElMessage.error('Âä†ËΩΩÂ§±Ë¥•');
                    } finally {
                        this.auditLogsLoading = false;
                    }
                },
                
                resetAuditLogFilter() {
                    this.auditLogFilter = {
                        userId: null,
                        operationType: '',
                        module: '',
                        success: null
                    };
                    this.auditLogPageNum = 1;
                    this.loadAuditLogs();
                },
                
                showLogDetail(log) {
                    this.currentLog = log;
                    this.showLogDetailDialog = true;
                },
                
                getOperationTypeText(type) {
                    const typeMap = {
                        'APPROVE': 'ÂÆ°Ê†∏ÈÄöËøá',
                        'REJECT': 'ÂÆ°Ê†∏ÊãíÁªù',
                        'DELETE': 'Âà†Èô§',
                        'CREATE': 'ÂàõÂª∫',
                        'UPDATE': 'Êõ¥Êñ∞',
                        'LOGIN': 'ÁôªÂΩï',
                        'LOGOUT': 'ÁôªÂá∫',
                        'SHIP': 'ÂèëË¥ß',
                        'REFUND': 'ÈÄÄÊ¨æ'
                    };
                    return typeMap[type] || type;
                },
                
                getOperationTypeTag(type) {
                    const tagMap = {
                        'APPROVE': 'success',
                        'REJECT': 'danger',
                        'DELETE': 'danger',
                        'CREATE': 'primary',
                        'UPDATE': 'warning',
                        'LOGIN': 'info',
                        'LOGOUT': 'info',
                        'SHIP': 'success',
                        'REFUND': 'warning'
                    };
                    return tagMap[type] || '';
                },
                
                getModuleText(module) {
                    const moduleMap = {
                        'DEPOSIT': '‰øùËØÅÈáë',
                        'ORDER': 'ËÆ¢Âçï',
                        'ITEM': 'ÊãçÂìÅ',
                        'SESSION': 'ÊãçÂçñ‰ºö',
                        'USER': 'Áî®Êà∑'
                    };
                    return moduleMap[module] || module;
                },
                
                // ========== ÂèÇÊãçÈ°ªÁü• ==========
                async loadNoticeCategories() {
                    try {
                        const res = await axios.get('/api/admin/notices/categories');
                        this.noticeCategories = res.data?.data || [];
                        if (!this.currentCategory && this.noticeCategories.length > 0) {
                            this.onCategorySelect(this.noticeCategories[0]);
                        }
                    } catch (e) {
                        console.error('Âä†ËΩΩÂàÜÁ±ªÂ§±Ë¥•', e);
                    }
                },
                async onCategorySelect(row) {
                    this.currentCategory = row;
                },
                openCreateCategory() {
                    this.categoryForm = { id: null, name: '', code: '', sortOrder: 0, enabled: 1 };
                    this.categoryDialogVisible = true;
                },
                openEditCategory(row) {
                    this.categoryForm = { ...row };
                    this.categoryDialogVisible = true;
                },
                async saveCategory() {
                    try {
                        if (this.categoryForm.id) {
                            await axios.put(`/api/admin/notices/categories/${this.categoryForm.id}`, this.categoryForm);
                        } else {
                            await axios.post('/api/admin/notices/categories', this.categoryForm);
                        }
                        this.categoryDialogVisible = false;
                        this.loadNoticeCategories();
                    } catch (e) {
                        console.error('‰øùÂ≠òÂàÜÁ±ªÂ§±Ë¥•', e);
                    }
                },
                async deleteCategory(row) {
                    try {
                        // Ê∑ªÂä†Âà†Èô§Á°ÆËÆ§ÊèêÁ§∫
                        await ElMessageBox.confirm(
                            `Á°ÆÂÆöË¶ÅÂà†Èô§ÂàÜÁ±ª"${row.name}"ÂêóÔºüÂà†Èô§ÂêéËØ•ÂàÜÁ±ª‰∏ãÁöÑÊâÄÊúâÂÜÖÂÆπÂ∞ÜË¢´Ê∏ÖÁ©∫ÔºåÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§çÔºÅ`,
                            'Âà†Èô§Á°ÆËÆ§',
                            {
                                confirmButtonText: 'Á°ÆÂÆöÂà†Èô§',
                                cancelButtonText: 'ÂèñÊ∂à',
                                type: 'warning',
                                confirmButtonClass: 'el-button--danger'
                            }
                        );
                        
                        // Áî®Êà∑Á°ÆËÆ§ÂêéÊâßË°åÂà†Èô§
                        await axios.delete(`/api/admin/notices/categories/${row.id}`);
                        if (this.currentCategory && this.currentCategory.id === row.id) {
                            this.currentCategory = null;
                            this.noticeItems = [];
                        }
                        ElMessage.success('ÂàÜÁ±ªÂ∑≤Âà†Èô§');
                        this.loadNoticeCategories();
                    } catch (e) {
                        // Â¶ÇÊûúÁî®Êà∑ÁÇπÂáªÂèñÊ∂àÔºå‰ºöÊäõÂá∫'cancel'Ôºå‰∏çÈúÄË¶ÅÊòæÁ§∫ÈîôËØØ
                        if (e !== 'cancel') {
                            console.error('Âà†Èô§ÂàÜÁ±ªÂ§±Ë¥•', e);
                            ElMessage.error('Âà†Èô§Â§±Ë¥•Ôºö' + (e.message || 'Êú™Áü•ÈîôËØØ'));
                        }
                    }
                },
                async saveCategoryContent() {
                    if (!this.currentCategory) return;
                    try {
                        await axios.put(`/api/admin/notices/categories/${this.currentCategory.id}`, {
                            contentHtml: this.currentCategory.contentHtml
                        });
                        ElMessage.success('Â∑≤‰øùÂ≠ò');
                    } catch (e) {
                        console.error('‰øùÂ≠òÂÜÖÂÆπÂ§±Ë¥•', e);
                        ElMessage.error('‰øùÂ≠òÂ§±Ë¥•');
                    }
                },
                triggerInsertImage(target) {
                    this._noticeInsertTarget = target; // 'current' or 'dialog'
                    this.$refs.noticeImageInput && this.$refs.noticeImageInput.click();
                },
                handleInsertImageChange(e) {
                    const file = e.target.files && e.target.files[0];
                    e.target.value = '';
                    if (!file) return;
                    const reader = new FileReader();
                    reader.onload = () => {
                        const base64 = reader.result;
                        const imgTag = `<img src="${base64}" alt="image" />`;
                        if (this._noticeInsertTarget === 'dialog') {
                            this.categoryForm.contentHtml = (this.categoryForm.contentHtml || '') + imgTag;
                        } else {
                            if (!this.currentCategory) return;
                            this.currentCategory.contentHtml = (this.currentCategory.contentHtml || '') + imgTag;
                        }
                        this._noticeInsertTarget = null;
                    };
                    reader.readAsDataURL(file);
                },
                
                // ÁºñËæëÊãçÂìÅ
                editItem(item) {
                    this.editItemForm = {
                        id: item.id,
                        itemName: item.itemName,
                        itemCode: item.itemCode || '',
                        categoryId: item.categoryId,
                        startingPrice: item.startingPrice,
                        estimatedPrice: item.estimatedPrice || null,
                        dimensions: item.dimensions || '',
                        material: item.material || '',
                        description: item.description,
                        status: Number(item.status),  // Á°Æ‰øùstatusÊòØÊï∞Â≠óÁ±ªÂûã
                        images: item.images || '',
                        imageList: item.imageList || []
                    };
                    
                    // Â∞ÜÁé∞ÊúâÂõæÁâáËΩ¨Êç¢‰∏∫Êñá‰ª∂È¢ÑËßàÊ†ºÂºè
                    this.editImageFiles = (item.imageList || []).map((imageUrl, index) => ({
                        file: null,
                        name: `existing-image-${index}.jpg`,
                        preview: imageUrl,
                        isExisting: true
                    }));
                    
                    this.showItemEditDialog = true;
                    
                    console.log('ÁºñËæëÊãçÂìÅÁä∂ÊÄÅ:', item.status, '‚Üí', Number(item.status));  // Ë∞ÉËØïÊó•Âøó
                },
                
                // Âà†Èô§ÊãçÂìÅ
                async deleteItem(item) {
                    try {
                        await ElMessageBox.confirm(
                            `Á°ÆÂÆöË¶ÅÂà†Èô§ÊãçÂìÅ "${item.itemName}" ÂêóÔºü`,
                            'Á°ÆËÆ§Âà†Èô§',
                            {
                                confirmButtonText: 'Á°ÆÂÆö',
                                cancelButtonText: 'ÂèñÊ∂à',
                                type: 'warning'
                            }
                        );
                        
                        const response = await axios.delete(`/api/admin/items/${item.id}`);
                        if (response.data.success) {
                            ElMessage.success('Âà†Èô§ÊàêÂäü');
                            this.loadItems();
                        } else {
                            ElMessage.error(response.data.message || 'Âà†Èô§Â§±Ë¥•');
                        }
                    } catch (error) {
                        if (error !== 'cancel') {
                            console.error('Âà†Èô§ÊãçÂìÅÂ§±Ë¥•:', error);
                            ElMessage.error('Âà†Èô§Â§±Ë¥•');
                        }
                    }
                },

                // ÂàáÊç¢ÊãçÂìÅÁä∂ÊÄÅÔºà‰∏ä‰∏ãÊû∂Ôºâ
                async toggleItemStatus(item) {
                    try {
                        const newStatus = item.status === 1 ? 0 : 1;
                        const action = newStatus === 1 ? '‰∏äÊû∂' : '‰∏ãÊû∂';
                        
                        await ElMessageBox.confirm(
                            `Á°ÆÂÆöË¶Å${action}ÊãçÂìÅ "${item.itemName}" ÂêóÔºü`,
                            `Á°ÆËÆ§${action}`,
                            {
                                confirmButtonText: 'Á°ÆÂÆö',
                                cancelButtonText: 'ÂèñÊ∂à',
                                type: 'warning'
                            }
                        );
                        
                        const response = await axios.post(`/api/admin/items/${item.id}/status`, null, {
                            params: { status: newStatus }
                        });
                        
                        if (response.data.code === 200) {
                            ElMessage.success(`${action}ÊàêÂäü`);
                            this.loadItems();
                        } else {
                            ElMessage.error(response.data.message || `${action}Â§±Ë¥•`);
                        }
                    } catch (error) {
                        if (error !== 'cancel') {
                            console.error('ÂàáÊç¢ÊãçÂìÅÁä∂ÊÄÅÂ§±Ë¥•:', error);
                            ElMessage.error('Êìç‰ΩúÂ§±Ë¥•');
                        }
                    }
                },
                
                // Ëé∑ÂèñÊãçÂìÅÁä∂ÊÄÅÁ±ªÂûã
                getItemStatusType(status) {
                    const typeMap = {
                        0: 'info',   // ‰∏ãÊû∂
                        1: 'success' // ‰∏äÊû∂
                    };
                    return typeMap[status] || 'info';
                },
                
                // Ëé∑ÂèñÊãçÂìÅÁä∂ÊÄÅÊñáÊú¨
                getItemStatusText(status) {
                    const statusMap = {
                        0: '‰∏ãÊû∂',
                        1: '‰∏äÊû∂'
                    };
                    return statusMap[status] || '‰∏ãÊû∂';
                },
                
                // Ëé∑ÂèñÈ°µÈù¢Ê†áÈ¢ò
                getPageTitle() {
                    const titleMap = {
                        'dashboard': '‰ª™Ë°®Êùø',
                        'items': 'ÊãçÂìÅÂàóË°®',
                        'items/add': '‰∏ä‰º†ÊãçÂìÅ',
                        'sessions': 'ÊãçÂçñ‰ºöÂàóË°®',
                        'sessions/add': 'ÂàõÂª∫ÊãçÂçñ‰ºö',
                        'deposits': '‰øùËØÅÈáëÁÆ°ÁêÜ',
                        'orders-ship': 'ËÆ¢ÂçïÂèëË¥ß',
                        'audit-logs': 'ÂÆ°ËÆ°Êó•Âøó'
                    };
                    return titleMap[this.activeMenu] || 'Êú™Áü•È°µÈù¢';
                },
                
                // Ê†ºÂºèÂåñÊó∂Èó¥
                formatTime(time) {
                    if (!time) return '';
                    return new Date(time).toLocaleString('zh-CN');
                },
                
                
                
                // ËèúÂçïÈÄâÊã©
                handleMenuSelect(index) {
                    this.activeMenu = index;
                    this.updateBreadcrumb(index);
                    if (index === 'items') this.loadItems();
                    if (index === 'sessions') this.loadSessions();
                    if (index === 'deposits') this.loadPendingDeposits();
                    if (index === 'deposit-accounts') this.loadDepositAccounts();
                    if (index === 'orders-ship') this.loadPendingShipOrders();
                    if (index === 'audit-logs') this.loadAuditLogs();
                    if (index === 'notices') this.loadNoticeCategories();
                },
                
                // Êõ¥Êñ∞Èù¢ÂåÖÂ±ë
                updateBreadcrumb(menu) {
                    const breadcrumbMap = {
                        'dashboard': [{ name: 'È¶ñÈ°µ', path: 'dashboard' }],
                        'items': [{ name: 'È¶ñÈ°µ', path: 'dashboard' }, { name: 'ÊãçÂìÅÂàóË°®', path: 'items' }],
                        'items/add': [{ name: 'È¶ñÈ°µ', path: 'dashboard' }, { name: 'ÊãçÂìÅÂàóË°®', path: 'items' }, { name: '‰∏ä‰º†ÊãçÂìÅ', path: 'items/add' }],
                        'sessions': [{ name: 'È¶ñÈ°µ', path: 'dashboard' }, { name: 'ÊãçÂçñ‰ºöÂàóË°®', path: 'sessions' }],
                        'sessions/add': [{ name: 'È¶ñÈ°µ', path: 'dashboard' }, { name: 'ÊãçÂçñ‰ºöÂàóË°®', path: 'sessions' }, { name: 'ÂàõÂª∫ÊãçÂçñ‰ºö', path: 'sessions/add' }],
                        'deposits': [{ name: 'È¶ñÈ°µ', path: 'dashboard' }, { name: '‰øùËØÅÈáëÂÆ°Ê†∏', path: 'deposits' }],
                        'deposit-accounts': [{ name: 'È¶ñÈ°µ', path: 'dashboard' }, { name: '‰øùËØÅÈáëË¥¶Êà∑', path: 'deposit-accounts' }],
                        'orders-ship': [{ name: 'È¶ñÈ°µ', path: 'dashboard' }, { name: 'ËÆ¢ÂçïÂèëË¥ß', path: 'orders-ship' }],
                        'audit-logs': [{ name: 'È¶ñÈ°µ', path: 'dashboard' }, { name: 'ÂÆ°ËÆ°Êó•Âøó', path: 'audit-logs' }],
                        'config': [{ name: 'È¶ñÈ°µ', path: 'dashboard' }, { name: 'Á≥ªÁªüÈÖçÁΩÆ', path: 'config' }],
                        'user-management': [{ name: 'È¶ñÈ°µ', path: 'dashboard' }, { name: 'Êï∞ÊçÆÁÆ°ÁêÜ', path: 'user-management' }],
                        'notices': [{ name: 'È¶ñÈ°µ', path: 'dashboard' }, { name: 'ÂèÇÊãçÈ°ªÁü•', path: 'notices' }]
                    };
                    this.breadcrumbList = breadcrumbMap[menu] || [{ name: 'È¶ñÈ°µ', path: 'dashboard' }];
                },
                
                // Ë∑≥ËΩ¨È°µÈù¢
                goToPage(path) {
                    this.activeMenu = path;
                    this.updateBreadcrumb(path);
                    
                    // ÁâπÊÆäÈ°µÈù¢Ë∑≥ËΩ¨ÂíåÊï∞ÊçÆÂä†ËΩΩ
                    if (path === 'dashboard') {
                        this.loadStats();
                    } else if (path === 'items') {
                        this.loadItems();
                    } else if (path === 'sessions') {
                        this.loadSessions();
                    } else if (path === 'deposits') {
                        this.loadPendingDeposits();
                    } else if (path === 'deposit-accounts') {
                        this.loadDepositAccounts();
                    } else if (path === 'orders-ship') {
                        this.loadPendingShipOrders();
                    } else if (path === 'audit-logs') {
                        this.loadAuditLogs();
                    } else if (path === 'notices') {
                        this.loadNoticeCategories();
                    } else if (path === 'config') {
                        this.loadConfigs();
                    } else if (path === 'user-management') {
                        this.loadUsers();
                    }
                },
                
                // Â§ÑÁêÜÁî®Êà∑ËèúÂçïÂëΩ‰ª§
                handleUserCommand(command) {
                    switch (command) {
                        case 'profile':
                            // ‰∏™‰∫∫ËµÑÊñôÂäüËÉΩ
                            break;
                        case 'logout':
                            this.logout();
                            break;
                    }
                },
                
                // ‰∏ä‰º†ÊãçÂìÅÁõ∏ÂÖ≥ÊñπÊ≥ï
                handleFileSelect(file, fileList) {
                    const files = [file.raw];
                    this.commonAddFiles(files, this.imageFileList.map(x=>x.url), null, this.maxItemImages);
                    files.forEach(f => {
                        if (!f || !f.type?.startsWith('image/')) return;
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            const imageData = { file: f, name: f.name, preview: e.target.result };
                            this.imageFiles.push(imageData);
                            this.imageFileList.push({ name: f.name, url: e.target.result, raw: f });
                            this.$forceUpdate();
                        };
                        reader.readAsDataURL(f);
                    });
                },
                
                processFiles(files) {
                    this.commonAddFiles(files, this.imageFileList.map(x=>x.url), null, this.maxItemImages);
                    Array.from(files || []).forEach(file => {
                        if (!file || !file.type?.startsWith('image/')) return;
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            const imageData = { file, name: file.name, preview: e.target.result };
                            this.imageFiles.push(imageData);
                            this.imageFileList.push({ name: file.name, url: e.target.result, raw: file });
                            this.$forceUpdate();
                        };
                        reader.readAsDataURL(file);
                    });
                },
                
                removeImage(index) {
                    this.imageFiles.splice(index, 1);
                    this.imageFileList.splice(index, 1);
                },
                
                // el-uploadÁªÑ‰ª∂Áõ∏ÂÖ≥ÊñπÊ≥ï
                handleExceed(files, fileList) {
                    ElMessage.error(`ÊúÄÂ§öÂè™ËÉΩ‰∏ä‰º†${this.maxItemImages}Âº†ÂõæÁâá`);
                },
                
                beforeUpload(file) {
                    // Êñá‰ª∂‰∏ä‰º†ÂâçÁöÑÈ™åËØÅ
                    const isImage = file.type.startsWith('image/');
                    const isLt2M = file.size / 1024 / 1024 < 2;
                    
                    if (!isImage) {
                        ElMessage.error('Âè™ËÉΩ‰∏ä‰º†ÂõæÁâáÊñá‰ª∂!');
                        return false;
                    }
                    if (!isLt2M) {
                        ElMessage.error('ÂõæÁâáÂ§ßÂ∞è‰∏çËÉΩË∂ÖËøá2MB!');
                        return false;
                    }
                    return false; // ÈòªÊ≠¢Ëá™Âä®‰∏ä‰º†ÔºåÊàë‰ª¨ÊâãÂä®Â§ÑÁêÜ
                },
                
                // ÁºñËæëÊó∂ÁöÑÊñá‰ª∂ÈÄâÊã©Â§ÑÁêÜ
                handleEditFileSelect(event) {
                    const files = Array.from(event?.target?.files || []);
                    if (!files.length) return;
                    // Êï∞ÈáèÈôêÂà∂ÔºöÂü∫‰∫éÈÖçÁΩÆ
                    if (this.editImageFiles.length + files.length > this.maxItemImages) {
                        ElMessage.error(`ÊúÄÂ§öÂè™ËÉΩ‰∏ä‰º†${this.maxItemImages}Âº†ÂõæÁâá`);
                        event.target.value = '';
                        return;
                    }
                    files.forEach(file => {
                        if (!file || !file.type?.startsWith('image/')) {
                            ElMessage.error('ËØ∑ÈÄâÊã©ÂõæÁâáÊñá‰ª∂');
                            return;
                        }
                        if (file.size > 2 * 1024 * 1024) {
                            ElMessage.error(`Êñá‰ª∂ ${file.name} Ë∂ÖËøá2MBÈôêÂà∂`);
                            return;
                        }
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            this.editImageFiles.push({
                                file,
                                name: file.name,
                                preview: e.target.result,
                                isExisting: false
                            });
                            this.$forceUpdate();
                        };
                        reader.readAsDataURL(file);
                    });
                    // Ê∏ÖÁ©∫inputÔºåÂÖÅËÆ∏ÈáçÂ§çÈÄâÊã©Âêå‰∏ÄÊñá‰ª∂
                    event.target.value = '';
                },
                
                // Âà†Èô§ÁºñËæëÊó∂ÁöÑÂõæÁâá
                removeEditImage(index) {
                    if (index < 0 || index >= this.editImageFiles.length) return;
                    this.editImageFiles.splice(index, 1);
                    this.$forceUpdate();
                },
                
                
                async submitUpload() {
                    try {
                        await this.$refs.uploadForm.validate();
                        
                        if (this.imageFiles.length === 0) {
                            ElMessage.error('ËØ∑Ëá≥Â∞ë‰∏ä‰º†‰∏ÄÂº†ÂõæÁâá');
                            return;
                        }
                        
                        this.uploading = true;
                        
                        const formData = new FormData();
                        formData.append('itemName', this.uploadForm.itemName);
                        formData.append('categoryId', this.uploadForm.categoryId);
                        formData.append('startingPrice', this.uploadForm.startingPrice);
                        if (this.uploadForm.estimatedPrice != null) {
                            formData.append('estimatedPrice', this.uploadForm.estimatedPrice);
                        }
                        if (this.uploadForm.itemCode) {
                            formData.append('itemCode', this.uploadForm.itemCode);
                        }
                        if (this.uploadForm.dimensions) {
                            formData.append('dimensions', this.uploadForm.dimensions);
                        }
                        if (this.uploadForm.material) {
                            formData.append('material', this.uploadForm.material);
                        }
                        formData.append('description', this.uploadForm.description);
                        formData.append('status', this.uploadForm.status);
                        
                        // Ê∑ªÂä†ÂõæÁâáÊñá‰ª∂
                        this.imageFiles.forEach((imageFile, index) => {
                            formData.append(`images`, imageFile.file);
                        });
                        
                        const response = await axios.post('/api/admin/items/upload', formData, {
                            headers: {
                                'Content-Type': 'multipart/form-data'
                            }
                        });
                        
                        if (response.data.code === 200) {
                            ElMessage.success('ÊãçÂìÅ‰∏ä‰º†ÊàêÂäü');
                            this.resetForm();
                            this.goToPage('items');
                        } else {
                            ElMessage.error(response.data.message || '‰∏ä‰º†Â§±Ë¥•');
                        }
                    } catch (error) {
                        console.error('‰∏ä‰º†ÊãçÂìÅÂ§±Ë¥•:', error);
                        ElMessage.error('‰∏ä‰º†Â§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï');
                    } finally {
                        this.uploading = false;
                    }
                },
                
                resetForm() {
                    this.uploadForm = {
                        itemName: '',
                        categoryId: null,
                        startingPrice: null,
                        estimatedPrice: null,
                        itemCode: '',
                        description: '',
                        dimensions: '',
                        material: '',
                        status: 1, // ÈªòËÆ§‰∏äÊû∂
                        minIncrement: null,
                        auctionDuration: 60,
                        startTime: null,
                        endTime: null
                    };
                    this.imageFiles = [];
                    this.imageFileList = [];
                    this.$refs.uploadForm?.resetFields();
                },
                
                // ÊãçÂçñ‰ºöÁõ∏ÂÖ≥ÊñπÊ≥ï
                async loadSessions() {
                    this.sessionsLoading = true;
                    try {
                        const params = {
                            page: this.sessionsPage,
                            pageSize: this.sessionsPageSize,
                            ...this.sessionSearchForm
                        };
                        
                        const response = await axios.get('/api/admin/sessions', { params });
                        if (response.data.code === 200) {
                            this.sessions = response.data.data || [];
                            this.sessionsTotal = response.data.total || 0;
                        }
                    } catch (error) {
                        console.error('Âä†ËΩΩÊãçÂçñ‰ºöÂàóË°®Â§±Ë¥•:', error);
                        ElMessage.error('Âä†ËΩΩÊãçÂçñ‰ºöÂàóË°®Â§±Ë¥•');
                    } finally {
                        this.sessionsLoading = false;
                    }
                },
                
                searchSessions() {
                    this.sessionsPage = 1;
                    this.loadSessions();
                },
                
                resetSessionSearch() {
                    this.sessionSearchForm = {
                        sessionName: '',
                        status: ''
                    };
                    this.sessionsPage = 1;
                    this.loadSessions();
                },
                
                handleSessionsSizeChange(size) {
                    this.sessionsPageSize = size;
                    this.sessionsPage = 1;
                    this.loadSessions();
                },
                
                handleSessionsCurrentChange(page) {
                    this.sessionsPage = page;
                    this.loadSessions();
                },

                async toggleSessionVisible(row) {
                    try {
                        const target = row.isVisible ? 0 : 1;
                        await ElMessageBox.confirm(`Á°ÆËÆ§Â∞Ü‰ºöÂú∫"${row.sessionName}"ËÆæÁΩÆ‰∏∫${target ? 'Â±ïÁ§∫' : 'ÈöêËóè'}ÂêóÔºü`, 'ÊèêÁ§∫', { type: 'warning' });
                        const res = await axios.post(`/api/admin/sessions/${row.id}/visible`, null, { params: { value: target } });
                        if (res.data && res.data.code === 200) {
                            ElMessage.success('Â∑≤Êõ¥Êñ∞');
                            this.loadSessions();
                        } else {
                            ElMessage.error(res.data?.message || 'Êõ¥Êñ∞Â§±Ë¥•');
                        }
                    } catch (e) {
                        if (e !== 'cancel') {
                            console.error('Êõ¥Êñ∞ÂèØËßÅÊÄßÂ§±Ë¥•', e);
                            ElMessage.error('Êìç‰ΩúÂ§±Ë¥•');
                        }
                    }
                },
                
                getSessionStatusType(status) {
                    const typeMap = {
                        1: 'info',    // ÂæÖÂºÄÂßã
                        2: 'success', // ËøõË°å‰∏≠
                        3: 'warning', // Â∑≤ÁªìÊùü
                        4: 'danger'   // Â∑≤ÂèñÊ∂à
                    };
                    return typeMap[status] || 'info';
                },
                
                getSessionStatusText(status) {
                    const statusMap = {
                        1: 'ÂæÖÂºÄÂßã',
                        2: 'ËøõË°å‰∏≠',
                        3: 'Â∑≤ÁªìÊùü',
                        4: 'Â∑≤ÂèñÊ∂à'
                    };
                    return statusMap[status] || 'Êú™Áü•';
                },
                
                editSession(session) {
                    // ÁºñËæëÂäüËÉΩ
                },
                
                async deleteSession(session) {
                    try {
                        await ElMessageBox.confirm(
                            `Á°ÆÂÆöË¶ÅÂà†Èô§ÊãçÂçñ‰ºö "${session.sessionName}" ÂêóÔºü`,
                            'Á°ÆËÆ§Âà†Èô§',
                            {
                                confirmButtonText: 'Á°ÆÂÆö',
                                cancelButtonText: 'ÂèñÊ∂à',
                                type: 'warning'
                            }
                        );
                        
                        const response = await axios.delete(`/api/admin/sessions/${session.id}`);
                        if (response.data.code === 200) {
                            ElMessage.success('Âà†Èô§ÊàêÂäü');
                            this.loadSessions();
                        } else {
                            ElMessage.error(response.data.message || 'Âà†Èô§Â§±Ë¥•');
                        }
                    } catch (error) {
                        if (error !== 'cancel') {
                            console.error('Âà†Èô§ÊãçÂçñ‰ºöÂ§±Ë¥•:', error);
                            ElMessage.error('Âà†Èô§Â§±Ë¥•');
                        }
                    }
                },
                
                async submitSession() {
                    try {
                        await this.$refs.sessionForm.validate();
                        
                        if (this.selectedItems.length === 0) {
                            ElMessage.error('ËØ∑Ëá≥Â∞ëÈÄâÊã©‰∏Ä‰∏™ÊãçÂìÅ');
                            return;
                        }
                        
                        this.creating = true;
                        
                        const formData = {
                            ...this.sessionForm,
                            itemIds: this.selectedItems.map(item => item.id),
                            startTime: this.formatDateTime(this.sessionForm.startTime),
                            endTime: this.formatDateTime(this.sessionForm.endTime),
                            // Â∏ÉÂ∞îËΩ¨Êï¥Âûã
                            isAuthentic: this.sessionForm.isAuthentic ? 1 : 0,
                            isFreeShipping: this.sessionForm.isFreeShipping ? 1 : 0,
                            isReturnable: this.sessionForm.isReturnable ? 1 : 0,
                            // Â∑≤ÁßªÈô§ÊúÄÂ∞è‰øùËØÅÈáë/ÊúÄÂ§ßÂá∫‰ª∑/ÊúÄÂ∞èÂä†‰ª∑
                        };
                        
                        const response = await axios.post('/api/admin/sessions', formData);
                        
                        if (response.data.code === 200) {
                            ElMessage.success('ÊãçÂçñ‰ºöÂàõÂª∫ÊàêÂäü');
                            this.resetSessionForm();
                            this.goToPage('sessions');
                        } else {
                            ElMessage.error(response.data.message || 'ÂàõÂª∫Â§±Ë¥•');
                        }
                    } catch (error) {
                        console.error('ÂàõÂª∫ÊãçÂçñ‰ºöÂ§±Ë¥•:', error);
                        ElMessage.error('ÂàõÂª∫Â§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï');
                    } finally {
                        this.creating = false;
                    }
                },
                
                resetSessionForm() {
                    this.sessionForm = {
                        sessionName: '',
                        sessionType: null,
                        description: '',
                        startTime: null,
                        endTime: null,
                        depositRatio: 0.1,  // ÈªòËÆ§10%
                        commissionRatio: 0.05,  // ÈªòËÆ§5%
                        isAuthentic: true,  // ÈªòËÆ§‰øùÁúü
                        isFreeShipping: true,  // ÈªòËÆ§ÂåÖÈÇÆ
                        isReturnable: true,  // ÈªòËÆ§ÊîØÊåÅÈÄÄË¥ß
                        rules: ''
                    };
                    this.selectedItems = [];
                    this.$refs.sessionForm?.resetFields();
                },
                
                removeSelectedItem(itemId) {
                    const index = this.selectedItems.findIndex(item => item.id === itemId);
                    if (index > -1) {
                        this.selectedItems.splice(index, 1);
                    }
                },
                
                // ÊãçÂìÅÈÄâÊã©ÂØπËØùÊ°ÜÁõ∏ÂÖ≥ÊñπÊ≥ï
                async loadAvailableItems() {
                    try {
                        this.itemsLoading = true;
                        const response = await axios.get('/api/admin/items/available');
                        if (response.data.code === 200) {
                            this.availableItems = response.data.data || [];
                        } else {
                            ElMessage.error('Âä†ËΩΩÂèØÁî®ÊãçÂìÅÂ§±Ë¥•');
                        }
                    } catch (error) {
                        console.error('Âä†ËΩΩÂèØÁî®ÊãçÂìÅÂ§±Ë¥•:', error);
                        ElMessage.error('Âä†ËΩΩÂèØÁî®ÊãçÂìÅÂ§±Ë¥•');
                    } finally {
                        this.itemsLoading = false;
                    }
                },
                
                handleItemSelectionChange(selection) {
                    this.tempSelectedItems = selection;
                },
                
                confirmItemSelection() {
                    // Âà§Êñ≠ÊòØÂú®ÁºñËæëÊãçÂçñ‰ºöËøòÊòØÂàõÂª∫ÊãçÂçñ‰ºö
                    if (this.showSessionEditDialog) {
                        // ÁºñËæëÊãçÂçñ‰ºöÔºöÊ∑ªÂä†Âà∞ editSessionForm.selectedItems
                        const existingIds = (this.editSessionForm.selectedItems || []).map(item => item.id);
                        const newItems = this.tempSelectedItems.filter(item => !existingIds.includes(item.id));
                        this.editSessionForm.selectedItems = [...(this.editSessionForm.selectedItems || []), ...newItems];
                        ElMessage.success(`Â∑≤Ê∑ªÂä† ${newItems.length} ‰∏™ÊãçÂìÅ`);
                    } else {
                        // ÂàõÂª∫ÊãçÂçñ‰ºöÔºöÊ∑ªÂä†Âà∞ selectedItems
                        const existingIds = this.selectedItems.map(item => item.id);
                        const newItems = this.tempSelectedItems.filter(item => !existingIds.includes(item.id));
                        this.selectedItems = [...this.selectedItems, ...newItems];
                        ElMessage.success(`Â∑≤ÈÄâÊã© ${newItems.length} ‰∏™ÊãçÂìÅ`);
                    }
                    this.showItemSelector = false;
                    this.tempSelectedItems = [];
                },
                
                handleItemSelectorClose() {
                    this.showItemSelector = false;
                    this.tempSelectedItems = [];
                },
                
                openItemSelector() {
                    this.showItemSelector = true;
                    this.loadAvailableItems();
                },
                
                
                async submitItemEdit() {
                    try {
                        await this.$refs.editItemForm.validate();
                        
                        if (this.editImageFiles.length === 0) {
                            ElMessage.error('ËØ∑Ëá≥Â∞ë‰∏ä‰º†‰∏ÄÂº†ÂõæÁâá');
                            return;
                        }
                        
                        this.editingItem = true;
                        
                        // ÂáÜÂ§áFormDataÁî®‰∫éÊñá‰ª∂‰∏ä‰º†
                        const formData = new FormData();
                        formData.append('id', this.editItemForm.id);
                        formData.append('itemName', this.editItemForm.itemName);
                        formData.append('categoryId', this.editItemForm.categoryId);
                        formData.append('itemCode', this.editItemForm.itemCode || '');
                        formData.append('startingPrice', this.editItemForm.startingPrice);
                        if (this.editItemForm.estimatedPrice != null) formData.append('estimatedPrice', this.editItemForm.estimatedPrice);
                        if (this.editItemForm.dimensions) formData.append('dimensions', this.editItemForm.dimensions);
                        if (this.editItemForm.material) formData.append('material', this.editItemForm.material);
                        formData.append('description', this.editItemForm.description);
                        formData.append('status', this.editItemForm.status);
                        
                        // Ê∑ªÂä†ÂΩìÂâçÂõæÁâáÂàóË°®Ôºà‰ªÖ‰øùÁïôÂ∑≤Â≠òÂú®ÁöÑURLÔºåËøáÊª§Êéâbase64È¢ÑËßàÔºâ
                        const currentImageUrls = this.editImageFiles
                            .filter(file => file.isExisting && typeof file.preview === 'string' && !file.preview.startsWith('data:'))
                            .map(file => file.preview);
                        formData.append('currentImages', JSON.stringify(currentImageUrls));
                        
                        // Ê∑ªÂä†ÂõæÁâáÊñá‰ª∂ÔºàÂè™Ê∑ªÂä†Êñ∞‰∏ä‰º†ÁöÑÊñá‰ª∂Ôºâ
                        let hasNewImages = false;
                        this.editImageFiles.forEach((imageFile, index) => {
                            if (!imageFile.isExisting && imageFile.file) {
                                formData.append('images', imageFile.file);
                                hasNewImages = true;
                            }
                        });
                        
                        // Â¶ÇÊûúÊ≤°ÊúâÊñ∞ÂõæÁâáÔºå‰πüË¶ÅË∞ÉÁî®APIÊõ¥Êñ∞Âü∫Êú¨‰ø°ÊÅØ
                        if (!hasNewImages) {
                            // ÊûÑÂª∫ÂΩìÂâçÂõæÁâáÂàóË°®Ôºà‰ªÖ‰øùÁïôÂ∑≤Â≠òÂú®ÁöÑURLÔºåËøáÊª§Êéâbase64È¢ÑËßàÔºâ
                            const currentImageUrls = this.editImageFiles
                                .filter(file => file.isExisting && typeof file.preview === 'string' && !file.preview.startsWith('data:'))
                                .map(file => file.preview);
                            
                            // Â¶ÇÊûúÊ≤°ÊúâÊñ∞ÂõæÁâáÔºå‰ΩøÁî®JSONÊ†ºÂºèÁöÑAPI
                            const jsonData = {
                                id: this.editItemForm.id,
                                itemName: this.editItemForm.itemName,
                                categoryId: this.editItemForm.categoryId,
                                itemCode: this.editItemForm.itemCode || '',
                                startingPrice: this.editItemForm.startingPrice,
                                estimatedPrice: this.editItemForm.estimatedPrice,
                                dimensions: this.editItemForm.dimensions,
                                material: this.editItemForm.material,
                                description: this.editItemForm.description,
                                status: this.editItemForm.status,
                                images: JSON.stringify(currentImageUrls) // Êõ¥Êñ∞ÂõæÁâáÂàóË°®
                            };
                            
                            const response = await axios.put(`/api/admin/items/${this.editItemForm.id}`, jsonData);
                            
                            if (response.data.code === 200) {
                                ElMessage.success('ÊãçÂìÅÊõ¥Êñ∞ÊàêÂäü');
                                this.showItemEditDialog = false;
                                this.loadItems();
                            } else {
                                ElMessage.error(response.data.message || 'Êõ¥Êñ∞Â§±Ë¥•');
                            }
                            return;
                        }
                        
                        const response = await axios.put(`/api/admin/items/${this.editItemForm.id}/with-images`, formData, {
                            headers: {
                                'Content-Type': 'multipart/form-data'
                            }
                        });
                        
                        if (response.data.code === 200) {
                            ElMessage.success('ÊãçÂìÅÊõ¥Êñ∞ÊàêÂäü');
                            this.showItemEditDialog = false;
                            this.loadItems(); // ÈáçÊñ∞Âä†ËΩΩÊãçÂìÅÂàóË°®
                        } else {
                            ElMessage.error(response.data.message || 'Êõ¥Êñ∞Â§±Ë¥•');
                        }
                    } catch (error) {
                        console.error('Êõ¥Êñ∞ÊãçÂìÅÂ§±Ë¥•:', error);
                        ElMessage.error('Êõ¥Êñ∞Â§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï');
                    } finally {
                        this.editingItem = false;
                    }
                },
                
                handleItemEditClose() {
                    this.showItemEditDialog = false;
                    this.editItemForm = {
                        id: null,
                        itemName: '',
                        categoryId: null,
                        startingPrice: null,
                        description: '',
                        status: 1,
                        images: '',
                        imageList: []
                    };
                    this.editImageFiles = [];
                },
                
                async deleteItem(item) {
                    try {
                        await ElMessageBox.confirm(
                            `Á°ÆÂÆöË¶ÅÂà†Èô§ÊãçÂìÅ"${item.itemName}"ÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§çÔºÅ`,
                            'Âà†Èô§Á°ÆËÆ§',
                            {
                                confirmButtonText: 'Á°ÆÂÆöÂà†Èô§',
                                cancelButtonText: 'ÂèñÊ∂à',
                                type: 'warning',
                            }
                        );
                        
                        const response = await axios.delete(`/api/admin/items/${item.id}`);
                        
                        if (response.data.code === 200) {
                            ElMessage.success('Âà†Èô§ÊàêÂäü');
                            this.loadItems();
                        } else {
                            ElMessage.error(response.data.message || 'Âà†Èô§Â§±Ë¥•');
                        }
                    } catch (error) {
                        if (error !== 'cancel') {
                            console.error('Âà†Èô§ÊãçÂìÅÂ§±Ë¥•:', error);
                            ElMessage.error('Âà†Èô§Â§±Ë¥•');
                        }
                    }
                },
                
                // ÊãçÂçñ‰ºöÁºñËæëÂíåÂà†Èô§ÊñπÊ≥ï
                editSession(session) {
                    this.editSessionForm = {
                        id: session.id,
                        sessionName: session.sessionName,
                        sessionType: session.sessionType,
                        description: session.description,
                        startTime: session.startTime ? new Date(session.startTime) : null,
                        endTime: session.endTime ? new Date(session.endTime) : null,
                        depositRatio: session.depositRatio,
                        commissionRatio: session.commissionRatio,
                        // Êï¥ÂûãËΩ¨Â∏ÉÂ∞î
                        isAuthentic: session.isAuthentic == 1,
                        isFreeShipping: session.isFreeShipping == 1,
                        isReturnable: session.isReturnable == 1,
                        antiSnipingEnabled: (session.antiSnipingEnabled ?? 1) == 1,
                        extendThresholdSec: session.extendThresholdSec ?? 60,
                        extendSeconds: session.extendSeconds ?? 60,
                        extendMaxTimes: session.extendMaxTimes ?? 5,
                        rules: session.rules,
                        imageList: this.normalizeSessionImages(session),
                        _newCoverFiles: [],
                        selectedItems: []  // ÂàùÂßãÂåñ‰∏∫Á©∫ÔºåÁ®çÂêéÂä†ËΩΩ
                    };
                    
                    // Âä†ËΩΩËØ•ÊãçÂçñ‰ºöÁöÑÊãçÂìÅÂàóË°®
                    this.loadSessionItems(session.id);
                    
                    this.showSessionEditDialog = true;
                },
                
                // Âä†ËΩΩÊãçÂçñ‰ºöÁöÑÊãçÂìÅÂàóË°®
                async loadSessionItems(sessionId) {
                    try {
                        const response = await axios.get(`/api/admin/sessions/${sessionId}/items`);
                        if (response.data.code === 200) {
                            this.editSessionForm.selectedItems = response.data.data || [];
                        }
                    } catch (error) {
                        console.error('Âä†ËΩΩÊãçÂçñ‰ºöÊãçÂìÅÂ§±Ë¥•:', error);
                    }
                },
                
                // ÊâìÂºÄÁºñËæëÊãçÂçñ‰ºöÁöÑÊãçÂìÅÈÄâÊã©Âô®
                openEditSessionItemSelector() {
                    this.showItemSelector = true;
                    this.loadAvailableItems();
                },
                
                // ‰ªéÁºñËæëÊãçÂçñ‰ºö‰∏≠ÁßªÈô§ÊãçÂìÅ
                removeEditSessionItem(itemId) {
                    const index = this.editSessionForm.selectedItems.findIndex(item => item.id === itemId);
                    if (index > -1) {
                        this.editSessionForm.selectedItems.splice(index, 1);
                        ElMessage.success('Â∑≤ÁßªÈô§ÊãçÂìÅ');
                    }
                },
                
                async submitSessionEdit() {
                    try {
                        await this.$refs.editSessionForm.validate();
                        
                        this.editingSession = true;
                        
                        // Â¶ÇÊûúÊúâÊñ∞Â∞ÅÈù¢Êñá‰ª∂ÔºåÁî®multipartÊèê‰∫§ÔºõÂê¶ÂàôËµ∞ÂéüJSON
                        // Ëã•ÊúâÊñ∞Â¢ûÂõæÁâáÊàñÂà†Èô§Âä®‰ΩúÔºåÁî®multipartÊèê‰∫§ imageList
                        if (this.editSessionForm._newCoverFiles.length > 0 || true) {
                            const fd = new FormData();
                            fd.append('sessionName', this.editSessionForm.sessionName ?? '');
                            if (this.editSessionForm.sessionType != null) fd.append('sessionType', this.editSessionForm.sessionType);
                            fd.append('description', this.editSessionForm.description ?? '');
                            if (this.editSessionForm.startTime) fd.append('startTime', this.formatDateTime(this.editSessionForm.startTime));
                            if (this.editSessionForm.endTime) fd.append('endTime', this.formatDateTime(this.editSessionForm.endTime));
                            if (this.editSessionForm.depositRatio != null) fd.append('depositRatio', this.editSessionForm.depositRatio);
                            if (this.editSessionForm.commissionRatio != null) fd.append('commissionRatio', this.editSessionForm.commissionRatio);
                            fd.append('isAuthentic', this.editSessionForm.isAuthentic ? 1 : 0);
                            fd.append('isFreeShipping', this.editSessionForm.isFreeShipping ? 1 : 0);
                            fd.append('isReturnable', this.editSessionForm.isReturnable ? 1 : 0);
                            fd.append('antiSnipingEnabled', this.editSessionForm.antiSnipingEnabled ? 1 : 0);
                            if (this.editSessionForm.extendThresholdSec != null) fd.append('extendThresholdSec', this.editSessionForm.extendThresholdSec);
                            if (this.editSessionForm.extendSeconds != null) fd.append('extendSeconds', this.editSessionForm.extendSeconds);
                            if (this.editSessionForm.extendMaxTimes != null) fd.append('extendMaxTimes', this.editSessionForm.extendMaxTimes);
                            if (this.editSessionForm.rules != null) fd.append('rules', this.editSessionForm.rules);
                            // ÈôÑÂ∏¶ÂΩìÂâçÂõæÁâáÂàóË°®Ôºö‰ªÖ‰øùÁïôÂ∑≤Â≠òÂú®URL
                            const sessionCurrentUrls = (this.editSessionForm.imageList || []).filter(u => typeof u === 'string' && !u.startsWith('data:'));
                            fd.append('currentImages', JSON.stringify(sessionCurrentUrls));
                            // Êñ∞Â¢ûÊñá‰ª∂Ôºö‰∏•Ê†º‰∏é‰ªçÂ≠òÂú®ÁöÑbase64Êï∞ÈáèÂØπÈΩê
                            const base64Count = (this.editSessionForm.imageList || []).filter(u => typeof u === 'string' && u.startsWith('data:')).length;
                            (this.editSessionForm._newCoverFiles || []).slice(0, base64Count).forEach(f => fd.append('coverImages', f));
                            // Ê∑ªÂä†ÊãçÂìÅIDÂàóË°®
                            if (this.editSessionForm.selectedItems && this.editSessionForm.selectedItems.length > 0) {
                                fd.append('itemIds', JSON.stringify(this.editSessionForm.selectedItems.map(item => item.id)));
                            }
                            const response = await axios.put(`/api/admin/sessions/${this.editSessionForm.id}/with-cover`, fd, { headers: { 'Content-Type': 'multipart/form-data' } });
                            if (response.data.code === 200) {
                                ElMessage.success('ÊãçÂçñ‰ºöÊõ¥Êñ∞ÊàêÂäü');
                                this.showSessionEditDialog = false;
                                this.loadSessions();
                            } else {
                                ElMessage.error(response.data.message || 'Êõ¥Êñ∞Â§±Ë¥•');
                            }
                        } else {
                            const formData = {
                                ...this.editSessionForm,
                                startTime: this.formatDateTime(this.editSessionForm.startTime),
                                endTime: this.formatDateTime(this.editSessionForm.endTime),
                                isAuthentic: this.editSessionForm.isAuthentic ? 1 : 0,
                                isFreeShipping: this.editSessionForm.isFreeShipping ? 1 : 0,
                                isReturnable: this.editSessionForm.isReturnable ? 1 : 0,
                                antiSnipingEnabled: this.editSessionForm.antiSnipingEnabled ? 1 : 0,
                                itemIds: this.editSessionForm.selectedItems ? this.editSessionForm.selectedItems.map(item => item.id) : []
                            };
                            const response = await axios.put(`/api/admin/sessions/${this.editSessionForm.id}`, formData);
                            if (response.data.code === 200) {
                                ElMessage.success('ÊãçÂçñ‰ºöÊõ¥Êñ∞ÊàêÂäü');
                                this.showSessionEditDialog = false;
                                this.loadSessions();
                            } else {
                                ElMessage.error(response.data.message || 'Êõ¥Êñ∞Â§±Ë¥•');
                            }
                        }
                        
                    } catch (error) {
                        console.error('Êõ¥Êñ∞ÊãçÂçñ‰ºöÂ§±Ë¥•:', error);
                        ElMessage.error('Êõ¥Êñ∞Â§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï');
                    } finally {
                        this.editingSession = false;
                    }
                },

                handleEditSessionCoverSelect(e) {
                    const files = Array.from(e?.target?.files || []);
                    if (!files.length) return;
                    files.forEach(f => {
                        this.editSessionForm._newCoverFiles.push(f);
                        const reader = new FileReader();
                        reader.onload = () => {
                            this.editSessionForm.imageList.push(reader.result);
                            this.$forceUpdate();
                        };
                        reader.readAsDataURL(f);
                    });
                    e.target.value = '';
                },

                removeSessionImage(idx) {
                    const img = this.editSessionForm.imageList[idx];
                    this.editSessionForm.imageList.splice(idx, 1);
                    if (typeof img === 'string' && img.startsWith('data:') && this.editSessionForm._newCoverFiles && this.editSessionForm._newCoverFiles.length > 0) {
                        this.editSessionForm._newCoverFiles.shift();
                    }
                    this.$forceUpdate();
                },

                normalizeSessionImages(session) {
                    // ÂÖºÂÆπÔºöÂ¶ÇÊûúÂ∑≤Êúâ images(JSONÊï∞ÁªÑÂ≠óÁ¨¶‰∏≤) ÂàôËß£ÊûêÔºõÂê¶ÂàôÈÄÄÂõû coverImage ÂçïÂõæ
                    try {
                        if (session.images) {
                            const arr = JSON.parse(session.images);
                            if (Array.isArray(arr)) return arr;
                        }
                    } catch (_) {}
                    return session.coverImage ? [session.coverImage] : [];
                },
                
                handleSessionEditClose() {
                    this.showSessionEditDialog = false;
                    this.editSessionForm = {
                        id: null,
                        sessionName: '',
                        sessionType: null,
                        description: '',
                        startTime: null,
                        endTime: null,
                        depositRatio: 0.1,
                        commissionRatio: 0.05,
                        isAuthentic: false,
                        isFreeShipping: false,
                        isReturnable: false,
                        rules: '',
                        coverImage: null,
                        _newCoverFile: null
                    };
                },
                
                async deleteSession(session) {
                    try {
                        await ElMessageBox.confirm(
                            `Á°ÆÂÆöË¶ÅÂà†Èô§ÊãçÂçñ‰ºö"${session.sessionName}"ÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§çÔºÅ`,
                            'Âà†Èô§Á°ÆËÆ§',
                            {
                                confirmButtonText: 'Á°ÆÂÆöÂà†Èô§',
                                cancelButtonText: 'ÂèñÊ∂à',
                                type: 'warning',
                            }
                        );
                        
                        const response = await axios.delete(`/api/admin/sessions/${session.id}`);
                        
                        if (response.data.code === 200) {
                            ElMessage.success('Âà†Èô§ÊàêÂäü');
                            this.loadSessions();
                        } else {
                            ElMessage.error(response.data.message || 'Âà†Èô§Â§±Ë¥•');
                        }
                    } catch (error) {
                        if (error !== 'cancel') {
                            console.error('Âà†Èô§ÊãçÂçñ‰ºöÂ§±Ë¥•:', error);
                            ElMessage.error('Âà†Èô§Â§±Ë¥•');
                        }
                    }
                },
                
                // ========== Á≥ªÁªüÈÖçÁΩÆÁÆ°ÁêÜ ==========
                async loadConfigs() {
                    this.configLoading = true;
                    try {
                        // ÊûÑÂª∫Êü•ËØ¢ÂèÇÊï∞
                        const params = new URLSearchParams();
                        if (this.configFilter.category) {
                            params.append('configType', this.configFilter.category);
                        }
                        if (this.configFilter.keyword) {
                            params.append('keyword', this.configFilter.keyword);
                        }
                        
                        const url = `/api/admin/configs${params.toString() ? '?' + params.toString() : ''}`;
                        const res = await axios.get(url);
                        const list = res.data?.data || [];
                        // ÊåâÊõ¥Êñ∞Êó∂Èó¥ÂÄíÂ∫èÔºåÊñ∞Â¢û/ÊúÄËøë‰øÆÊîπÁöÑÊéíÂú®ÊúÄÂâç
                        this.configList = list.sort((a, b) => {
                            const ta = a.updateTime ? new Date(a.updateTime).getTime() : 0;
                            const tb = b.updateTime ? new Date(b.updateTime).getTime() : 0;
                            return tb - ta;
                        });
                        
                        // ‰ªéÈÖçÁΩÆÂàóË°®‰∏≠ÊèêÂèñÂàÜÁ±ª
                        const categories = [...new Set(this.configList.map(config => config.configType || 'STRING'))];
                        this.configCategories = categories;
                    } catch (e) {
                        console.error('Âä†ËΩΩÈÖçÁΩÆÂ§±Ë¥•:', e);
                        ElMessage.error('Âä†ËΩΩÈÖçÁΩÆÂ§±Ë¥•');
                    } finally {
                        this.configLoading = false;
                    }
                },
                
                openConfigDialog(config = null) {
                    if (config) {
                        this.configForm = { ...config };
                    } else {
                        this.configForm = {
                            id: null,
                            configKey: '',
                            configValue: '',
                            configType: 'STRING',
                            description: '',
                            isSystem: 0,
                            isEditable: 1
                        };
                    }
                    this.configDialogVisible = true;
                },
                
                async saveConfig() {
                    try {
                        const isUpdate = !!this.configForm.id;
                        const url = isUpdate ? '/api/admin/configs/update' : '/api/admin/configs';
                        const method = isUpdate ? 'put' : 'post';
                        
                        await axios[method](url, this.configForm);
                        ElMessage.success(isUpdate ? 'Êõ¥Êñ∞ÊàêÂäü' : 'ÂàõÂª∫ÊàêÂäü');
                        this.configDialogVisible = false;
                        this.loadConfigs();
                    } catch (e) {
                        console.error('‰øùÂ≠òÈÖçÁΩÆÂ§±Ë¥•:', e);
                        ElMessage.error('‰øùÂ≠òÈÖçÁΩÆÂ§±Ë¥•');
                    }
                },
                
                editConfig(config) {
                    this.openConfigDialog(config);
                },
                
                async deleteConfig(config) {
                    try {
                        await ElMessageBox.confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ÈÖçÁΩÆÂêóÔºü', 'ÊèêÁ§∫', {
                            confirmButtonText: 'Á°ÆÂÆö',
                            cancelButtonText: 'ÂèñÊ∂à',
                            type: 'warning'
                        });
                        
                        await axios.post('/api/admin/configs/delete', { id: config.id });
                        ElMessage.success('Âà†Èô§ÊàêÂäü');
                        this.loadConfigs();
                    } catch (e) {
                        if (e !== 'cancel') {
                            console.error('Âà†Èô§ÈÖçÁΩÆÂ§±Ë¥•:', e);
                            ElMessage.error('Âà†Èô§ÈÖçÁΩÆÂ§±Ë¥•');
                        }
                    }
                },
                
                
                getConfigTypeTag(type) {
                    const typeMap = {
                        'STRING': 'primary',
                        'NUMBER': 'success',
                        'BOOLEAN': 'warning',
                        'JSON': 'danger'
                    };
                    return typeMap[type] || 'info';
                },
                
                // ========== Áî®Êà∑ÁÆ°ÁêÜ ==========
                async loadUsers() {
                    this.userLoading = true;
                    try {
                        const res = await axios.get('/api/admin/user-management/list', {
                            params: {
                                pageNum: this.userPagination.pageNum,
                                pageSize: this.userPagination.pageSize
                            }
                        });
                        const data = res.data?.data || {};
                        this.userList = data.list || [];
                        this.userPagination.total = data.total || 0;
                        
                        // Âä†ËΩΩÁî®Êà∑ÁªüËÆ°
                        await this.loadUserStats();
                    } catch (e) {
                        console.error('Âä†ËΩΩÁî®Êà∑ÂàóË°®Â§±Ë¥•:', e);
                        ElMessage.error('Âä†ËΩΩÁî®Êà∑ÂàóË°®Â§±Ë¥•');
                    } finally {
                        this.userLoading = false;
                    }
                },
                
                async loadUserStats() {
                    try {
                        const res = await axios.get('/api/admin/user-management/stats');
                        this.userStats = res.data?.data || {};
                    } catch (e) {
                        console.error('Âä†ËΩΩÁî®Êà∑ÁªüËÆ°Â§±Ë¥•:', e);
                    }
                },
                
                async forceUserOffline(user) {
                    try {
                        await ElMessageBox.confirm(`Á°ÆÂÆöË¶ÅÂº∫Âà∂Áî®Êà∑ ${user.username} Á¶ªÁ∫øÂêóÔºü`, 'ÊèêÁ§∫', {
                            confirmButtonText: 'Á°ÆÂÆö',
                            cancelButtonText: 'ÂèñÊ∂à',
                            type: 'warning'
                        });
                        
                        await axios.post(`/api/admin/user-management/${user.userId}/offline`);
                        ElMessage.success('Êìç‰ΩúÊàêÂäü');
                        this.loadUsers();
                    } catch (e) {
                        if (e !== 'cancel') {
                            console.error('Âº∫Âà∂Áî®Êà∑Á¶ªÁ∫øÂ§±Ë¥•:', e);
                            ElMessage.error('Êìç‰ΩúÂ§±Ë¥•');
                        }
                    }
                },
                
                async forceAllOffline() {
                    try {
                        await ElMessageBox.confirm('Á°ÆÂÆöË¶ÅÂº∫Âà∂ÊâÄÊúâÁî®Êà∑Á¶ªÁ∫øÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÈÄÜÔºÅ', 'Ë≠¶Âëä', {
                            confirmButtonText: 'Á°ÆÂÆö',
                            cancelButtonText: 'ÂèñÊ∂à',
                            type: 'warning'
                        });
                        
                        await axios.post('/api/admin/user-management/offline-all');
                        ElMessage.success('Êìç‰ΩúÊàêÂäü');
                        this.loadUsers();
                    } catch (e) {
                        if (e !== 'cancel') {
                            console.error('Âº∫Âà∂ÊâÄÊúâÁî®Êà∑Á¶ªÁ∫øÂ§±Ë¥•:', e);
                            ElMessage.error('Êìç‰ΩúÂ§±Ë¥•');
                        }
                    }
                },
                
                async cleanExpiredRecords() {
                    try {
                        await ElMessageBox.confirm('Á°ÆÂÆöË¶ÅÊ∏ÖÁêÜËøáÊúüËÆ∞ÂΩïÂêóÔºü', 'ÊèêÁ§∫', {
                            confirmButtonText: 'Á°ÆÂÆö',
                            cancelButtonText: 'ÂèñÊ∂à',
                            type: 'warning'
                        });
                        
                        await axios.post('/api/admin/user-management/clean-expired', null, {
                            params: { days: 30 }
                        });
                        ElMessage.success('Ê∏ÖÁêÜÂÆåÊàê');
                        this.loadUsers();
                    } catch (e) {
                        if (e !== 'cancel') {
                            console.error('Ê∏ÖÁêÜËøáÊúüËÆ∞ÂΩïÂ§±Ë¥•:', e);
                            ElMessage.error('Ê∏ÖÁêÜÂ§±Ë¥•');
                        }
                    }
                },
                
                formatTime(time) {
                    if (!time) return '-';
                    return new Date(time).toLocaleString('zh-CN');
                },
                
                // ÈÄÄÂá∫ÁôªÂΩï
                logout() {
                    // ‰∏ªÂä®Ê∏ÖÁêÜÊú¨Âú∞TokenÂπ∂Ë∑≥ËΩ¨Ôºå‰∏ç‰æùËµñ401ÂÜçÊ∏Ö
                    localStorage.removeItem('accessToken');
                    localStorage.removeItem('refreshToken');
                    delete axios.defaults.headers.common['Authorization'];
                    axios.post('/api/auth/logout').finally(() => {
                        ElMessage.success('Â∑≤ÈÄÄÂá∫ÁôªÂΩï');
                        window.location.href = '/auction/login';
                    });
                }
            }
        }).use(ElementPlus).mount('#app');
    </script>
    
    <!-- ÂèÇÊãçÈ°ªÁü•ÔºöÂàÜÁ±ª/Êù°ÁõÆÂØπËØùÊ°Ü -->
    <el-dialog v-model="categoryDialogVisible" title="ÂàÜÁ±ª" width="520px">
        <el-form :model="categoryForm" label-width="90px">
            <el-form-item label="ÂêçÁß∞"><el-input v-model="categoryForm.name"></el-input></el-form-item>
            <el-form-item label="ÊéíÂ∫è"><el-input-number v-model="categoryForm.sortOrder" :min="0"></el-input-number></el-form-item>
            <el-form-item label="ÂêØÁî®"><el-switch v-model="categoryForm.enabled"></el-switch></el-form-item>
        </el-form>
        <template #footer>
            <el-button @click="categoryDialogVisible=false">ÂèñÊ∂à</el-button>
            <el-button type="primary" @click="saveCategory">‰øùÂ≠ò</el-button>
        </template>
    </el-dialog>


    <el-dialog v-model="itemDialogVisible" title="Êù°ÁõÆ" width="720px">
        <el-form :model="itemForm" label-width="90px">
            <el-form-item label="Ê†áÈ¢ò"><el-input v-model="itemForm.title"></el-input></el-form-item>
            <el-form-item label="ÊéíÂ∫è"><el-input-number v-model="itemForm.sortOrder" :min="0"></el-input-number></el-form-item>
            <el-form-item label="ÂêØÁî®"><el-switch v-model="itemForm.enabled"></el-switch></el-form-item>
            <el-form-item label="ÂÜÖÂÆπ"><el-input v-model="itemForm.contentHtml" type="textarea" :rows="10"></el-input></el-form-item>
        </el-form>
        <template #footer>
            <el-button @click="itemDialogVisible=false">ÂèñÊ∂à</el-button>
            <el-button type="primary" @click="saveItem">‰øùÂ≠ò</el-button>
        </template>
    </el-dialog>
</body>
</html>