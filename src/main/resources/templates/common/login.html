<!DOCTYPE html>
<!-- 
    æ–‡ä»¶å: login.html
    åŠŸèƒ½: æ‹å–ç³»ç»Ÿç™»å½•é¡µé¢
    è¯´æ˜: 
    1. æä¾›ç”¨æˆ·ç™»å½•åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·ç™»å½•
    2. æ ¹æ®ç”¨æˆ·ç±»å‹è‡ªåŠ¨è·³è½¬åˆ°å¯¹åº”é¡µé¢ï¼ˆç®¡ç†å‘˜è·³è½¬åˆ°ç®¡ç†åå°ï¼Œæ™®é€šç”¨æˆ·è·³è½¬åˆ°ç”¨æˆ·ç•Œé¢ï¼‰
    3. ä½¿ç”¨Vue 3å’ŒElement Plusæ„å»ºç•Œé¢
    4. é›†æˆJWTä»¤ç‰Œè®¤è¯
-->
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³»ç»Ÿç™»å½• - æ‹å–ç³»ç»Ÿ</title>
    
    <!-- Element UI CSS - ä½¿ç”¨æœ¬åœ°èµ„æº -->
    <link rel="stylesheet" href="/css/element-plus.css">
    
    <!-- ========================= è‡ªå®šä¹‰æ ·å¼å¼€å§‹ ========================= -->
    <style>
        /* ----- å…¨å±€æ ·å¼ ----- */
        /* é¡µé¢ä¸»ä½“æ ·å¼ï¼šè®¾ç½®æ— è¾¹è·ï¼Œä½¿ç”¨ä¸­æ–‡å­—ä½“æ ˆï¼Œæ¸å˜ç´«è‰²èƒŒæ™¯ */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'å¾®è½¯é›…é»‘', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); /* ç´«è‰²æ¸å˜èƒŒæ™¯ */
            min-height: 100vh; /* æœ€å°é«˜åº¦ä¸ºæ•´ä¸ªè§†å£ */
        }
        
        /* ----- é¡¶éƒ¨å¯¼èˆªåŒºåŸŸ ----- */
        /* é¡¶éƒ¨å¯¼èˆªæ ï¼šåŠé€æ˜ç™½è‰²èƒŒæ™¯ï¼Œå¸¦æœ‰æ¨¡ç³Šæ•ˆæœå’Œé˜´å½± */
        .header {
            background: rgba(255, 255, 255, 0.95); /* åŠé€æ˜ç™½è‰² */
            backdrop-filter: blur(10px); /* èƒŒæ™¯æ¨¡ç³Šæ•ˆæœ */
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1); /* é˜´å½±æ•ˆæœ */
            padding: 0 20px;
        }
        
        /* å¯¼èˆªæ å†…å®¹å®¹å™¨ï¼šä½¿ç”¨Flexboxå¸ƒå±€ï¼Œå·¦å³åˆ†å¸ƒ */
        .header-content {
            display: flex;
            justify-content: space-between; /* å·¦å³ä¸¤ç«¯å¯¹é½ */
            align-items: center; /* å‚ç›´å±…ä¸­ */
            max-width: 1200px; /* æœ€å¤§å®½åº¦é™åˆ¶ */
            margin: 0 auto; /* æ°´å¹³å±…ä¸­ */
            height: 60px;
        }
        
        /* LogoåŒºåŸŸï¼šä½¿ç”¨Flexboxå‚ç›´å±…ä¸­å›¾æ ‡å’Œæ–‡å­— */
        .logo {
            display: flex;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            color: #409EFF; /* è“è‰²ä¸»é¢˜è‰² */
        }
        
        /* Logoå›¾æ ‡æ ·å¼ */
        .logo i {
            margin-right: 10px;
            font-size: 28px;
        }
        
        /* å¯¼èˆªé“¾æ¥å®¹å™¨ï¼šæ¨ªå‘æ’åˆ—ï¼Œé—´è·20px */
        .nav-links {
            display: flex;
            gap: 20px;
        }
        
        /* ----- ä¸»å†…å®¹åŒºåŸŸ ----- */
        /* ä¸»å†…å®¹åŒºåŸŸï¼šä½¿ç”¨Flexboxå®ç°å†…å®¹å‚ç›´å’Œæ°´å¹³å±…ä¸­ */
        .main-content {
            padding: 40px 20px;
            display: flex;
            justify-content: center; /* æ°´å¹³å±…ä¸­ */
            align-items: center; /* å‚ç›´å±…ä¸­ */
            min-height: calc(100vh - 60px); /* å‡å»å¯¼èˆªæ é«˜åº¦åçš„å‰©ä½™é«˜åº¦ */
        }
        
        /* ç™»å½•å®¹å™¨ï¼šé™åˆ¶æœ€å¤§å®½åº¦ä¸º400px */
        .login-container {
            width: 100%;
            max-width: 400px;
        }
        
        /* ç™»å½•å¡ç‰‡ï¼šåœ†è§’è¾¹æ¡†å’Œé˜´å½±æ•ˆæœ */
        .login-card {
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        /* å¡ç‰‡å¤´éƒ¨ï¼šå±…ä¸­å¯¹é½ */
        .card-header {
            text-align: center;
            padding: 20px 0;
        }
        
        /* å¡ç‰‡æ ‡é¢˜æ ·å¼ */
        .card-header h2 {
            margin: 0 0 10px 0;
            color: #303133; /* æ·±ç°è‰² */
            font-size: 28px;
        }
        
        /* å¡ç‰‡å‰¯æ ‡é¢˜æ ·å¼ */
        .card-header p {
            margin: 0;
            color: #909399; /* ç°è‰² */
            font-size: 14px;
        }
        
        /* ç™»å½•è¡¨å•å®¹å™¨ */
        .login-form {
            padding: 20px;
        }
        
        /* ç™»å½•é€‰é¡¹åŒºåŸŸï¼šå·¦å³åˆ†å¸ƒï¼ˆè®°ä½æˆ‘å’Œæ³¨å†Œé“¾æ¥ï¼‰ */
        .login-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* ç™»å½•æŒ‰é’®ï¼šå…¨å®½æ˜¾ç¤ºï¼Œè¾ƒå¤§é«˜åº¦å’Œå­—å· */
        .login-btn {
            width: 100%;
            height: 45px;
            font-size: 16px;
        }
        
        /* ç™»å½•é¡µè„šåŒºåŸŸ */
        .login-footer {
            margin-top: 20px;
        }
        
        /* ç‰ˆæƒä¿¡æ¯ï¼šå±…ä¸­æ˜¾ç¤ºï¼ŒåŠé€æ˜ç™½è‰²æ–‡å­— */
        .copyright {
            text-align: center;
            margin-top: 30px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
        }
        
        /* ----- ä¿¡æ¯æç¤ºåŒºåŸŸ ----- */
        /* ç”¨æˆ·ç±»å‹ä¿¡æ¯æç¤ºæ¡†ï¼šæµ…è“è‰²èƒŒæ™¯ */
        .user-type-info {
            background: #f0f9ff; /* æµ…è“è‰²èƒŒæ™¯ */
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        /* ç”¨æˆ·ç±»å‹ä¿¡æ¯æ ‡é¢˜ */
        .user-type-info h4 {
            margin: 0 0 10px 0;
            color: #0369a1; /* æ·±è“è‰² */
            font-size: 16px;
        }
        
        /* ç”¨æˆ·ç±»å‹ä¿¡æ¯æ–‡æœ¬ */
        .user-type-info p {
            margin: 5px 0;
            color: #0c4a6e;
            font-size: 14px;
        }
        
        /* ----- æµ‹è¯•è´¦å·åŒºåŸŸ ----- */
        /* æµ‹è¯•è´¦å·æç¤ºæ¡†ï¼šé»„è‰²èƒŒæ™¯ */
        .test-accounts {
            background: #fef3c7; /* æµ…é»„è‰²èƒŒæ™¯ */
            border: 1px solid #fbbf24;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        
        /* æµ‹è¯•è´¦å·æ ‡é¢˜ */
        .test-accounts h4 {
            margin: 0 0 10px 0;
            color: #92400e; /* æ·±æ£•è‰² */
            font-size: 16px;
        }
        
        /* æµ‹è¯•è´¦å·å•é¡¹ï¼šå·¦å³åˆ†å¸ƒæ˜¾ç¤ºè´¦å·å’Œè§’è‰² */
        .test-accounts .account-item {
            display: flex;
            justify-content: space-between; /* è´¦å·å’Œè§’è‰²åˆ†åˆ«é å·¦å³ä¸¤ç«¯ */
            margin: 8px 0;
            padding: 8px;
            background: white; /* ç™½è‰²èƒŒæ™¯çªå‡ºæ˜¾ç¤º */
            border-radius: 4px;
            font-size: 14px;
        }
        
        /* è§’è‰²æ ‡ç­¾æ ·å¼ï¼šæ©™è‰²åŠ ç²— */
        .test-accounts .account-item .role {
            color: #f59e0b;
            font-weight: bold;
        }
    </style>
    <!-- ========================= è‡ªå®šä¹‰æ ·å¼ç»“æŸ ========================= -->
</head>
<body>
    <!-- ========================= Vueåº”ç”¨å®¹å™¨å¼€å§‹ ========================= -->
    <div id="app">
        <!-- ===== é¡¶éƒ¨å¯¼èˆªæ åŒºåŸŸ ===== -->
        <!-- ä½¿ç”¨Element Plusçš„Headerç»„ä»¶ -->
        <el-header class="header">
            <div class="header-content">
                <!-- LogoåŒºåŸŸï¼šæ˜¾ç¤ºç³»ç»Ÿå›¾æ ‡å’Œåç§° -->
                <div class="logo">
                    <i class="el-icon-gavel"></i> <!-- æ‹å–é”¤å›¾æ ‡ -->
                    <span>æ‹å–ç³»ç»Ÿ</span>
                </div>
                <!-- å¯¼èˆªé“¾æ¥åŒºåŸŸï¼šæä¾›å¿«é€Ÿè·³è½¬åˆ°å…¶ä»–é¡µé¢çš„é“¾æ¥ -->
                <div class="nav-links">
                    <el-link href="/auction/user/" type="primary">ç”¨æˆ·é¦–é¡µ</el-link>
                    <el-link href="/auction/admin/" type="primary">ç®¡ç†åå°</el-link>
                </div>
            </div>
        </el-header>

        <!-- ===== ä¸»å†…å®¹åŒºåŸŸ ===== -->
        <!-- ä½¿ç”¨Element Plusçš„Mainç»„ä»¶ -->
        <el-main class="main-content">
            <div class="login-container">
                <!-- ç™»å½•å¡ç‰‡ï¼šä½¿ç”¨Element Plusçš„Cardç»„ä»¶ï¼Œshadow="always"è¡¨ç¤ºå§‹ç»ˆæ˜¾ç¤ºé˜´å½± -->
                <el-card class="login-card" shadow="always">
                    <!-- å¡ç‰‡å¤´éƒ¨æ’æ§½ï¼šæ˜¾ç¤ºç™»å½•æ ‡é¢˜ -->
                    <template #header>
                        <div class="card-header">
                            <h2>ç³»ç»Ÿç™»å½•</h2>
                            <p>æ¬¢è¿æ¥åˆ°æ‹å–ç³»ç»Ÿ</p>
                        </div>
                    </template>
                    
                    <!-- ===== ç”¨æˆ·ç±»å‹è¯´æ˜åŒºåŸŸ ===== -->
                    <!-- æç¤ºç”¨æˆ·ç³»ç»Ÿä¼šæ ¹æ®èº«ä»½è‡ªåŠ¨è·³è½¬åˆ°ç›¸åº”é¡µé¢ -->
                    <div class="user-type-info">
                        <h4>ğŸ’¡ æ™ºèƒ½ç™»å½•</h4>
                        <p>â€¢ ç®¡ç†å‘˜ç™»å½•åè‡ªåŠ¨è·³è½¬åˆ°ç®¡ç†åå°</p>
                        <p>â€¢ æ™®é€šç”¨æˆ·ç™»å½•åè‡ªåŠ¨è·³è½¬åˆ°ç”¨æˆ·ç•Œé¢</p>
                        <p>â€¢ ç³»ç»Ÿä¼šæ ¹æ®æ‚¨çš„èº«ä»½è‡ªåŠ¨è¯†åˆ«æƒé™</p>
                    </div>
                    
                    <!-- ===== ç™»å½•è¡¨å• ===== -->
                    <!-- 
                        ref: è¡¨å•å¼•ç”¨ï¼Œç”¨äºéªŒè¯
                        :model: ç»‘å®šè¡¨å•æ•°æ®å¯¹è±¡
                        :rules: ç»‘å®šè¡¨å•éªŒè¯è§„åˆ™
                        label-width: è¡¨å•æ ‡ç­¾å®½åº¦
                    -->
                    <el-form 
                        ref="loginForm" 
                        :model="loginForm" 
                        :rules="loginRules" 
                        label-width="80px"
                        class="login-form">
                        
                        <!-- ç”¨æˆ·åè¾“å…¥æ¡† -->
                        <el-form-item label="ç”¨æˆ·å" prop="username">
                            <el-input 
                                v-model="loginForm.username" 
                                placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
                                prefix-icon="el-icon-user"
                                size="large"
                                clearable
                                @keyup.enter="handleLogin">
                                <!-- @keyup.enter: æŒ‰ä¸‹å›è½¦é”®æ—¶è§¦å‘ç™»å½• -->
                            </el-input>
                        </el-form-item>
                        
                        <!-- å¯†ç è¾“å…¥æ¡† -->
                        <el-form-item label="å¯†ç " prop="password">
                            <el-input 
                                v-model="loginForm.password" 
                                type="password" 
                                placeholder="è¯·è¾“å…¥å¯†ç "
                                prefix-icon="el-icon-lock"
                                size="large"
                                show-password
                                @keyup.enter="handleLogin">
                                <!-- show-password: æ˜¾ç¤ºå¯†ç å¯è§æ€§åˆ‡æ¢æŒ‰é’® -->
                            </el-input>
                        </el-form-item>
                        
                        <!-- ç™»å½•é€‰é¡¹ï¼šè®°ä½æˆ‘å’Œæ³¨å†Œé“¾æ¥ -->
                        <el-form-item>
                            <div class="login-options">
                                <el-checkbox v-model="loginForm.rememberMe">è®°ä½æˆ‘</el-checkbox>
                                <el-link href="/auction/user/register" type="primary">æ³¨å†Œè´¦å·</el-link>
                            </div>
                        </el-form-item>
                        
                        <!-- ç™»å½•æŒ‰é’® -->
                        <el-form-item>
                            <el-button 
                                type="primary" 
                                @click="handleLogin" 
                                :loading="loading"
                                size="large"
                                class="login-btn">
                                ç™»å½•
                                <!-- :loading å±æ€§ï¼šç™»å½•ä¸­æ—¶æ˜¾ç¤ºåŠ è½½åŠ¨ç”» -->
                            </el-button>
                        </el-form-item>
                    </el-form>
                    
                    <!-- ===== æµ‹è¯•è´¦å·ä¿¡æ¯åŒºåŸŸ ===== -->
                    <!-- æ–¹ä¾¿æµ‹è¯•äººå‘˜å¿«é€Ÿç™»å½•çš„æµ‹è¯•è´¦å·åˆ—è¡¨ -->
                    <div class="test-accounts">
                        <h4>ğŸ§ª æµ‹è¯•è´¦å·</h4>
                        <div class="account-item">
                            <span>admin / admin123</span>
                            <span class="role">ç®¡ç†å‘˜</span>
                        </div>
                        <div class="account-item">
                            <span>buyer1 / 123456</span>
                            <span class="role">æ™®é€šç”¨æˆ·</span>
                        </div>
                        <div class="account-item">
                            <span>buyer2 / 123456</span>
                            <span class="role">æ™®é€šç”¨æˆ·</span>
                        </div>
                    </div>
                </el-card>
                
                <!-- ç‰ˆæƒä¿¡æ¯ -->
                <div class="copyright">
                    <p>&copy; 2024 æ‹å–ç³»ç»Ÿ. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
                </div>
            </div>
        </el-main>
    </div>
    <!-- ========================= Vueåº”ç”¨å®¹å™¨ç»“æŸ ========================= -->

    <!-- ========================= JavaScriptåº“å¼•å…¥ ========================= -->
    <!-- Element UI JS - ä½¿ç”¨æœ¬åœ°èµ„æº -->
    <script src="/js/vue.js"></script>           <!-- Vue 3 æ ¸å¿ƒåº“ -->
    <script src="/js/element-plus.js"></script>  <!-- Element Plus UIç»„ä»¶åº“ -->
    <script src="/js/axios.js"></script>         <!-- Axios HTTPå®¢æˆ·ç«¯åº“ -->
    
    <!-- ========================= Vueåº”ç”¨ä¸»é€»è¾‘ ========================= -->
    <script>
        // ä»Vueä¸­è§£æ„å‡ºcreateAppå‡½æ•°ï¼Œç”¨äºåˆ›å»ºVueåº”ç”¨å®ä¾‹
        const { createApp } = Vue;
        // ä»ElementPlusä¸­è§£æ„å‡ºæ¶ˆæ¯æç¤ºç»„ä»¶
        const { ElMessage, ElMessageBox } = ElementPlus;

        // åˆ›å»ºVueåº”ç”¨å®ä¾‹
        createApp({
            /**
             * dataå‡½æ•°ï¼šå®šä¹‰ç»„ä»¶çš„å“åº”å¼æ•°æ®
             * @returns {Object} åŒ…å«æ‰€æœ‰å“åº”å¼æ•°æ®çš„å¯¹è±¡
             */
            data() {
                return {
                    // ç™»å½•åŠ è½½çŠ¶æ€ï¼šæ§åˆ¶ç™»å½•æŒ‰é’®çš„loadingåŠ¨ç”»
                    loading: false,
                    
                    // ç™»å½•è¡¨å•æ•°æ®å¯¹è±¡
                    loginForm: {
                        username: '',      // ç”¨æˆ·å
                        password: '',      // å¯†ç 
                        rememberMe: false  // æ˜¯å¦è®°ä½æˆ‘
                    },
                    
                    // ç™»å½•è¡¨å•éªŒè¯è§„åˆ™
                    loginRules: {
                        // ç”¨æˆ·åéªŒè¯è§„åˆ™
                        username: [
                            { required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å', trigger: 'blur' },  // å¿…å¡«éªŒè¯
                            { min: 3, max: 20, message: 'ç”¨æˆ·åé•¿åº¦åœ¨ 3 åˆ° 20 ä¸ªå­—ç¬¦', trigger: 'blur' }  // é•¿åº¦éªŒè¯
                        ],
                        // å¯†ç éªŒè¯è§„åˆ™
                        password: [
                            { required: true, message: 'è¯·è¾“å…¥å¯†ç ', trigger: 'blur' },  // å¿…å¡«éªŒè¯
                            { min: 6, max: 20, message: 'å¯†ç é•¿åº¦åœ¨ 6 åˆ° 20 ä¸ªå­—ç¬¦', trigger: 'blur' }  // é•¿åº¦éªŒè¯
                        ]
                    }
                }
            },
            
            /**
             * mountedç”Ÿå‘½å‘¨æœŸé’©å­ï¼šç»„ä»¶æŒ‚è½½å®Œæˆåæ‰§è¡Œ
             * ç”¨äºåˆå§‹åŒ–axiosæ‹¦æˆªå™¨
             */
            mounted() {
                // è®¾ç½®å…¨å±€axiosè¯·æ±‚æ‹¦æˆªå™¨
                // ä½œç”¨ï¼šåœ¨æ¯ä¸ªè¯·æ±‚å‘é€å‰è‡ªåŠ¨æ·»åŠ Authorizationå¤´
                axios.interceptors.request.use(config => {
                    const token = sessionStorage.getItem('authToken');
                    if (token) config.headers.Authorization = `Bearer ${token}`;
                    return config;
                });
            },
            
            /**
             * methodsï¼šå®šä¹‰ç»„ä»¶çš„æ–¹æ³•
             */
            methods: {
                /**
                 * handleLoginæ–¹æ³•ï¼šå¤„ç†ç”¨æˆ·ç™»å½•
                 * æµç¨‹ï¼š
                 * 1. éªŒè¯è¡¨å•
                 * 2. å‘é€ç™»å½•è¯·æ±‚
                 * 3. ä¿å­˜tokenå’Œç”¨æˆ·ä¿¡æ¯
                 * 4. æ ¹æ®ç”¨æˆ·ç±»å‹è·³è½¬åˆ°ç›¸åº”é¡µé¢
                 */
                handleLogin() {
                    // è°ƒç”¨è¡¨å•éªŒè¯æ–¹æ³•
                    this.$refs.loginForm.validate((valid) => {
                        if (valid) {
                            // è®¾ç½®åŠ è½½çŠ¶æ€ï¼ŒæŒ‰é’®æ˜¾ç¤ºloadingåŠ¨ç”»
                            this.loading = true;
                            
                            // æ‰“å°è°ƒè¯•ä¿¡æ¯
                            console.log('å¼€å§‹ç™»å½•è¯·æ±‚...');
                            
                            // å‘é€ç™»å½•POSTè¯·æ±‚åˆ°åç«¯API
                            axios.post('/api/auth/login', this.loginForm)
                                .then(response => {
                                    // æ‰“å°å“åº”ä¿¡æ¯ç”¨äºè°ƒè¯•
                                    console.log('ç™»å½•å“åº”:', response);
                                    console.log('å“åº”çŠ¶æ€ç :', response.status);
                                    console.log('å“åº”æ•°æ®:', response.data);
                                    
                                    // åˆ¤æ–­ç™»å½•æ˜¯å¦æˆåŠŸï¼ˆåç«¯è¿”å›codeä¸º200è¡¨ç¤ºæˆåŠŸï¼‰
                                    if (response.data.code === 200) {
                                        // æ˜¾ç¤ºæˆåŠŸæç¤ºæ¶ˆæ¯
                                        ElMessage.success('ç™»å½•æˆåŠŸ');
                                        
                                        // ä»å“åº”ä¸­æå–å…³é”®æ•°æ®
                                        const accessToken = response.data.data.accessToken;    // è®¿é—®ä»¤ç‰Œ
                                        const refreshToken = response.data.data.refreshToken;  // åˆ·æ–°ä»¤ç‰Œ
                                        const redirectUrl = response.data.data.redirectUrl || '/auction/user/';  // è·³è½¬URL
                                        const userType = response.data.data.user.userType;     // ç”¨æˆ·ç±»å‹
                                        
                                        // æ‰“å°å…³é”®ä¿¡æ¯ç”¨äºè°ƒè¯•
                                        console.log('è·å–AccessToken:', accessToken);
                                        console.log('è·å–RefreshToken:', refreshToken);
                                        console.log('è·³è½¬åœ°å€:', redirectUrl);
                                        console.log('ç”¨æˆ·ç±»å‹:', userType);
                                        
                                        // ä¿å­˜tokenå’Œç”¨æˆ·ä¿¡æ¯åˆ°localStorageï¼ˆæŒä¹…åŒ–å­˜å‚¨ï¼‰
                                        localStorage.setItem('accessToken', accessToken);
                                        localStorage.setItem('refreshToken', refreshToken);
                                        localStorage.setItem('userInfo', JSON.stringify(response.data.data.user));
                                        
                                        // è®¾ç½®å…¨å±€axiosé»˜è®¤è¯·æ±‚å¤´ï¼Œåç»­æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè‡ªåŠ¨å¸¦ä¸Štoken
                                        axios.defaults.headers.common['Authorization'] = `Bearer ${accessToken}`;
                                        
                                        // æ ¹æ®ç”¨æˆ·ç±»å‹è·³è½¬åˆ°ç›¸åº”é¡µé¢
                                        // ç®¡ç†å‘˜è·³è½¬åˆ°ç®¡ç†åå°ï¼Œæ™®é€šç”¨æˆ·è·³è½¬åˆ°ç”¨æˆ·ç•Œé¢
                                        console.log('å‡†å¤‡è·³è½¬åˆ°:', redirectUrl);
                                        window.location.href = redirectUrl;
                                    } else {
                                        // ç™»å½•å¤±è´¥ï¼Œæ˜¾ç¤ºåç«¯è¿”å›çš„é”™è¯¯æ¶ˆæ¯
                                        console.error('ç™»å½•å¤±è´¥:', response.data.message);
                                        ElMessage.error(response.data.message || 'ç™»å½•å¤±è´¥');
                                    }
                                })
                                .catch(error => {
                                    // è¯·æ±‚å‘ç”Ÿé”™è¯¯ï¼ˆç½‘ç»œé”™è¯¯ã€æœåŠ¡å™¨é”™è¯¯ç­‰ï¼‰
                                    console.error('ç™»å½•è¯·æ±‚é”™è¯¯:', error);
                                    console.error('é”™è¯¯è¯¦æƒ…:', error.response);
                                    ElMessage.error('ç™»å½•å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
                                })
                                .finally(() => {
                                    // æ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼Œæœ€åéƒ½è¦å…³é—­loadingçŠ¶æ€
                                    this.loading = false;
                                });
                        }
                    });
                }
            }
        }).use(ElementPlus).mount('#app');  // ä½¿ç”¨Element Plusæ’ä»¶å¹¶æŒ‚è½½åˆ°#appå…ƒç´ 
    </script>
    <!-- ========================= JavaScriptç»“æŸ ========================= -->
    
</body>
</html>
